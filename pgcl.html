<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>probably.pgcl &#8212; Probably  documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" />
    <link rel="stylesheet" type="text/css" href="_static/katex-math.css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js"></script>
    <script src="_static/katex_autorenderer.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="probably.pysmt" href="pysmt.html" />
    <link rel="prev" title="Probably Documentation" href="index.html" />
    
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js "></script>

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;1,400&family=Source+Serif+Pro:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <style>
        body {
            font: 15px/1.4 "Source Sans Pro",sans-serif;
        }
        h1, h2, h3, h5, h6, h6 {
            font-family: "Source Sans Pro",sans-serif;
        }
        p {
            font-family: "Source Serif Pro",serif;
        }
        .py, .field-list p, pre, code {
            font-family: 'Source Code Pro', monospace;
        }

        /* fix navbar overlaying contents when clicking on anchors */
        :target::before {
            content: "";
            display: block;
            height: 60px; /* fixed header height*/
            margin: -60px 0 0; /* negative fixed header height */
            background: none;
        }

        /* hack to limit the yellow highlight to the the children of the target,
           because of the above hack the target's highlight would be way too large */
        dt:target {
            background-color: transparent;
        }
        dt:target > * {
            background-color: #fbe54e;
        }

        /* spacing adjustments */
        .section {
            margin-bottom: 10rem;
            margin-top: 6rem;
        }
        div.body > .section:first-of-type {
            margin-top: 0rem;
        }
        .class, .function, .data {
            margin-top: 5rem;
            margin-bottom: 7rem;
            border-left: 1px solid #eee;
            padding-left: 1rem;
        }
        dl.attribute > dd, dl.class > dd, dl.function > dd, dl.method > dd {
            margin-left: 30px;
        }
        p {
            margin-top: 1.05em;
            margin-bottom: 1.05em;
            text-align: justify;
        }
        .field-list p, li p {
            text-align: left;
        }
        /* adjust font sizes */
        dl.field-list, dl.attribute {
            font-size: 90%;
        }
        .math {
            font-size: 90.09%;
        }
    </style>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          Probably</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="https://github.com/Philipp15b/probably">GitHub Repository</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Contents <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">probably.pgcl</span></code></a><ul>
<li class="toctree-l2"><a class="reference internal" href="#compiler-frontend">Compiler Frontend</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ast">AST</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#program">Program</a></li>
<li class="toctree-l3"><a class="reference internal" href="#types">Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="#declarations">Declarations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#expressions">Expressions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#instructions">Instructions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#superclasses">Superclasses</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#weakest-pre-expectations">Weakest Pre-Expectations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#loop-free">Loop-Free</a></li>
<li class="toctree-l3"><a class="reference internal" href="#transformers">Transformers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#loops">Loops</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#program-shapes">Program Shapes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#linearity">Linearity</a></li>
<li class="toctree-l3"><a class="reference internal" href="#one-big-loop">One Big Loop</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#parser">Parser</a></li>
<li class="toctree-l2"><a class="reference internal" href="#walking-asts">Walking ASTs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#type-checking">Type Checking</a></li>
<li class="toctree-l2"><a class="reference internal" href="#variable-substitution">Variable Substitution</a></li>
<li class="toctree-l2"><a class="reference internal" href="#expression-simplification">Expression Simplification</a></li>
<li class="toctree-l2"><a class="reference internal" href="#control-flow-graph">Control-Flow Graph</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pysmt.html"><code class="docutils literal notranslate"><span class="pre">probably.pysmt</span></code></a><ul>
<li class="toctree-l2"><a class="reference internal" href="pysmt.html#translation-context">Translation Context</a></li>
<li class="toctree-l2"><a class="reference internal" href="pysmt.html#expression-translation">Expression Translation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="util.html"><code class="docutils literal notranslate"><span class="pre">probably.util</span></code></a><ul>
<li class="toctree-l2"><a class="reference internal" href="util.html#mutable-references">Mutable References</a></li>
<li class="toctree-l2"><a class="reference internal" href="util.html#lark-expression-parser">Lark Expression Parser</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary">
<h4 style="padding: 5px 20px">Contents</h4>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">probably.pgcl</span></code></a><ul>
<li class="toctree-l2"><a class="reference internal" href="#compiler-frontend">Compiler Frontend</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ast">AST</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#program">Program</a></li>
<li class="toctree-l3"><a class="reference internal" href="#types">Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="#declarations">Declarations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#expressions">Expressions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#instructions">Instructions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#superclasses">Superclasses</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#weakest-pre-expectations">Weakest Pre-Expectations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#loop-free">Loop-Free</a></li>
<li class="toctree-l3"><a class="reference internal" href="#transformers">Transformers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#loops">Loops</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#program-shapes">Program Shapes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#linearity">Linearity</a></li>
<li class="toctree-l3"><a class="reference internal" href="#one-big-loop">One Big Loop</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#parser">Parser</a></li>
<li class="toctree-l2"><a class="reference internal" href="#walking-asts">Walking ASTs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#type-checking">Type Checking</a></li>
<li class="toctree-l2"><a class="reference internal" href="#variable-substitution">Variable Substitution</a></li>
<li class="toctree-l2"><a class="reference internal" href="#expression-simplification">Expression Simplification</a></li>
<li class="toctree-l2"><a class="reference internal" href="#control-flow-graph">Control-Flow Graph</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pysmt.html"><code class="docutils literal notranslate"><span class="pre">probably.pysmt</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="util.html"><code class="docutils literal notranslate"><span class="pre">probably.util</span></code></a></li>
</ul>

        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      
  <span class="target" id="module-probably.pgcl"></span><div class="section" id="probably-pgcl">
<h1><code class="docutils literal notranslate"><span class="pre">probably.pgcl</span></code><a class="headerlink" href="#probably-pgcl" title="Permalink to this headline">¶</a></h1>
<p>This module implements pGCL parsing, type-checking, and transformations of pGCL programs.
The most important modules are the two below:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#module-probably.pgcl.compiler" title="probably.pgcl.compiler"><code class="xref py py-mod docutils literal notranslate"><span class="pre">probably.pgcl.compiler</span></code></a>. Functions that do parsing and type-checking all at once.</p></li>
<li><p><a class="reference internal" href="#module-probably.pgcl.ast" title="probably.pgcl.ast"><code class="xref py py-mod docutils literal notranslate"><span class="pre">probably.pgcl.ast</span></code></a>. The abstract syntax tree (AST) with all its types that define it.</p></li>
</ol>
<p>It is also possible to calculate weakest pre-expectations of programs (see <a class="reference internal" href="#module-probably.pgcl.wp" title="probably.pgcl.wp"><code class="xref py py-mod docutils literal notranslate"><span class="pre">probably.pgcl.wp</span></code></a>) for some specific types of programs.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">probably.pgcl.compiler</span> <span class="kn">import</span> <span class="n">compile_pgcl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">code</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;# this is a comment</span>
<span class="gp">... </span><span class="s1"># A program starts with the variable declarations.</span>
<span class="gp">... </span><span class="s1"># Every variable must be declared.</span>
<span class="gp">... </span><span class="s1"># A variable is either of type nat or of type bool.</span>
<span class="gp">... </span><span class="s1">bool f;</span>
<span class="gp">... </span><span class="s1">nat c;  # optional: provide bounds for the variables. The declaration then looks as follows: nat c [0,100]</span>
<span class="gp">...</span><span class="s1"></span>
<span class="gp">... </span><span class="s1"># Logical operators: &amp; (and),  || (or), not (negation)</span>
<span class="gp">... </span><span class="s1"># Operator precedences: not &gt; &amp; &gt; ||</span>
<span class="gp">... </span><span class="s1"># Comparing arithmetic expressions: &lt;=, &lt;, ==</span>
<span class="gp">...</span><span class="s1"></span>
<span class="gp">... </span><span class="s1">skip;</span>
<span class="gp">...</span><span class="s1"></span>
<span class="gp">... </span><span class="s1">while (c &lt; 10 &amp; f) {</span>
<span class="gp">... </span><span class="s1">    {c := unif(1,10)} [0.8] {f:=true}</span>
<span class="gp">... </span><span class="s1">}&#39;&#39;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">compile_pgcl</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
<span class="go">Program(variables={&#39;f&#39;: BoolType(), &#39;c&#39;: NatType(bounds=None)}, constants={}, instructions=[SkipInstr(), WhileInstr(cond=BinopExpr(operator=Binop.AND, lhs=BinopExpr(operator=Binop.LE, lhs=VarExpr(&#39;c&#39;), rhs=NatLitExpr(10)), rhs=VarExpr(&#39;f&#39;)), body=[ChoiceInstr(prob=FloatLitExpr(&quot;0.8&quot;), lhs=[AsgnInstr(lhs=&#39;c&#39;, rhs=UniformExpr(start=NatLitExpr(1), end=NatLitExpr(10)))], rhs=[AsgnInstr(lhs=&#39;f&#39;, rhs=BoolLitExpr(True))])])])</span>
</pre></div>
</div>
<p>For more details on what syntax is accepted for pGCL programs, you can view the <a class="reference internal" href="pgcl_grammar.html#pgcl-grammar"><span class="std std-ref">formal grammar used for the pGCL parser</span></a>.</p>
<span class="target" id="module-probably.pgcl.compiler"></span><div class="section" id="compiler-frontend">
<h2>Compiler Frontend<a class="headerlink" href="#compiler-frontend" title="Permalink to this headline">¶</a></h2>
<p>This module provides an API that combines parsing and type-checking all at once.
It is just a thin wrapper around the parser, type-checker, and constant substitution.</p>
<p>Refer to <a class="reference internal" href="#module-probably.pgcl.parser" title="probably.pgcl.parser"><code class="xref py py-mod docutils literal notranslate"><span class="pre">probably.pgcl.parser</span></code></a> and <a class="reference internal" href="#module-probably.pgcl.check" title="probably.pgcl.check"><code class="xref py py-mod docutils literal notranslate"><span class="pre">probably.pgcl.check</span></code></a> for the parser and type-checker respectively.
Variable/constant substituion is implemented in <a class="reference internal" href="#module-probably.pgcl.substitute" title="probably.pgcl.substitute"><code class="xref py py-mod docutils literal notranslate"><span class="pre">probably.pgcl.substitute</span></code></a>.
If you want them, linearity checks live in <a class="reference internal" href="#module-probably.pgcl.syntax" title="probably.pgcl.syntax"><code class="xref py py-mod docutils literal notranslate"><span class="pre">probably.pgcl.syntax</span></code></a>.</p>
<dl class="py function">
<dt id="probably.pgcl.compiler.compile_pgcl">
<code class="sig-prename descclassname">probably.pgcl.compiler.</code><code class="sig-name descname">compile_pgcl</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">code</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">substitute_constants</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/compiler.html#compile_pgcl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.compiler.compile_pgcl" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse and type-check a pGCL program.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">compile_pgcl</span><span class="p">(</span><span class="s2">&quot;nat x; nat y; x := y&quot;</span><span class="p">)</span>
<span class="go">Program(variables={&#39;x&#39;: NatType(bounds=None), &#39;y&#39;: NatType(bounds=None)}, constants={}, instructions=[AsgnInstr(lhs=&#39;x&#39;, rhs=VarExpr(&#39;y&#39;))])</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">compile_pgcl</span><span class="p">(</span><span class="s2">&quot;x := y&quot;</span><span class="p">)</span>
<span class="go">CheckFail(location=..., message=&#39;x is not a variable.&#39;)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>code</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>substitute_constants</strong> – Whether constant substitution is done on the program, defaults to <cite>True</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.Program" title="probably.pgcl.ast.Program"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>, <a class="reference internal" href="#probably.pgcl.check.CheckFail" title="probably.pgcl.check.CheckFail"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckFail</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="probably.pgcl.compiler.compile_expr">
<code class="sig-prename descclassname">probably.pgcl.compiler.</code><code class="sig-name descname">compile_expr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">program</span></em>, <em class="sig-param"><span class="n">code</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">substitute_constants</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/compiler.html#compile_expr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.compiler.compile_expr" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse and type-check an expression.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>program</strong> (<a class="reference internal" href="#probably.pgcl.ast.Program" title="probably.pgcl.ast.Program"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – </p></li>
<li><p><strong>code</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>substitute_constants</strong> – Whether constant substitution is done on the expression, defaults to <cite>True</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.check.CheckFail" title="probably.pgcl.check.CheckFail"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckFail</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="probably.pgcl.compiler.compile_expectation">
<code class="sig-prename descclassname">probably.pgcl.compiler.</code><code class="sig-name descname">compile_expectation</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">program</span></em>, <em class="sig-param"><span class="n">code</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">substitute_constants</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/compiler.html#compile_expectation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.compiler.compile_expectation" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse and type-check an expectation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>program</strong> (<a class="reference internal" href="#probably.pgcl.ast.Program" title="probably.pgcl.ast.Program"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – </p></li>
<li><p><strong>code</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>substitute_constants</strong> – Whether constant substitution is done on the expectation, defaults to <cite>True</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.check.CheckFail" title="probably.pgcl.check.CheckFail"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckFail</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

</div>
<span class="target" id="module-probably.pgcl.ast"></span><div class="section" id="ast">
<h2>AST<a class="headerlink" href="#ast" title="Permalink to this headline">¶</a></h2>
<p>All data types to represent a pGCL program.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For our AST types, most “sum types” have a normal Python superclass (e.g. <a class="reference internal" href="#probably.pgcl.ast.TypeClass" title="probably.pgcl.ast.TypeClass"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeClass</span></code></a> for types), but also a Union type (e.g. <a class="reference internal" href="#probably.pgcl.ast.Type" title="probably.pgcl.ast.Type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Type</span></code></a>).
<strong>Prefer using the Union type, as it allows for exhaustiveness checking by mypy.</strong></p>
<p>In some rare cases, it’s necessary to tell mypy that an object of a superclass type is actually in the respective union.
Use <code class="docutils literal notranslate"><span class="pre">cast</span></code> methods, e.g. <a class="reference internal" href="#probably.pgcl.ast.InstrClass.cast" title="probably.pgcl.ast.InstrClass.cast"><code class="xref py py-meth docutils literal notranslate"><span class="pre">InstrClass.cast()</span></code></a> to go from <a class="reference internal" href="#probably.pgcl.ast.InstrClass" title="probably.pgcl.ast.InstrClass"><code class="xref py py-class docutils literal notranslate"><span class="pre">InstrClass</span></code></a> to <a class="reference internal" href="#probably.pgcl.ast.Instr" title="probably.pgcl.ast.Instr"><code class="xref py py-data docutils literal notranslate"><span class="pre">Instr</span></code></a>.</p>
<p>Also note that <code class="docutils literal notranslate"><span class="pre">isinstance</span></code> checks must be done against the superclasses, because Python’s Union does not yet work with <code class="docutils literal notranslate"><span class="pre">isinstance</span></code>.</p>
</div>
<div class="section" id="program">
<h3>Program<a class="headerlink" href="#program" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="probably.pgcl.ast.Program">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">Program</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">declarations</span></em>, <em class="sig-param"><span class="n">variables</span></em>, <em class="sig-param"><span class="n">constants</span></em>, <em class="sig-param"><span class="n">instructions</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#Program"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.Program" title="Permalink to this definition">¶</a></dt>
<dd><p>A pGCL program has a bunch of variables with types, constants with defining expressions, and a list of instructions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>declarations</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarDecl" title="probably.pgcl.ast.VarDecl"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarDecl</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.ConstDecl" title="probably.pgcl.ast.ConstDecl"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConstDecl</span></code></a>]]) – </p></li>
<li><p><strong>variables</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.BoolType" title="probably.pgcl.ast.BoolType"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolType</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatType" title="probably.pgcl.ast.NatType"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatType</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatType" title="probably.pgcl.ast.FloatType"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatType</span></code></a>]]) – </p></li>
<li><p><strong>constants</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]]) – </p></li>
<li><p><strong>instructions</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.SkipInstr" title="probably.pgcl.ast.SkipInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.WhileInstr" title="probably.pgcl.ast.WhileInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.IfInstr" title="probably.pgcl.ast.IfInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.AsgnInstr" title="probably.pgcl.ast.AsgnInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.ChoiceInstr" title="probably.pgcl.ast.ChoiceInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickInstr" title="probably.pgcl.ast.TickInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code></a>]]) – </p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="probably.pgcl.ast.Program.__str__">
<code class="sig-name descname">__str__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#Program.__str__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.Program.__str__" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert this program to corresponding source code in pGCL.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">.parser</span> <span class="kn">import</span> <span class="n">parse_pgcl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;nat x; nat y; while (x &lt; 2) </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">program</span><span class="p">)</span>
<span class="go">nat x;</span>
<span class="go">nat y;</span>
<span class="go">while (x &lt; 2) { }</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.ast.Program.declarations">
<code class="sig-name descname">declarations</code><em class="property">: List<span class="p">[</span>Union<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.VarDecl" title="probably.pgcl.ast.VarDecl">probably.pgcl.ast.VarDecl</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.ConstDecl" title="probably.pgcl.ast.ConstDecl">probably.pgcl.ast.ConstDecl</a><span class="p">]</span><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.ast.Program.declarations" title="Permalink to this definition">¶</a></dt>
<dd><p>The original list of declarations.</p>
</dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.ast.Program.variables">
<code class="sig-name descname">variables</code><em class="property">: Dict<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">, </span>Union<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.BoolType" title="probably.pgcl.ast.BoolType">probably.pgcl.ast.BoolType</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.NatType" title="probably.pgcl.ast.NatType">probably.pgcl.ast.NatType</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.FloatType" title="probably.pgcl.ast.FloatType">probably.pgcl.ast.FloatType</a><span class="p">]</span><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.ast.Program.variables" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict of variables to their type.
Only valid if the declarations are well-typed.</p>
</dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.ast.Program.constants">
<code class="sig-name descname">constants</code><em class="property">: Dict<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">, </span>Union<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr">probably.pgcl.ast.VarExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr">probably.pgcl.ast.BoolLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr">probably.pgcl.ast.NatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr">probably.pgcl.ast.FloatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr">probably.pgcl.ast.UnopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr">probably.pgcl.ast.BinopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr">probably.pgcl.ast.UniformExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr">probably.pgcl.ast.CategoricalExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr">probably.pgcl.ast.SubstExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr">probably.pgcl.ast.TickExpr</a><span class="p">]</span><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.ast.Program.constants" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict of constant names to their defining expression.
Only valid if the declarations are well-typed.</p>
</dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.ast.Program.instructions">
<code class="sig-name descname">instructions</code><em class="property">: List<span class="p">[</span>Union<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.SkipInstr" title="probably.pgcl.ast.SkipInstr">probably.pgcl.ast.SkipInstr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.WhileInstr" title="probably.pgcl.ast.WhileInstr">probably.pgcl.ast.WhileInstr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.IfInstr" title="probably.pgcl.ast.IfInstr">probably.pgcl.ast.IfInstr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.AsgnInstr" title="probably.pgcl.ast.AsgnInstr">probably.pgcl.ast.AsgnInstr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.ChoiceInstr" title="probably.pgcl.ast.ChoiceInstr">probably.pgcl.ast.ChoiceInstr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.TickInstr" title="probably.pgcl.ast.TickInstr">probably.pgcl.ast.TickInstr</a><span class="p">]</span><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.ast.Program.instructions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="probably.pgcl.ast.Program.from_parse">
<em class="property">static </em><code class="sig-name descname">from_parse</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">declarations</span></em>, <em class="sig-param"><span class="n">instructions</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#Program.from_parse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.Program.from_parse" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a program from the parser’s output.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>declarations</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarDecl" title="probably.pgcl.ast.VarDecl"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarDecl</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.ConstDecl" title="probably.pgcl.ast.ConstDecl"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConstDecl</span></code></a>]]) – </p></li>
<li><p><strong>instructions</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.SkipInstr" title="probably.pgcl.ast.SkipInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.WhileInstr" title="probably.pgcl.ast.WhileInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.IfInstr" title="probably.pgcl.ast.IfInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.AsgnInstr" title="probably.pgcl.ast.AsgnInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.ChoiceInstr" title="probably.pgcl.ast.ChoiceInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickInstr" title="probably.pgcl.ast.TickInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code></a>]]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#probably.pgcl.ast.Program" title="probably.pgcl.ast.Program"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="probably.pgcl.ast.Program.add_variable">
<code class="sig-name descname">add_variable</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">var</span></em>, <em class="sig-param"><span class="n">typ</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#Program.add_variable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.Program.add_variable" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new variable declaration to the program’s list of declarations and
to the dict of variables.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#AssertionError" title="(in Python v3.9)"><strong>AssertionError</strong></a> – if the variable is already declared</p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>var</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>typ</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.BoolType" title="probably.pgcl.ast.BoolType"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolType</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatType" title="probably.pgcl.ast.NatType"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatType</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatType" title="probably.pgcl.ast.FloatType"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatType</span></code></a>]) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="probably.pgcl.ast.Program.to_skeleton">
<code class="sig-name descname">to_skeleton</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#Program.to_skeleton"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.Program.to_skeleton" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a (shallow) copy of this program with just the declarations, but
without any instructions.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">.parser</span> <span class="kn">import</span> <span class="n">parse_pgcl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;nat x; nat y; while (x &lt; 2) </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span><span class="o">.</span><span class="n">to_skeleton</span><span class="p">()</span>
<span class="go">Program(variables={&#39;x&#39;: NatType(bounds=None), &#39;y&#39;: NatType(bounds=None)}, constants={}, instructions=[])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#probably.pgcl.ast.Program" title="probably.pgcl.ast.Program"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="types">
<h3>Types<a class="headerlink" href="#types" title="Permalink to this headline">¶</a></h3>
<dl class="py data">
<dt id="probably.pgcl.ast.Type">
<code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">Type</code><em class="property"> = typing.Union[probably.pgcl.ast.BoolType, probably.pgcl.ast.NatType, probably.pgcl.ast.FloatType]</em><a class="reference internal" href="_modules/typing.html#Type"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.Type" title="Permalink to this definition">¶</a></dt>
<dd><p>Union type for all type objects. See <a class="reference internal" href="#probably.pgcl.ast.TypeClass" title="probably.pgcl.ast.TypeClass"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeClass</span></code></a> for use with isinstance.</p>
</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.ast.BoolType">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">BoolType</code><a class="reference internal" href="_modules/probably/pgcl/ast.html#BoolType"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.BoolType" title="Permalink to this definition">¶</a></dt>
<dd><p>Boolean type.</p>
</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.ast.NatType">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">NatType</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">bounds</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#NatType"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.NatType" title="Permalink to this definition">¶</a></dt>
<dd><p>Natural number types with optional bounds.</p>
<p>Bounds are only preserved for variables.
Values of bounded types are considered as unbounded until they are assigned to a bounded variable.
That is to say, bounds are lost in expressions such as in the example below:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">.parser</span> <span class="kn">import</span> <span class="n">parse_pgcl</span><span class="p">,</span> <span class="n">parse_expr</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">.check</span> <span class="kn">import</span> <span class="n">get_type</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;nat x [1,5]&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_type</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="n">parse_expr</span><span class="p">(</span><span class="s2">&quot;x + 5&quot;</span><span class="p">))</span>
<span class="go">NatType(bounds=None)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>bounds</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.Bounds" title="probably.pgcl.ast.Bounds"><code class="xref py py-class docutils literal notranslate"><span class="pre">Bounds</span></code></a>]) – </p>
</dd>
</dl>
<dl class="py attribute">
<dt id="probably.pgcl.ast.NatType.bounds">
<code class="sig-name descname">bounds</code><em class="property">: Optional<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.Bounds" title="probably.pgcl.ast.Bounds">probably.pgcl.ast.Bounds</a><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.ast.NatType.bounds" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.ast.Bounds">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">Bounds</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">lower</span></em>, <em class="sig-param"><span class="n">upper</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#Bounds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.Bounds" title="Permalink to this definition">¶</a></dt>
<dd><p>Bounds for a natural number type.</p>
<p>The bounds can contain constant expressions, therefore bounds have type <a class="reference internal" href="#probably.pgcl.ast.Expr" title="probably.pgcl.ast.Expr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Expr</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lower</strong> (<em>Expr</em>) – </p></li>
<li><p><strong>upper</strong> (<em>Expr</em>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="probably.pgcl.ast.Bounds.lower">
<code class="sig-name descname">lower</code><em class="property">: Union<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr">probably.pgcl.ast.VarExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr">probably.pgcl.ast.BoolLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr">probably.pgcl.ast.NatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr">probably.pgcl.ast.FloatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr">probably.pgcl.ast.UnopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr">probably.pgcl.ast.BinopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr">probably.pgcl.ast.UniformExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr">probably.pgcl.ast.CategoricalExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr">probably.pgcl.ast.SubstExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr">probably.pgcl.ast.TickExpr</a><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.ast.Bounds.lower" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.ast.Bounds.upper">
<code class="sig-name descname">upper</code><em class="property">: Union<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr">probably.pgcl.ast.VarExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr">probably.pgcl.ast.BoolLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr">probably.pgcl.ast.NatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr">probably.pgcl.ast.FloatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr">probably.pgcl.ast.UnopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr">probably.pgcl.ast.BinopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr">probably.pgcl.ast.UniformExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr">probably.pgcl.ast.CategoricalExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr">probably.pgcl.ast.SubstExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr">probably.pgcl.ast.TickExpr</a><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.ast.Bounds.upper" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.ast.FloatType">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">FloatType</code><a class="reference internal" href="_modules/probably/pgcl/ast.html#FloatType"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.FloatType" title="Permalink to this definition">¶</a></dt>
<dd><p>Floating numbers, used for probabilities.</p>
</dd></dl>

</div>
<div class="section" id="declarations">
<h3>Declarations<a class="headerlink" href="#declarations" title="Permalink to this headline">¶</a></h3>
<dl class="py data">
<dt id="probably.pgcl.ast.Decl">
<code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">Decl</code><em class="property"> = typing.Union[probably.pgcl.ast.VarDecl, probably.pgcl.ast.ConstDecl]</em><a class="headerlink" href="#probably.pgcl.ast.Decl" title="Permalink to this definition">¶</a></dt>
<dd><p>Union type for all declaration objects. See <a class="reference internal" href="#probably.pgcl.ast.DeclClass" title="probably.pgcl.ast.DeclClass"><code class="xref py py-class docutils literal notranslate"><span class="pre">DeclClass</span></code></a> for use with isinstance.</p>
</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.ast.VarDecl">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">VarDecl</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">var</span></em>, <em class="sig-param"><span class="n">typ</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#VarDecl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.VarDecl" title="Permalink to this definition">¶</a></dt>
<dd><p>A variable declaration with a name and a type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>var</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>typ</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.BoolType" title="probably.pgcl.ast.BoolType"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolType</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatType" title="probably.pgcl.ast.NatType"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatType</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatType" title="probably.pgcl.ast.FloatType"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatType</span></code></a>]) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="probably.pgcl.ast.VarDecl.var">
<code class="sig-name descname">var</code><em class="property">: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></em><a class="headerlink" href="#probably.pgcl.ast.VarDecl.var" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.ast.VarDecl.typ">
<code class="sig-name descname">typ</code><em class="property">: Union<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.BoolType" title="probably.pgcl.ast.BoolType">probably.pgcl.ast.BoolType</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.NatType" title="probably.pgcl.ast.NatType">probably.pgcl.ast.NatType</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.FloatType" title="probably.pgcl.ast.FloatType">probably.pgcl.ast.FloatType</a><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.ast.VarDecl.typ" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.ast.ConstDecl">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">ConstDecl</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">var</span></em>, <em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#ConstDecl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.ConstDecl" title="Permalink to this definition">¶</a></dt>
<dd><p>A constant declaration with a name and an expression.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>var</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>value</strong> (<em>Expr</em>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="probably.pgcl.ast.ConstDecl.var">
<code class="sig-name descname">var</code><em class="property">: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></em><a class="headerlink" href="#probably.pgcl.ast.ConstDecl.var" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.ast.ConstDecl.value">
<code class="sig-name descname">value</code><em class="property">: Union<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr">probably.pgcl.ast.VarExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr">probably.pgcl.ast.BoolLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr">probably.pgcl.ast.NatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr">probably.pgcl.ast.FloatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr">probably.pgcl.ast.UnopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr">probably.pgcl.ast.BinopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr">probably.pgcl.ast.UniformExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr">probably.pgcl.ast.CategoricalExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr">probably.pgcl.ast.SubstExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr">probably.pgcl.ast.TickExpr</a><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.ast.ConstDecl.value" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="expressions">
<span id="id1"></span><h3>Expressions<a class="headerlink" href="#expressions" title="Permalink to this headline">¶</a></h3>
<p>In the AST, a bunch of different things that look like program expressions are
lumped together. Formally, let a state <span class="math">\(\sigma \in \Sigma\)</span> consists of a
bunch of values for each variable, and be represented by a function of type
<span class="math">\(\sigma : \text{Var} \to \text{Value}\)</span>.</p>
<p>First, there are <em>state expressions</em> that, given a state <span class="math">\(\sigma\)</span>, compute
some value to be used later in the program itself: <span class="math">\(\Sigma \to
\text{Value}\)</span>. There are two types of expressions we call <em>monadic expressions</em>:
<a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a> and <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>. They map a state to a
distribution of values: <span class="math">\(\Sigma \to \text{Dist}[\Sigma]\)</span>. And
<em>expectations</em> are also expressed using <a class="reference internal" href="#probably.pgcl.ast.Expr" title="probably.pgcl.ast.Expr"><code class="xref py py-data docutils literal notranslate"><span class="pre">Expr</span></code></a>, but they are actually a
mapping of states to <em>expected values</em>: <span class="math">\(\Sigma \to \mathbb{R}\)</span>.</p>
<dl class="py data">
<dt id="probably.pgcl.ast.Expr">
<code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">Expr</code><em class="property"> = typing.Union[probably.pgcl.ast.VarExpr, probably.pgcl.ast.BoolLitExpr, probably.pgcl.ast.NatLitExpr, probably.pgcl.ast.FloatLitExpr, probably.pgcl.ast.UnopExpr, probably.pgcl.ast.BinopExpr, probably.pgcl.ast.UniformExpr, probably.pgcl.ast.CategoricalExpr, probably.pgcl.ast.SubstExpr, probably.pgcl.ast.TickExpr]</em><a class="headerlink" href="#probably.pgcl.ast.Expr" title="Permalink to this definition">¶</a></dt>
<dd><p>Union type for all expression objects. See <a class="reference internal" href="#probably.pgcl.ast.ExprClass" title="probably.pgcl.ast.ExprClass"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExprClass</span></code></a> for use with isinstance.</p>
</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.ast.VarExpr">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">VarExpr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">var</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#VarExpr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.VarExpr" title="Permalink to this definition">¶</a></dt>
<dd><p>A variable is an expression.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>var</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p>
</dd>
</dl>
<dl class="py attribute">
<dt id="probably.pgcl.ast.VarExpr.var">
<code class="sig-name descname">var</code><em class="property">: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></em><a class="headerlink" href="#probably.pgcl.ast.VarExpr.var" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.ast.BoolLitExpr">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">BoolLitExpr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#BoolLitExpr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.BoolLitExpr" title="Permalink to this definition">¶</a></dt>
<dd><p>A bool literal is an expression.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p>
</dd>
</dl>
<dl class="py attribute">
<dt id="probably.pgcl.ast.BoolLitExpr.value">
<code class="sig-name descname">value</code><em class="property">: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></em><a class="headerlink" href="#probably.pgcl.ast.BoolLitExpr.value" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.ast.NatLitExpr">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">NatLitExpr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#NatLitExpr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.NatLitExpr" title="Permalink to this definition">¶</a></dt>
<dd><p>A natural number is an expression.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – </p>
</dd>
</dl>
<dl class="py attribute">
<dt id="probably.pgcl.ast.NatLitExpr.value">
<code class="sig-name descname">value</code><em class="property">: <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a></em><a class="headerlink" href="#probably.pgcl.ast.NatLitExpr.value" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.ast.FloatLitExpr">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">FloatLitExpr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#FloatLitExpr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.FloatLitExpr" title="Permalink to this definition">¶</a></dt>
<dd><p>A decimal literal (used for probabilities) is an expression.</p>
<p>It is represented by either a <code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code> (created from decimal
literals), or by a <code class="xref py py-class docutils literal notranslate"><span class="pre">Fraction</span></code> (created from a fraction of natural numbers).</p>
<p>Infinity is represented by <code class="docutils literal notranslate"><span class="pre">Decimal('Infinity')</span></code>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Note that the <code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code> representation is not exact under arithmetic operations.
That is fine if it is used just as the representation of a decimal literal.
For calculations, please use <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr.to_fraction" title="probably.pgcl.ast.FloatLitExpr.to_fraction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">to_fraction()</span></code></a>.</p>
</div>
<dl class="py attribute">
<dt id="probably.pgcl.ast.FloatLitExpr.value">
<code class="sig-name descname">value</code><em class="property">: Union<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/decimal.html#decimal.Decimal" title="(in Python v3.9)">decimal.Decimal</a><span class="p">, </span><a class="reference external" href="https://docs.python.org/3/library/fractions.html#fractions.Fraction" title="(in Python v3.9)">fractions.Fraction</a><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.ast.FloatLitExpr.value" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="probably.pgcl.ast.FloatLitExpr.infinity">
<em class="property">static </em><code class="sig-name descname">infinity</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#FloatLitExpr.infinity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.FloatLitExpr.infinity" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new infinite value.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FloatLitExpr</span><span class="o">.</span><span class="n">infinity</span><span class="p">()</span><span class="o">.</span><span class="n">is_infinite</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="probably.pgcl.ast.FloatLitExpr.is_infinite">
<code class="sig-name descname">is_infinite</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#FloatLitExpr.is_infinite"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.FloatLitExpr.is_infinite" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether this expression represents infinity.</p>
</dd></dl>

<dl class="py method">
<dt id="probably.pgcl.ast.FloatLitExpr.to_fraction">
<code class="sig-name descname">to_fraction</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#FloatLitExpr.to_fraction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.FloatLitExpr.to_fraction" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert this value to a <code class="xref py py-class docutils literal notranslate"><span class="pre">Fraction</span></code>.
Throws an exception if the value <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr.is_infinite" title="probably.pgcl.ast.FloatLitExpr.is_infinite"><code class="xref py py-meth docutils literal notranslate"><span class="pre">is_infinite()</span></code></a>!</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span> <span class="o">=</span> <span class="n">FloatLitExpr</span><span class="p">(</span><span class="s2">&quot;0.1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span><span class="o">.</span><span class="n">to_fraction</span><span class="p">()</span>
<span class="go">Fraction(1, 10)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/fractions.html#fractions.Fraction" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Fraction</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.ast.Unop">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">Unop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#Unop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.Unop" title="Permalink to this definition">¶</a></dt>
<dd><p>What unary operator is it?</p>
<dl class="py attribute">
<dt id="probably.pgcl.ast.Unop.NEG">
<code class="sig-name descname">NEG</code><em class="property"> = 1</em><a class="headerlink" href="#probably.pgcl.ast.Unop.NEG" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.ast.Unop.IVERSON">
<code class="sig-name descname">IVERSON</code><em class="property"> = 2</em><a class="headerlink" href="#probably.pgcl.ast.Unop.IVERSON" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.ast.UnopExpr">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">UnopExpr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">operator</span></em>, <em class="sig-param"><span class="n">expr</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#UnopExpr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.UnopExpr" title="Permalink to this definition">¶</a></dt>
<dd><p>A unary operator is an expression.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>operator</strong> (<a class="reference internal" href="#probably.pgcl.ast.Unop" title="probably.pgcl.ast.Unop"><code class="xref py py-class docutils literal notranslate"><span class="pre">Unop</span></code></a>) – </p></li>
<li><p><strong>expr</strong> (<em>Expr</em>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="probably.pgcl.ast.UnopExpr.operator">
<code class="sig-name descname">operator</code><em class="property">: <a class="reference internal" href="#probably.pgcl.ast.Unop" title="probably.pgcl.ast.Unop">probably.pgcl.ast.Unop</a></em><a class="headerlink" href="#probably.pgcl.ast.UnopExpr.operator" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.ast.UnopExpr.expr">
<code class="sig-name descname">expr</code><em class="property">: Union<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr">probably.pgcl.ast.VarExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr">probably.pgcl.ast.BoolLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr">probably.pgcl.ast.NatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr">probably.pgcl.ast.FloatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr">probably.pgcl.ast.UnopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr">probably.pgcl.ast.BinopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr">probably.pgcl.ast.UniformExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr">probably.pgcl.ast.CategoricalExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr">probably.pgcl.ast.SubstExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr">probably.pgcl.ast.TickExpr</a><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.ast.UnopExpr.expr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.ast.Binop">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">Binop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#Binop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.Binop" title="Permalink to this definition">¶</a></dt>
<dd><p>What binary operator is it?</p>
<dl class="py attribute">
<dt id="probably.pgcl.ast.Binop.OR">
<code class="sig-name descname">OR</code><em class="property"> = 1</em><a class="headerlink" href="#probably.pgcl.ast.Binop.OR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.ast.Binop.AND">
<code class="sig-name descname">AND</code><em class="property"> = 2</em><a class="headerlink" href="#probably.pgcl.ast.Binop.AND" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.ast.Binop.LEQ">
<code class="sig-name descname">LEQ</code><em class="property"> = 3</em><a class="headerlink" href="#probably.pgcl.ast.Binop.LEQ" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.ast.Binop.LE">
<code class="sig-name descname">LE</code><em class="property"> = 4</em><a class="headerlink" href="#probably.pgcl.ast.Binop.LE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.ast.Binop.EQ">
<code class="sig-name descname">EQ</code><em class="property"> = 5</em><a class="headerlink" href="#probably.pgcl.ast.Binop.EQ" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.ast.Binop.PLUS">
<code class="sig-name descname">PLUS</code><em class="property"> = 6</em><a class="headerlink" href="#probably.pgcl.ast.Binop.PLUS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.ast.Binop.MINUS">
<code class="sig-name descname">MINUS</code><em class="property"> = 7</em><a class="headerlink" href="#probably.pgcl.ast.Binop.MINUS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.ast.Binop.TIMES">
<code class="sig-name descname">TIMES</code><em class="property"> = 8</em><a class="headerlink" href="#probably.pgcl.ast.Binop.TIMES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.ast.Binop.DIVIDE">
<code class="sig-name descname">DIVIDE</code><em class="property"> = 9</em><a class="headerlink" href="#probably.pgcl.ast.Binop.DIVIDE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="probably.pgcl.ast.Binop.is_associative">
<code class="sig-name descname">is_associative</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#Binop.is_associative"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.Binop.is_associative" title="Permalink to this definition">¶</a></dt>
<dd><p>Is this operator associative?</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.ast.BinopExpr">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">BinopExpr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">operator</span></em>, <em class="sig-param"><span class="n">lhs</span></em>, <em class="sig-param"><span class="n">rhs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#BinopExpr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.BinopExpr" title="Permalink to this definition">¶</a></dt>
<dd><p>A binary operator is an expression.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>operator</strong> (<a class="reference internal" href="#probably.pgcl.ast.Binop" title="probably.pgcl.ast.Binop"><code class="xref py py-class docutils literal notranslate"><span class="pre">Binop</span></code></a>) – </p></li>
<li><p><strong>lhs</strong> (<em>Expr</em>) – </p></li>
<li><p><strong>rhs</strong> (<em>Expr</em>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="probably.pgcl.ast.BinopExpr.operator">
<code class="sig-name descname">operator</code><em class="property">: <a class="reference internal" href="#probably.pgcl.ast.Binop" title="probably.pgcl.ast.Binop">probably.pgcl.ast.Binop</a></em><a class="headerlink" href="#probably.pgcl.ast.BinopExpr.operator" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.ast.BinopExpr.lhs">
<code class="sig-name descname">lhs</code><em class="property">: Union<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr">probably.pgcl.ast.VarExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr">probably.pgcl.ast.BoolLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr">probably.pgcl.ast.NatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr">probably.pgcl.ast.FloatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr">probably.pgcl.ast.UnopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr">probably.pgcl.ast.BinopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr">probably.pgcl.ast.UniformExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr">probably.pgcl.ast.CategoricalExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr">probably.pgcl.ast.SubstExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr">probably.pgcl.ast.TickExpr</a><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.ast.BinopExpr.lhs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.ast.BinopExpr.rhs">
<code class="sig-name descname">rhs</code><em class="property">: Union<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr">probably.pgcl.ast.VarExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr">probably.pgcl.ast.BoolLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr">probably.pgcl.ast.NatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr">probably.pgcl.ast.FloatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr">probably.pgcl.ast.UnopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr">probably.pgcl.ast.BinopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr">probably.pgcl.ast.UniformExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr">probably.pgcl.ast.CategoricalExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr">probably.pgcl.ast.SubstExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr">probably.pgcl.ast.TickExpr</a><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.ast.BinopExpr.rhs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="probably.pgcl.ast.BinopExpr.reduce">
<em class="property">static </em><code class="sig-name descname">reduce</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">operator</span></em>, <em class="sig-param"><span class="n">iterable</span></em>, <em class="sig-param"><span class="n">default</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#BinopExpr.reduce"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.BinopExpr.reduce" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds a <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a> using <a class="reference external" href="https://docs.python.org/3/library/functools.html#functools.reduce" title="(in Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.reduce()</span></code></a>.</p>
<p>If the list is empty, <code class="docutils literal notranslate"><span class="pre">default</span></code> is returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#AssertionError" title="(in Python v3.9)"><strong>AssertionError</strong></a> – if list is empty and <code class="docutils literal notranslate"><span class="pre">default</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>operator</strong> (<a class="reference internal" href="#probably.pgcl.ast.Binop" title="probably.pgcl.ast.Binop"><code class="xref py py-class docutils literal notranslate"><span class="pre">Binop</span></code></a>) – </p></li>
<li><p><strong>iterable</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]]) – </p></li>
<li><p><strong>default</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>, <code class="docutils literal notranslate"><span class="pre">None</span></code>]) – </p></li>
</ul>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="probably.pgcl.ast.BinopExpr.flatten">
<code class="sig-name descname">flatten</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#BinopExpr.flatten"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.BinopExpr.flatten" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of all recursive operands of the same operator.
This really only makes sense if the operator is associative (see
<a class="reference internal" href="#probably.pgcl.ast.Binop.is_associative" title="probably.pgcl.ast.Binop.is_associative"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Binop.is_associative()</span></code></a>). Throws an error if the operator is not
associative.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">VarExpr</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">times</span> <span class="o">=</span> <span class="n">BinopExpr</span><span class="p">(</span><span class="n">Binop</span><span class="o">.</span><span class="n">TIMES</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span> <span class="o">=</span> <span class="n">BinopExpr</span><span class="p">(</span><span class="n">Binop</span><span class="o">.</span><span class="n">PLUS</span><span class="p">,</span> <span class="n">BinopExpr</span><span class="p">(</span><span class="n">Binop</span><span class="o">.</span><span class="n">PLUS</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">times</span><span class="p">),</span> <span class="n">x</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
<span class="go">[VarExpr(&#39;x&#39;), BinopExpr(operator=Binop.TIMES, lhs=VarExpr(&#39;x&#39;), rhs=VarExpr(&#39;x&#39;)), VarExpr(&#39;x&#39;)]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.ast.UniformExpr">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">UniformExpr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">start</span></em>, <em class="sig-param"><span class="n">end</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#UniformExpr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.UniformExpr" title="Permalink to this definition">¶</a></dt>
<dd><p>Chooses a random integer within the (inclusive) interval.</p>
<p>As <em>monadic expressions</em> (see <a class="reference internal" href="#expressions"><span class="std std-ref">Expressions</span></a>), uniform choice
expressions are only allowed as the right-hand side of an assignment
statement and not somewhere in a nested expression.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start</strong> (<a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>) – </p></li>
<li><p><strong>end</strong> (<a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="probably.pgcl.ast.UniformExpr.start">
<code class="sig-name descname">start</code><em class="property">: <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr">probably.pgcl.ast.NatLitExpr</a></em><a class="headerlink" href="#probably.pgcl.ast.UniformExpr.start" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.ast.UniformExpr.end">
<code class="sig-name descname">end</code><em class="property">: <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr">probably.pgcl.ast.NatLitExpr</a></em><a class="headerlink" href="#probably.pgcl.ast.UniformExpr.end" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="probably.pgcl.ast.UniformExpr.distribution">
<code class="sig-name descname">distribution</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#UniformExpr.distribution"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.UniformExpr.distribution" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the distribution of possible values as a list along with
probabilities. For the uniform distribution, all probabilites are equal
to <span class="math">\(\frac{1}{\text{end} - \text{start} + 1}\)</span>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>]]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.ast.CategoricalExpr">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">CategoricalExpr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">exprs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#CategoricalExpr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.CategoricalExpr" title="Permalink to this definition">¶</a></dt>
<dd><p>Chooses one of a list of expressions to evaluate, where each expression has
some assigned probability. The sum of probabilities must always be exactly one.</p>
<p>It is represented by a <cite>(expression, probability)</cite> pair.</p>
<p>As <em>monadic expressions</em> (see <a class="reference internal" href="#expressions"><span class="std std-ref">Expressions</span></a>), categorical choice
expressions are only allowed as the right-hand side of an assignment
statement and not somewhere in a nested expression.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>exprs</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>], <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>]]) – </p>
</dd>
</dl>
<dl class="py attribute">
<dt id="probably.pgcl.ast.CategoricalExpr.exprs">
<code class="sig-name descname">exprs</code><em class="property">: List<span class="p">[</span>Tuple<span class="p">[</span>Union<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr">probably.pgcl.ast.VarExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr">probably.pgcl.ast.BoolLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr">probably.pgcl.ast.NatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr">probably.pgcl.ast.FloatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr">probably.pgcl.ast.UnopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr">probably.pgcl.ast.BinopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr">probably.pgcl.ast.UniformExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr">probably.pgcl.ast.CategoricalExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr">probably.pgcl.ast.SubstExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr">probably.pgcl.ast.TickExpr</a><span class="p">]</span><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr">probably.pgcl.ast.FloatLitExpr</a><span class="p">]</span><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.ast.CategoricalExpr.exprs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="probably.pgcl.ast.CategoricalExpr.distribution">
<code class="sig-name descname">distribution</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#CategoricalExpr.distribution"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.CategoricalExpr.distribution" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the distribution of possible values as a list along with
probabilities.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]]]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.ast.SubstExpr">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">SubstExpr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">subst</span></em>, <em class="sig-param"><span class="n">expr</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#SubstExpr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.SubstExpr" title="Permalink to this definition">¶</a></dt>
<dd><p>A substition expression that applies a mapping from variables to expressions
to the target expression.</p>
<p>An important invariant is that all substitutions must be well-typed, i.e.
assign expressions to variables of the same type. Thus the expression with
the substitutions applied has the same type as the expression before.</p>
<p>It is not available in the pGCL program language, but can be generated by
program transformations to represent expectations, such as the weakest
preexpectation of a program (see <a class="reference internal" href="#module-probably.pgcl.wp" title="probably.pgcl.wp"><code class="xref py py-mod docutils literal notranslate"><span class="pre">probably.pgcl.wp</span></code></a>).</p>
<p>Substitutions can be applied using the <a class="reference internal" href="#module-probably.pgcl.substitute" title="probably.pgcl.substitute"><code class="xref py py-mod docutils literal notranslate"><span class="pre">probably.pgcl.substitute</span></code></a>
module.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subst</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.ForwardRef" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForwardRef</span></code></a>]) – </p></li>
<li><p><strong>expr</strong> (<em>Expr</em>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="probably.pgcl.ast.SubstExpr.subst">
<code class="sig-name descname">subst</code><em class="property">: Dict<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">, </span>Union<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr">probably.pgcl.ast.VarExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr">probably.pgcl.ast.BoolLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr">probably.pgcl.ast.NatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr">probably.pgcl.ast.FloatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr">probably.pgcl.ast.UnopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr">probably.pgcl.ast.BinopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr">probably.pgcl.ast.UniformExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr">probably.pgcl.ast.CategoricalExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr">probably.pgcl.ast.SubstExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr">probably.pgcl.ast.TickExpr</a><span class="p">]</span><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.ast.SubstExpr.subst" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.ast.SubstExpr.expr">
<code class="sig-name descname">expr</code><em class="property">: Union<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr">probably.pgcl.ast.VarExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr">probably.pgcl.ast.BoolLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr">probably.pgcl.ast.NatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr">probably.pgcl.ast.FloatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr">probably.pgcl.ast.UnopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr">probably.pgcl.ast.BinopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr">probably.pgcl.ast.UniformExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr">probably.pgcl.ast.CategoricalExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr">probably.pgcl.ast.SubstExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr">probably.pgcl.ast.TickExpr</a><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.ast.SubstExpr.expr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.ast.TickExpr">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">TickExpr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">expr</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#TickExpr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.TickExpr" title="Permalink to this definition">¶</a></dt>
<dd><p>Generated only by the weakest pre-expectation semantics of
<a class="reference internal" href="#probably.pgcl.ast.TickInstr" title="probably.pgcl.ast.TickInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>expr</strong> (<em>Expr</em>) – </p>
</dd>
</dl>
<dl class="py attribute">
<dt id="probably.pgcl.ast.TickExpr.expr">
<code class="sig-name descname">expr</code><em class="property">: Union<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr">probably.pgcl.ast.VarExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr">probably.pgcl.ast.BoolLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr">probably.pgcl.ast.NatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr">probably.pgcl.ast.FloatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr">probably.pgcl.ast.UnopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr">probably.pgcl.ast.BinopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr">probably.pgcl.ast.UniformExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr">probably.pgcl.ast.CategoricalExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr">probably.pgcl.ast.SubstExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr">probably.pgcl.ast.TickExpr</a><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.ast.TickExpr.expr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="probably.pgcl.ast.TickExpr.is_zero">
<code class="sig-name descname">is_zero</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#TickExpr.is_zero"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.TickExpr.is_zero" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether this expression represents exactly zero ticks.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="instructions">
<h3>Instructions<a class="headerlink" href="#instructions" title="Permalink to this headline">¶</a></h3>
<dl class="py data">
<dt id="probably.pgcl.ast.Instr">
<code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">Instr</code><em class="property"> = typing.Union[probably.pgcl.ast.SkipInstr, probably.pgcl.ast.WhileInstr, probably.pgcl.ast.IfInstr, probably.pgcl.ast.AsgnInstr, probably.pgcl.ast.ChoiceInstr, probably.pgcl.ast.TickInstr]</em><a class="headerlink" href="#probably.pgcl.ast.Instr" title="Permalink to this definition">¶</a></dt>
<dd><p>Union type for all instruction objects. See <a class="reference internal" href="#probably.pgcl.ast.InstrClass" title="probably.pgcl.ast.InstrClass"><code class="xref py py-class docutils literal notranslate"><span class="pre">InstrClass</span></code></a> for use with isinstance.</p>
</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.ast.SkipInstr">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">SkipInstr</code><a class="reference internal" href="_modules/probably/pgcl/ast.html#SkipInstr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.SkipInstr" title="Permalink to this definition">¶</a></dt>
<dd><p>The skip instruction does nothing.</p>
</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.ast.WhileInstr">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">WhileInstr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cond</span></em>, <em class="sig-param"><span class="n">body</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#WhileInstr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.WhileInstr" title="Permalink to this definition">¶</a></dt>
<dd><p>A while loop with a condition and a body.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cond</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]) – </p></li>
<li><p><strong>body</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.SkipInstr" title="probably.pgcl.ast.SkipInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.WhileInstr" title="probably.pgcl.ast.WhileInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.IfInstr" title="probably.pgcl.ast.IfInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.AsgnInstr" title="probably.pgcl.ast.AsgnInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.ChoiceInstr" title="probably.pgcl.ast.ChoiceInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickInstr" title="probably.pgcl.ast.TickInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code></a>]]) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="probably.pgcl.ast.WhileInstr.cond">
<code class="sig-name descname">cond</code><em class="property">: Union<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr">probably.pgcl.ast.VarExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr">probably.pgcl.ast.BoolLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr">probably.pgcl.ast.NatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr">probably.pgcl.ast.FloatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr">probably.pgcl.ast.UnopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr">probably.pgcl.ast.BinopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr">probably.pgcl.ast.UniformExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr">probably.pgcl.ast.CategoricalExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr">probably.pgcl.ast.SubstExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr">probably.pgcl.ast.TickExpr</a><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.ast.WhileInstr.cond" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.ast.WhileInstr.body">
<code class="sig-name descname">body</code><em class="property">: List<span class="p">[</span>Union<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.SkipInstr" title="probably.pgcl.ast.SkipInstr">probably.pgcl.ast.SkipInstr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.WhileInstr" title="probably.pgcl.ast.WhileInstr">probably.pgcl.ast.WhileInstr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.IfInstr" title="probably.pgcl.ast.IfInstr">probably.pgcl.ast.IfInstr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.AsgnInstr" title="probably.pgcl.ast.AsgnInstr">probably.pgcl.ast.AsgnInstr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.ChoiceInstr" title="probably.pgcl.ast.ChoiceInstr">probably.pgcl.ast.ChoiceInstr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.TickInstr" title="probably.pgcl.ast.TickInstr">probably.pgcl.ast.TickInstr</a><span class="p">]</span><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.ast.WhileInstr.body" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.ast.IfInstr">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">IfInstr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cond</span></em>, <em class="sig-param"><span class="n">true</span></em>, <em class="sig-param"><span class="n">false</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#IfInstr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.IfInstr" title="Permalink to this definition">¶</a></dt>
<dd><p>A conditional expression with two branches.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cond</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]) – </p></li>
<li><p><strong>true</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.SkipInstr" title="probably.pgcl.ast.SkipInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.WhileInstr" title="probably.pgcl.ast.WhileInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.IfInstr" title="probably.pgcl.ast.IfInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.AsgnInstr" title="probably.pgcl.ast.AsgnInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.ChoiceInstr" title="probably.pgcl.ast.ChoiceInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickInstr" title="probably.pgcl.ast.TickInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code></a>]]) – </p></li>
<li><p><strong>false</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.SkipInstr" title="probably.pgcl.ast.SkipInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.WhileInstr" title="probably.pgcl.ast.WhileInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.IfInstr" title="probably.pgcl.ast.IfInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.AsgnInstr" title="probably.pgcl.ast.AsgnInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.ChoiceInstr" title="probably.pgcl.ast.ChoiceInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickInstr" title="probably.pgcl.ast.TickInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code></a>]]) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="probably.pgcl.ast.IfInstr.cond">
<code class="sig-name descname">cond</code><em class="property">: Union<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr">probably.pgcl.ast.VarExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr">probably.pgcl.ast.BoolLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr">probably.pgcl.ast.NatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr">probably.pgcl.ast.FloatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr">probably.pgcl.ast.UnopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr">probably.pgcl.ast.BinopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr">probably.pgcl.ast.UniformExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr">probably.pgcl.ast.CategoricalExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr">probably.pgcl.ast.SubstExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr">probably.pgcl.ast.TickExpr</a><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.ast.IfInstr.cond" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.ast.IfInstr.true">
<code class="sig-name descname">true</code><em class="property">: List<span class="p">[</span>Union<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.SkipInstr" title="probably.pgcl.ast.SkipInstr">probably.pgcl.ast.SkipInstr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.WhileInstr" title="probably.pgcl.ast.WhileInstr">probably.pgcl.ast.WhileInstr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.IfInstr" title="probably.pgcl.ast.IfInstr">probably.pgcl.ast.IfInstr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.AsgnInstr" title="probably.pgcl.ast.AsgnInstr">probably.pgcl.ast.AsgnInstr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.ChoiceInstr" title="probably.pgcl.ast.ChoiceInstr">probably.pgcl.ast.ChoiceInstr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.TickInstr" title="probably.pgcl.ast.TickInstr">probably.pgcl.ast.TickInstr</a><span class="p">]</span><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.ast.IfInstr.true" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.ast.IfInstr.false">
<code class="sig-name descname">false</code><em class="property">: List<span class="p">[</span>Union<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.SkipInstr" title="probably.pgcl.ast.SkipInstr">probably.pgcl.ast.SkipInstr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.WhileInstr" title="probably.pgcl.ast.WhileInstr">probably.pgcl.ast.WhileInstr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.IfInstr" title="probably.pgcl.ast.IfInstr">probably.pgcl.ast.IfInstr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.AsgnInstr" title="probably.pgcl.ast.AsgnInstr">probably.pgcl.ast.AsgnInstr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.ChoiceInstr" title="probably.pgcl.ast.ChoiceInstr">probably.pgcl.ast.ChoiceInstr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.TickInstr" title="probably.pgcl.ast.TickInstr">probably.pgcl.ast.TickInstr</a><span class="p">]</span><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.ast.IfInstr.false" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.ast.AsgnInstr">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">AsgnInstr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">lhs</span></em>, <em class="sig-param"><span class="n">rhs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#AsgnInstr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.AsgnInstr" title="Permalink to this definition">¶</a></dt>
<dd><p>An assignment instruction with a left- and right-hand side.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lhs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>rhs</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="probably.pgcl.ast.AsgnInstr.lhs">
<code class="sig-name descname">lhs</code><em class="property">: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></em><a class="headerlink" href="#probably.pgcl.ast.AsgnInstr.lhs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.ast.AsgnInstr.rhs">
<code class="sig-name descname">rhs</code><em class="property">: Union<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr">probably.pgcl.ast.VarExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr">probably.pgcl.ast.BoolLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr">probably.pgcl.ast.NatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr">probably.pgcl.ast.FloatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr">probably.pgcl.ast.UnopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr">probably.pgcl.ast.BinopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr">probably.pgcl.ast.UniformExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr">probably.pgcl.ast.CategoricalExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr">probably.pgcl.ast.SubstExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr">probably.pgcl.ast.TickExpr</a><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.ast.AsgnInstr.rhs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.ast.ChoiceInstr">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">ChoiceInstr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">prob</span></em>, <em class="sig-param"><span class="n">lhs</span></em>, <em class="sig-param"><span class="n">rhs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#ChoiceInstr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.ChoiceInstr" title="Permalink to this definition">¶</a></dt>
<dd><p>A probabilistic choice instruction with a probability expression and two branches.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prob</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]) – </p></li>
<li><p><strong>lhs</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.SkipInstr" title="probably.pgcl.ast.SkipInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.WhileInstr" title="probably.pgcl.ast.WhileInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.IfInstr" title="probably.pgcl.ast.IfInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.AsgnInstr" title="probably.pgcl.ast.AsgnInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.ChoiceInstr" title="probably.pgcl.ast.ChoiceInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickInstr" title="probably.pgcl.ast.TickInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code></a>]]) – </p></li>
<li><p><strong>rhs</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.SkipInstr" title="probably.pgcl.ast.SkipInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.WhileInstr" title="probably.pgcl.ast.WhileInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.IfInstr" title="probably.pgcl.ast.IfInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.AsgnInstr" title="probably.pgcl.ast.AsgnInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.ChoiceInstr" title="probably.pgcl.ast.ChoiceInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickInstr" title="probably.pgcl.ast.TickInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code></a>]]) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="probably.pgcl.ast.ChoiceInstr.prob">
<code class="sig-name descname">prob</code><em class="property">: Union<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr">probably.pgcl.ast.VarExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr">probably.pgcl.ast.BoolLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr">probably.pgcl.ast.NatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr">probably.pgcl.ast.FloatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr">probably.pgcl.ast.UnopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr">probably.pgcl.ast.BinopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr">probably.pgcl.ast.UniformExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr">probably.pgcl.ast.CategoricalExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr">probably.pgcl.ast.SubstExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr">probably.pgcl.ast.TickExpr</a><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.ast.ChoiceInstr.prob" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.ast.ChoiceInstr.lhs">
<code class="sig-name descname">lhs</code><em class="property">: List<span class="p">[</span>Union<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.SkipInstr" title="probably.pgcl.ast.SkipInstr">probably.pgcl.ast.SkipInstr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.WhileInstr" title="probably.pgcl.ast.WhileInstr">probably.pgcl.ast.WhileInstr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.IfInstr" title="probably.pgcl.ast.IfInstr">probably.pgcl.ast.IfInstr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.AsgnInstr" title="probably.pgcl.ast.AsgnInstr">probably.pgcl.ast.AsgnInstr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.ChoiceInstr" title="probably.pgcl.ast.ChoiceInstr">probably.pgcl.ast.ChoiceInstr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.TickInstr" title="probably.pgcl.ast.TickInstr">probably.pgcl.ast.TickInstr</a><span class="p">]</span><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.ast.ChoiceInstr.lhs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.ast.ChoiceInstr.rhs">
<code class="sig-name descname">rhs</code><em class="property">: List<span class="p">[</span>Union<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.SkipInstr" title="probably.pgcl.ast.SkipInstr">probably.pgcl.ast.SkipInstr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.WhileInstr" title="probably.pgcl.ast.WhileInstr">probably.pgcl.ast.WhileInstr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.IfInstr" title="probably.pgcl.ast.IfInstr">probably.pgcl.ast.IfInstr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.AsgnInstr" title="probably.pgcl.ast.AsgnInstr">probably.pgcl.ast.AsgnInstr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.ChoiceInstr" title="probably.pgcl.ast.ChoiceInstr">probably.pgcl.ast.ChoiceInstr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.TickInstr" title="probably.pgcl.ast.TickInstr">probably.pgcl.ast.TickInstr</a><span class="p">]</span><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.ast.ChoiceInstr.rhs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.ast.TickInstr">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">TickInstr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">expr</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#TickInstr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.TickInstr" title="Permalink to this definition">¶</a></dt>
<dd><p>An instruction that does not modify the program state, but only increases
the runtime by the value of the expression in the current state. Its only
use is its translation to <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a> by weakest pre-expectations.</p>
<p>The type of <code class="docutils literal notranslate"><span class="pre">expr</span></code> must be <a class="reference internal" href="#probably.pgcl.ast.NatType" title="probably.pgcl.ast.NatType"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatType</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>expr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]) – </p>
</dd>
</dl>
<dl class="py attribute">
<dt id="probably.pgcl.ast.TickInstr.expr">
<code class="sig-name descname">expr</code><em class="property">: Union<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr">probably.pgcl.ast.VarExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr">probably.pgcl.ast.BoolLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr">probably.pgcl.ast.NatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr">probably.pgcl.ast.FloatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr">probably.pgcl.ast.UnopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr">probably.pgcl.ast.BinopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr">probably.pgcl.ast.UniformExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr">probably.pgcl.ast.CategoricalExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr">probably.pgcl.ast.SubstExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr">probably.pgcl.ast.TickExpr</a><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.ast.TickInstr.expr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="superclasses">
<h3>Superclasses<a class="headerlink" href="#superclasses" title="Permalink to this headline">¶</a></h3>
<p>These are only used for use with isinstance.
Otherwise use corresponding Union types instead.</p>
<dl class="py class">
<dt id="probably.pgcl.ast.TypeClass">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">TypeClass</code><a class="reference internal" href="_modules/probably/pgcl/ast.html#TypeClass"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.TypeClass" title="Permalink to this definition">¶</a></dt>
<dd><p>Superclass for all types. See <a class="reference internal" href="#probably.pgcl.ast.Type" title="probably.pgcl.ast.Type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Type</span></code></a>.</p>
</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.ast.DeclClass">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">DeclClass</code><a class="reference internal" href="_modules/probably/pgcl/ast.html#DeclClass"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.DeclClass" title="Permalink to this definition">¶</a></dt>
<dd><p>Superclass for all declarations. See <a class="reference internal" href="#probably.pgcl.ast.Decl" title="probably.pgcl.ast.Decl"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Decl</span></code></a>.</p>
<dl class="py method">
<dt id="probably.pgcl.ast.DeclClass.__str__">
<em class="property">abstract </em><code class="sig-name descname">__str__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#DeclClass.__str__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.DeclClass.__str__" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert this declaration to corresponding source code in pGCL.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">VarDecl</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">NatType</span><span class="p">(</span><span class="n">Bounds</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">))))</span>
<span class="go">&#39;nat x [1, 10];&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.ast.ExprClass">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">ExprClass</code><a class="reference internal" href="_modules/probably/pgcl/ast.html#ExprClass"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.ExprClass" title="Permalink to this definition">¶</a></dt>
<dd><p>Superclass for all expressions.
See <a class="reference internal" href="#probably.pgcl.ast.Expr" title="probably.pgcl.ast.Expr"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Expr</span></code></a>.</p>
<p>All expressions can be transformed into human-readable strings using the <cite>str</cite> operator.</p>
<dl class="py method">
<dt id="probably.pgcl.ast.ExprClass.__str__">
<em class="property">abstract </em><code class="sig-name descname">__str__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#ExprClass.__str__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.ExprClass.__str__" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert this expression to corresponding source code in pGCL.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">.parser</span> <span class="kn">import</span> <span class="n">parse_expr</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">parse_expr</span><span class="p">(</span><span class="s2">&quot;x &lt; 2 &amp; not true&quot;</span><span class="p">))</span>
<span class="go">&#39;(x &lt; 2) &amp; not true&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="probably.pgcl.ast.ExprClass.cast">
<code class="sig-name descname">cast</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#ExprClass.cast"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.ExprClass.cast" title="Permalink to this definition">¶</a></dt>
<dd><p>Cast to Expr. This is sometimes necessary to satisfy the type checker.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.ast.InstrClass">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">InstrClass</code><a class="reference internal" href="_modules/probably/pgcl/ast.html#InstrClass"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.InstrClass" title="Permalink to this definition">¶</a></dt>
<dd><p>Superclass for all instructions. See <a class="reference internal" href="#probably.pgcl.ast.Instr" title="probably.pgcl.ast.Instr"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Instr</span></code></a>.</p>
<dl class="py method">
<dt id="probably.pgcl.ast.InstrClass.__str__">
<em class="property">abstract </em><code class="sig-name descname">__str__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#InstrClass.__str__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.InstrClass.__str__" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert this instruction to corresponding source code in pGCL.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">SkipInstr</span><span class="p">())</span>
<span class="go">skip;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">WhileInstr</span><span class="p">(</span><span class="n">BoolLitExpr</span><span class="p">(</span><span class="kc">True</span><span class="p">),</span> <span class="p">[</span><span class="n">SkipInstr</span><span class="p">()]))</span>
<span class="go">while (true) {</span>
<span class="go">    skip;</span>
<span class="go">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">IfInstr</span><span class="p">(</span><span class="n">BoolLitExpr</span><span class="p">(</span><span class="kc">False</span><span class="p">),</span> <span class="p">[</span><span class="n">SkipInstr</span><span class="p">()],</span> <span class="p">[]))</span>
<span class="go">if (false) {</span>
<span class="go">    skip;</span>
<span class="go">}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="probably.pgcl.ast.InstrClass.cast">
<code class="sig-name descname">cast</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/ast.html#InstrClass.cast"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.InstrClass.cast" title="Permalink to this definition">¶</a></dt>
<dd><p>Cast to Instr. This is sometimes necessary to satisfy the type checker.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.SkipInstr" title="probably.pgcl.ast.SkipInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.WhileInstr" title="probably.pgcl.ast.WhileInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.IfInstr" title="probably.pgcl.ast.IfInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.AsgnInstr" title="probably.pgcl.ast.AsgnInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.ChoiceInstr" title="probably.pgcl.ast.ChoiceInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickInstr" title="probably.pgcl.ast.TickInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.ast.Node">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.ast.</code><code class="sig-name descname">Node</code><a class="reference internal" href="_modules/probably/pgcl/ast.html#Node"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.ast.Node" title="Permalink to this definition">¶</a></dt>
<dd><p>Superclass for all node types in the AST.</p>
</dd></dl>

</div>
</div>
<span class="target" id="module-probably.pgcl.wp"></span><div class="section" id="weakest-pre-expectations">
<h2>Weakest Pre-Expectations<a class="headerlink" href="#weakest-pre-expectations" title="Permalink to this headline">¶</a></h2>
<p>Want to calculate the weakest pre-expectation of a program?
You’re in the right module! You can read all about weakest pre-expectations of
probabilistic programs in <a class="reference internal" href="#kam19" id="id2"><span>[kam19]</span></a>.</p>
<p>The basic function is <a class="reference internal" href="#probably.pgcl.wp.loopfree_wp" title="probably.pgcl.wp.loopfree_wp"><code class="xref py py-func docutils literal notranslate"><span class="pre">loopfree_wp()</span></code></a>. It calculates weakest
pre-expectations of loop-free programs. <code class="xref py py-func docutils literal notranslate"><span class="pre">one_loop_wp()</span></code> can calculate
weakest pre-expectations of programs that consist of exactly one loop (see
<a class="reference internal" href="#one-big-loop"><span class="std std-ref">One Big Loop</span></a>). <code class="xref py py-func docutils literal notranslate"><span class="pre">general_wp()</span></code> is applicable to all pGCL programs, but
can produce extraordinarily ugly outputs.</p>
<p class="rubric">Expected Runtimes</p>
<p>All functions also support computation of <em>expected runtimes</em> (see chapter 7 of
<a class="reference internal" href="#kam19" id="id3"><span>[kam19]</span></a>), which are given by <a class="reference internal" href="#probably.pgcl.ast.TickInstr" title="probably.pgcl.ast.TickInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">probably.pgcl.ast.TickInstr</span></code></a> and
represented in the computed expectations as a
<a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">probably.pgcl.ast.TickExpr</span></code></a>.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">.parser</span> <span class="kn">import</span> <span class="n">parse_pgcl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;x := 5; tick(5)&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transformer</span> <span class="o">=</span> <span class="n">loopfree_wp_transformer</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">transformer</span><span class="p">)</span>
<span class="go">λ𝑋. ((𝑋)[x/5]) + (tick(5))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transformer</span>
<span class="go">ExpectationTransformer(variable=&#39;𝑋&#39;, expectation=BinopExpr(operator=Binop.PLUS, lhs=SubstExpr(subst={&#39;x&#39;: NatLitExpr(5)}, expr=VarExpr(&#39;𝑋&#39;)), rhs=TickExpr(expr=NatLitExpr(5))))</span>
</pre></div>
</div>
<p>It is always possible to represent expected runtimes in such a way.
Theorem 7.11 of <a class="reference internal" href="#kam19" id="id4"><span>[kam19]</span></a> (page 173):</p>
<div class="math">
\[\mathrm{ert}\llbracket{}C\rrbracket(t) = \mathrm{ert}\llbracket{}C\rrbracket(0) + \mathrm{wp}\llbracket{}C\rrbracket{}(t)\]</div>
<p>Therefore the weakest pre-expectation of a program with <code class="docutils literal notranslate"><span class="pre">tick</span></code> instructions
can be obtained by simply ignoring all <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">probably.pgcl.ast.TickExpr</span></code></a> in
the returned expectation, i.e. replacing them all by zero.</p>
<dl class="citation">
<dt class="label" id="kam19"><span class="brackets">kam19</span><span class="fn-backref">(<a href="#id2">1</a>,<a href="#id3">2</a>,<a href="#id4">3</a>)</span></dt>
<dd><p><a class="reference external" href="https://publications.rwth-aachen.de/record/755408/files/755408.pdf">Advanced Weakest Precondition Calculi for Probabilistic Programs</a>, Benjamin Kaminski, 2019.</p>
</dd>
</dl>
<div class="section" id="loop-free">
<h3>Loop-Free<a class="headerlink" href="#loop-free" title="Permalink to this headline">¶</a></h3>
<p>The definition of loop-free weakest pre-expectations (and expected runtimes) is
rather straightforward.</p>
<dl class="py function">
<dt id="probably.pgcl.wp.loopfree_wp">
<code class="sig-prename descclassname">probably.pgcl.wp.</code><code class="sig-name descname">loopfree_wp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">instr</span></em>, <em class="sig-param"><span class="n">postexpectation</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/wp.html#loopfree_wp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.wp.loopfree_wp" title="Permalink to this definition">¶</a></dt>
<dd><p>Build the weakest preexpectation as an expression. See also
<a class="reference internal" href="#probably.pgcl.wp.loopfree_wp_transformer" title="probably.pgcl.wp.loopfree_wp_transformer"><code class="xref py py-func docutils literal notranslate"><span class="pre">loopfree_wp_transformer()</span></code></a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Loops are not supported by this function.</p>
</div>
<div class="admonition-todo admonition" id="id5">
<p class="admonition-title">Todo</p>
<p>At the moment, the returned expression is a tree and not a DAG.
Subexpressions that occur multiple times are <em>deepcopied</em>, even though that
is not strictly necessary. For example, <code class="docutils literal notranslate"><span class="pre">jump</span> <span class="pre">:=</span> <span class="pre">unif(0,1);</span> <span class="pre">t</span> <span class="pre">:=</span> <span class="pre">t</span> <span class="pre">+</span> <span class="pre">1</span></code>
creates an AST where the second assignment occurs twice, as different Python objects,
even though the two substitutions generated by the <em>uniform</em> expression could reuse it.
We do this because the <a class="reference internal" href="#module-probably.pgcl.substitute" title="probably.pgcl.substitute"><code class="xref py py-mod docutils literal notranslate"><span class="pre">probably.pgcl.substitute</span></code></a> module cannot yet handle non-tree ASTs.</p>
</div>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">.parser</span> <span class="kn">import</span> <span class="n">parse_pgcl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">.ast</span> <span class="kn">import</span> <span class="n">FloatLitExpr</span><span class="p">,</span> <span class="n">VarExpr</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;bool a; bool x; if (a) { x := 1 } </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">loopfree_wp</span><span class="p">(</span><span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">,</span> <span class="n">FloatLitExpr</span><span class="p">(</span><span class="s2">&quot;1.0&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="go">&#39;([a] * ((1.0)[x/1])) + ([not a] * 1.0)&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;bool a; bool x; if (a) { { x := 1 } [0.5] {x := 2 } } </span><span class="si">{}</span><span class="s2"> x := x + 1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">loopfree_wp</span><span class="p">(</span><span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">,</span> <span class="n">VarExpr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="go">&#39;([a] * (((((x)[x/x + 1])[x/1]) * 0.5) + ((((x)[x/x + 1])[x/2]) * (1.0 - 0.5)))) + ([not a] * ((x)[x/x + 1]))&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;nat x; x := unif(1, 4)&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">loopfree_wp</span><span class="p">(</span><span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">,</span> <span class="n">VarExpr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="go">&#39;(((1/4 * ((x)[x/1])) + (1/4 * ((x)[x/2]))) + (1/4 * ((x)[x/3]))) + (1/4 * ((x)[x/4]))&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;bool x; x := true : 0.5 + false : 0.5;&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">loopfree_wp</span><span class="p">(</span><span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">,</span> <span class="n">VarExpr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="go">&#39;(0.5 * ((x)[x/true])) + (0.5 * ((x)[x/false]))&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>instr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.SkipInstr" title="probably.pgcl.ast.SkipInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.WhileInstr" title="probably.pgcl.ast.WhileInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.IfInstr" title="probably.pgcl.ast.IfInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.AsgnInstr" title="probably.pgcl.ast.AsgnInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.ChoiceInstr" title="probably.pgcl.ast.ChoiceInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickInstr" title="probably.pgcl.ast.TickInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.SkipInstr" title="probably.pgcl.ast.SkipInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.WhileInstr" title="probably.pgcl.ast.WhileInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.IfInstr" title="probably.pgcl.ast.IfInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.AsgnInstr" title="probably.pgcl.ast.AsgnInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.ChoiceInstr" title="probably.pgcl.ast.ChoiceInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickInstr" title="probably.pgcl.ast.TickInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code></a>]]]) – The instruction to calculate the wp for, or a list of instructions.</p></li>
<li><p><strong>postexpectation</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]) – The postexpectation.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="transformers">
<h3>Transformers<a class="headerlink" href="#transformers" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="probably.pgcl.wp.ExpectationTransformer">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.wp.</code><code class="sig-name descname">ExpectationTransformer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">variable</span></em>, <em class="sig-param"><span class="n">expectation</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/wp.html#ExpectationTransformer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.wp.ExpectationTransformer" title="Permalink to this definition">¶</a></dt>
<dd><p>Wraps an expectation <span class="math">\(f\)</span> (represented by
<a class="reference internal" href="#probably.pgcl.ast.Expr" title="probably.pgcl.ast.Expr"><code class="xref py py-class docutils literal notranslate"><span class="pre">probably.pgcl.ast.Expr</span></code></a>) and holds a reference to a variable
<span class="math">\(v\)</span>. Together they represent an <em>expectation transformer</em>, a function
<span class="math">\(\Phi : \mathbb{E} \to \mathbb{E}\)</span> mapping expectations to
expectations.</p>
<p>An expectation is applied (<span class="math">\(\Phi(g)\)</span>) by replacing <span class="math">\(f\)</span> by
<span class="math">\(g\)</span>.</p>
<p>The <a class="reference internal" href="#module-probably.pgcl.simplify" title="probably.pgcl.simplify"><code class="xref py py-mod docutils literal notranslate"><span class="pre">probably.pgcl.simplify</span></code></a> module can translate expectation
transformers into <em>summation normal form</em>. See
<a class="reference internal" href="#probably.pgcl.simplify.SnfExpectationTransformer" title="probably.pgcl.simplify.SnfExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">probably.pgcl.simplify.SnfExpectationTransformer</span></code></a> and
<a class="reference internal" href="#probably.pgcl.simplify.normalize_expectation_transformer" title="probably.pgcl.simplify.normalize_expectation_transformer"><code class="xref py py-func docutils literal notranslate"><span class="pre">probably.pgcl.simplify.normalize_expectation_transformer()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>variable</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>expectation</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="probably.pgcl.wp.ExpectationTransformer.variable">
<code class="sig-name descname">variable</code><em class="property">: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></em><a class="headerlink" href="#probably.pgcl.wp.ExpectationTransformer.variable" title="Permalink to this definition">¶</a></dt>
<dd><p>The variable occuring in <a class="reference internal" href="#probably.pgcl.wp.ExpectationTransformer.expectation" title="probably.pgcl.wp.ExpectationTransformer.expectation"><code class="xref py py-data docutils literal notranslate"><span class="pre">expectation</span></code></a>. Must not occur in the
program.</p>
</dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.wp.ExpectationTransformer.expectation">
<code class="sig-name descname">expectation</code><em class="property">: Union<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr">probably.pgcl.ast.VarExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr">probably.pgcl.ast.BoolLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr">probably.pgcl.ast.NatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr">probably.pgcl.ast.FloatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr">probably.pgcl.ast.UnopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr">probably.pgcl.ast.BinopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr">probably.pgcl.ast.UniformExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr">probably.pgcl.ast.CategoricalExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr">probably.pgcl.ast.SubstExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr">probably.pgcl.ast.TickExpr</a><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.wp.ExpectationTransformer.expectation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="probably.pgcl.wp.ExpectationTransformer.substitute">
<code class="sig-name descname">substitute</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/wp.html#ExpectationTransformer.substitute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.wp.ExpectationTransformer.substitute" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply all <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">probably.pgcl.ast.SubstExpr</span></code></a> using
<a class="reference internal" href="#probably.pgcl.substitute.substitute_expr" title="probably.pgcl.substitute.substitute_expr"><code class="xref py py-func docutils literal notranslate"><span class="pre">probably.pgcl.substitute.substitute_expr()</span></code></a>, keeping
<a class="reference internal" href="#probably.pgcl.wp.ExpectationTransformer.variable" title="probably.pgcl.wp.ExpectationTransformer.variable"><code class="xref py py-data docutils literal notranslate"><span class="pre">variable</span></code></a> symbolic.</p>
<p>Returns <code class="docutils literal notranslate"><span class="pre">self</span></code> for convenience.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#probably.pgcl.wp.ExpectationTransformer" title="probably.pgcl.wp.ExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationTransformer</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="probably.pgcl.wp.ExpectationTransformer.apply">
<code class="sig-name descname">apply</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">expectation</span></em>, <em class="sig-param"><span class="n">substitute</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/wp.html#ExpectationTransformer.apply"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.wp.ExpectationTransformer.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Transform the given expectation with this expectation transformer.</p>
<p>The result is the modified internal expression with the variable
replaced by the post-expectation, i.e. <code class="docutils literal notranslate"><span class="pre">self.expectation</span></code>.</p>
<p><strong>Calling this method will change this object!</strong></p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">.parser</span> <span class="kn">import</span> <span class="n">parse_pgcl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;x := 3&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wp</span> <span class="o">=</span> <span class="n">loopfree_wp_transformer</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">wp</span><span class="p">)</span>
<span class="go">λ𝑋. (𝑋)[x/3]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">wp</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">VarExpr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">)))</span>
<span class="go">3</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>substitute</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – Whether to apply all remaining substitutions in the expectation.</p></li>
<li><p><strong>expectation</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="probably.pgcl.wp.loopfree_wp_transformer">
<code class="sig-prename descclassname">probably.pgcl.wp.</code><code class="sig-name descname">loopfree_wp_transformer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">program</span></em>, <em class="sig-param"><span class="n">instr</span></em>, <em class="sig-param"><span class="n">variable</span><span class="o">=</span><span class="default_value">'𝑋'</span></em>, <em class="sig-param"><span class="n">substitute</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/wp.html#loopfree_wp_transformer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.wp.loopfree_wp_transformer" title="Permalink to this definition">¶</a></dt>
<dd><p>Generalized version of <a class="reference internal" href="#probably.pgcl.wp.loopfree_wp" title="probably.pgcl.wp.loopfree_wp"><code class="xref py py-func docutils literal notranslate"><span class="pre">loopfree_wp()</span></code></a> that returns an
<a class="reference internal" href="#probably.pgcl.wp.ExpectationTransformer" title="probably.pgcl.wp.ExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationTransformer</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>variable</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Optional name for the variable to be used for the transformer. Must not occur elsewhere in the program.</p></li>
<li><p><strong>substitute</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – Whether to call <a class="reference internal" href="#probably.pgcl.wp.ExpectationTransformer.substitute" title="probably.pgcl.wp.ExpectationTransformer.substitute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExpectationTransformer.substitute()</span></code></a> on the <code class="docutils literal notranslate"><span class="pre">body</span></code>.</p></li>
<li><p><strong>program</strong> (<a class="reference internal" href="#probably.pgcl.ast.Program" title="probably.pgcl.ast.Program"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – </p></li>
<li><p><strong>instr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.SkipInstr" title="probably.pgcl.ast.SkipInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.WhileInstr" title="probably.pgcl.ast.WhileInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.IfInstr" title="probably.pgcl.ast.IfInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.AsgnInstr" title="probably.pgcl.ast.AsgnInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.ChoiceInstr" title="probably.pgcl.ast.ChoiceInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickInstr" title="probably.pgcl.ast.TickInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.SkipInstr" title="probably.pgcl.ast.SkipInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.WhileInstr" title="probably.pgcl.ast.WhileInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.IfInstr" title="probably.pgcl.ast.IfInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.AsgnInstr" title="probably.pgcl.ast.AsgnInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.ChoiceInstr" title="probably.pgcl.ast.ChoiceInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickInstr" title="probably.pgcl.ast.TickInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code></a>]]]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#probably.pgcl.wp.ExpectationTransformer" title="probably.pgcl.wp.ExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationTransformer</span></code></a></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="loops">
<h3>Loops<a class="headerlink" href="#loops" title="Permalink to this headline">¶</a></h3>
<p>The <span class="math">\(\mathrm{wp}\)</span> semantics of loops require a least fixed-point. It is
undecidable to compute. We do not represent least-fixed points explicitely in
our AST (see <a class="reference internal" href="#module-probably.pgcl.ast" title="probably.pgcl.ast"><code class="xref py py-mod docutils literal notranslate"><span class="pre">probably.pgcl.ast</span></code></a>), but instead represent the weakest
pre-expectation transformer of a <strong>single loop</strong> (without any more nested loops)
with optional initialization by a special <a class="reference internal" href="#probably.pgcl.wp.LoopExpectationTransformer" title="probably.pgcl.wp.LoopExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">LoopExpectationTransformer</span></code></a>.
For such programs with exactly one loop, <code class="xref py py-func docutils literal notranslate"><span class="pre">one_loop_wp()</span></code> can calculate the
<a class="reference internal" href="#probably.pgcl.wp.LoopExpectationTransformer" title="probably.pgcl.wp.LoopExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">LoopExpectationTransformer</span></code></a>.</p>
<p>The function <code class="xref py py-func docutils literal notranslate"><span class="pre">general_wp()</span></code> is applicable to <strong>all</strong> pGCL programs. It uses
<a class="reference internal" href="#probably.pgcl.cfg.program_one_big_loop" title="probably.pgcl.cfg.program_one_big_loop"><code class="xref py py-func docutils literal notranslate"><span class="pre">probably.pgcl.cfg.program_one_big_loop()</span></code></a> to transform arbitrarily structured
programs into programs with one loop. Then it uses <code class="xref py py-func docutils literal notranslate"><span class="pre">one_loop_wp()</span></code> to
compute the <a class="reference internal" href="#probably.pgcl.wp.LoopExpectationTransformer" title="probably.pgcl.wp.LoopExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">LoopExpectationTransformer</span></code></a>.</p>
<dl class="py class">
<dt id="probably.pgcl.wp.LoopExpectationTransformer">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.wp.</code><code class="sig-name descname">LoopExpectationTransformer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">init</span></em>, <em class="sig-param"><span class="n">body</span></em>, <em class="sig-param"><span class="n">done</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/wp.html#LoopExpectationTransformer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.wp.LoopExpectationTransformer" title="Permalink to this definition">¶</a></dt>
<dd><p>The expectation <em>transformer</em> for a pGCL program with <strong>exactly one loop and
optional initialization assignments before the loop</strong>.
See <code class="xref py py-func docutils literal notranslate"><span class="pre">one_loop_wp()</span></code>.</p>
<p>A loop’s expectation transformer is represented by the initialization
assignments themselves, an expectation transformer for the body, and a
<a class="reference internal" href="#probably.pgcl.wp.LoopExpectationTransformer.done" title="probably.pgcl.wp.LoopExpectationTransformer.done"><code class="xref py py-data docutils literal notranslate"><span class="pre">done</span></code></a> term which is the expectation for loop termination.</p>
<p>Note that <a class="reference internal" href="#probably.pgcl.wp.LoopExpectationTransformer.done" title="probably.pgcl.wp.LoopExpectationTransformer.done"><code class="xref py py-data docutils literal notranslate"><span class="pre">done</span></code></a> is not represented by an expectation transformer, but
rather just an expectation (<a class="reference internal" href="#probably.pgcl.ast.Expr" title="probably.pgcl.ast.Expr"><code class="xref py py-class docutils literal notranslate"><span class="pre">probably.pgcl.ast.Expr</span></code></a>). This is
because the term in the weakest pre-expectation semantics for termination of
the while loop never contains the post-expectation <span class="math">\(f\)</span> (it is just
multiplied with it). A simpler representation allows for more convenient
further use. The <span class="math">\(\mathrm{wp}\)</span> semantics of a <code class="docutils literal notranslate"><span class="pre">while</span></code> loop are shown
below:</p>
<div class="math">
\[\mathrm{wp}\llbracket{}\mathtt{while} (b) \{ C \}\rrbracket(f) = \mathrm{lfp}~X.~ \underbrace{[b] \cdot \mathrm{wp}\llbracket{}C\rrbracket{}(X)}_{\text{body}} + \underbrace{[\neg b]}_{\text{done}} \cdot f\]</div>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">.parser</span> <span class="kn">import</span> <span class="n">parse_pgcl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;bool x; x := true; while (x) { x := false }&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transformer</span> <span class="o">=</span> <span class="n">one_loop_wp_transformer</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">transformer</span><span class="p">)</span>
<span class="go">x := true;</span>
<span class="go">λ𝐹. lfp 𝑋. [x] * ((𝑋)[x/false]) + [not x] * 𝐹</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">transformer</span><span class="p">))</span>
<span class="go">LoopExpectationTransformer(init=[AsgnInstr(lhs=&#39;x&#39;, rhs=BoolLitExpr(True))], body=ExpectationTransformer(variable=&#39;𝑋&#39;, expectation=BinopExpr(operator=Binop.TIMES, lhs=UnopExpr(operator=Unop.IVERSON, expr=VarExpr(&#39;x&#39;)), rhs=SubstExpr(subst={&#39;x&#39;: BoolLitExpr(False)}, expr=VarExpr(&#39;𝑋&#39;)))), done=UnopExpr(operator=Unop.IVERSON, expr=UnopExpr(operator=Unop.NEG, expr=VarExpr(&#39;x&#39;))))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>init</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.AsgnInstr" title="probably.pgcl.ast.AsgnInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code></a>]) – </p></li>
<li><p><strong>body</strong> (<a class="reference internal" href="#probably.pgcl.wp.ExpectationTransformer" title="probably.pgcl.wp.ExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationTransformer</span></code></a>) – </p></li>
<li><p><strong>done</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="probably.pgcl.wp.LoopExpectationTransformer.init">
<code class="sig-name descname">init</code><em class="property">: List<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.AsgnInstr" title="probably.pgcl.ast.AsgnInstr">probably.pgcl.ast.AsgnInstr</a><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.wp.LoopExpectationTransformer.init" title="Permalink to this definition">¶</a></dt>
<dd><p>Initial assignments before the loop.</p>
</dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.wp.LoopExpectationTransformer.body">
<code class="sig-name descname">body</code><em class="property">: <a class="reference internal" href="#probably.pgcl.wp.ExpectationTransformer" title="probably.pgcl.wp.ExpectationTransformer">probably.pgcl.wp.ExpectationTransformer</a></em><a class="headerlink" href="#probably.pgcl.wp.LoopExpectationTransformer.body" title="Permalink to this definition">¶</a></dt>
<dd><p>The expectation transformer for the loop’s body.</p>
</dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.wp.LoopExpectationTransformer.done">
<code class="sig-name descname">done</code><em class="property">: Union<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr">probably.pgcl.ast.VarExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr">probably.pgcl.ast.BoolLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr">probably.pgcl.ast.NatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr">probably.pgcl.ast.FloatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr">probably.pgcl.ast.UnopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr">probably.pgcl.ast.BinopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr">probably.pgcl.ast.UniformExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr">probably.pgcl.ast.CategoricalExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr">probably.pgcl.ast.SubstExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr">probably.pgcl.ast.TickExpr</a><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.wp.LoopExpectationTransformer.done" title="Permalink to this definition">¶</a></dt>
<dd><p>The expectation for when the loop is done.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="probably.pgcl.wp.one_loop_wp_transformer">
<code class="sig-prename descclassname">probably.pgcl.wp.</code><code class="sig-name descname">one_loop_wp_transformer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">program</span></em>, <em class="sig-param"><span class="n">instr</span></em>, <em class="sig-param"><span class="n">variable</span><span class="o">=</span><span class="default_value">'𝑋'</span></em>, <em class="sig-param"><span class="n">substitute</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/wp.html#one_loop_wp_transformer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.wp.one_loop_wp_transformer" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the weakest pre-expectation transformer of a program that consists
of exactly one while loop with some optional assignments at the beginning.
That means the only supported programs are of the following form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">:=</span> <span class="n">e1</span>
<span class="n">y</span> <span class="o">:=</span> <span class="n">e2</span>
<span class="k">while</span> <span class="p">(</span><span class="n">cond</span><span class="p">)</span> <span class="p">{</span> <span class="o">..</span> <span class="p">}</span>
</pre></div>
</div>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">.parser</span> <span class="kn">import</span> <span class="n">parse_pgcl</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;bool x; bool y; while(x) { { x := true } [0.5] { x := y } }&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">one_loop_wp_transformer</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">))</span>
<span class="go">λ𝐹. lfp 𝑋. [x] * ((((𝑋)[x/true]) * 0.5) + (((𝑋)[x/y]) * (1.0 - 0.5))) + [not x] * 𝐹</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;bool x; while(x) { if (x) { x := false } {x := true } }&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">one_loop_wp_transformer</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">))</span>
<span class="go">λ𝐹. lfp 𝑋. [x] * (([x] * ((𝑋)[x/false])) + ([not x] * ((𝑋)[x/true]))) + [not x] * 𝐹</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>variable</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Optional name for the variable to be used for the transformer. Must not occur elsewhere in the program.</p></li>
<li><p><strong>substitute</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – Whether to call <a class="reference internal" href="#probably.pgcl.wp.ExpectationTransformer.substitute" title="probably.pgcl.wp.ExpectationTransformer.substitute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExpectationTransformer.substitute()</span></code></a> on the <code class="docutils literal notranslate"><span class="pre">body</span></code>.</p></li>
<li><p><strong>program</strong> (<a class="reference internal" href="#probably.pgcl.ast.Program" title="probably.pgcl.ast.Program"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – </p></li>
<li><p><strong>instr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.SkipInstr" title="probably.pgcl.ast.SkipInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.WhileInstr" title="probably.pgcl.ast.WhileInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.IfInstr" title="probably.pgcl.ast.IfInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.AsgnInstr" title="probably.pgcl.ast.AsgnInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.ChoiceInstr" title="probably.pgcl.ast.ChoiceInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickInstr" title="probably.pgcl.ast.TickInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.SkipInstr" title="probably.pgcl.ast.SkipInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.WhileInstr" title="probably.pgcl.ast.WhileInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.IfInstr" title="probably.pgcl.ast.IfInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.AsgnInstr" title="probably.pgcl.ast.AsgnInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.ChoiceInstr" title="probably.pgcl.ast.ChoiceInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickInstr" title="probably.pgcl.ast.TickInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code></a>]]]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#probably.pgcl.wp.LoopExpectationTransformer" title="probably.pgcl.wp.LoopExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">LoopExpectationTransformer</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="probably.pgcl.wp.general_wp_transformer">
<code class="sig-prename descclassname">probably.pgcl.wp.</code><code class="sig-name descname">general_wp_transformer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">program</span></em>, <em class="sig-param"><span class="n">substitute</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/wp.html#general_wp_transformer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.wp.general_wp_transformer" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the weakest pre-expectation transformer for any pGCL program. For
programs that consist of one big loop (see <a class="reference internal" href="#one-big-loop"><span class="std std-ref">One Big Loop</span></a>),
<a class="reference internal" href="#probably.pgcl.wp.one_loop_wp_transformer" title="probably.pgcl.wp.one_loop_wp_transformer"><code class="xref py py-func docutils literal notranslate"><span class="pre">one_loop_wp_transformer()</span></code></a> is invoked directly. All other programs are
run through <a class="reference internal" href="#probably.pgcl.cfg.program_one_big_loop" title="probably.pgcl.cfg.program_one_big_loop"><code class="xref py py-func docutils literal notranslate"><span class="pre">probably.pgcl.cfg.program_one_big_loop()</span></code></a> first and then
<a class="reference internal" href="#probably.pgcl.wp.one_loop_wp_transformer" title="probably.pgcl.wp.one_loop_wp_transformer"><code class="xref py py-func docutils literal notranslate"><span class="pre">one_loop_wp_transformer()</span></code></a> is used. This will introduce a new,
additional variable for the program counter.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">.parser</span> <span class="kn">import</span> <span class="n">parse_pgcl</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;bool x; while(x) { while (y) </span><span class="si">{}</span><span class="s2"> }&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">general_wp_transformer</span><span class="p">(</span><span class="n">program</span><span class="p">))</span>
<span class="go">pc := 1;</span>
<span class="go">λ𝐹. lfp 𝑋. [not (pc = 0)] * (([pc = 1] * (([x] * ((𝑋)[pc/2])) + ([not x] * ((𝑋)[pc/0])))) + ([not (pc = 1)] * (([y] * ((𝑋)[pc/2])) + ([not y] * ((𝑋)[pc/1]))))) + [pc = 0] * 𝐹</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>substitute</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – Whether to call <a class="reference internal" href="#probably.pgcl.wp.ExpectationTransformer.substitute" title="probably.pgcl.wp.ExpectationTransformer.substitute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExpectationTransformer.substitute()</span></code></a> on the <code class="docutils literal notranslate"><span class="pre">body</span></code>.</p></li>
<li><p><strong>program</strong> (<a class="reference internal" href="#probably.pgcl.ast.Program" title="probably.pgcl.ast.Program"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#probably.pgcl.wp.LoopExpectationTransformer" title="probably.pgcl.wp.LoopExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">LoopExpectationTransformer</span></code></a></p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<span class="target" id="module-probably.pgcl.syntax"></span><div class="section" id="program-shapes">
<h2>Program Shapes<a class="headerlink" href="#program-shapes" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">syntax</span></code> module provides functions to analyze a program’s syntax: Whether it
is <em>linear</em>, or whether it only consists of one big loop.</p>
<div class="section" id="linearity">
<span id="id6"></span><h3>Linearity<a class="headerlink" href="#linearity" title="Permalink to this headline">¶</a></h3>
<p><em>Linear arithmetic expressions</em> <span class="math">\(e \in \mathsf{AE}_\text{lin}\)</span> adhere to the grammar</p>
<div class="math">
\[\begin{aligned}
    e \rightarrow &\quad n \in \mathbb{N} \quad && \text{\small{}(constants)} \\
            \mid  &\quad x \in \mathsf{Vars} && \text{\small{}(variables)} \\
            \mid  &\quad e + e && \text{\small{}(addition)} \\
            \mid  &\quad e \dot{-} e && \text{\small{}(monus)} \\
            \mid  &\quad n \cdot e && \text{\small{}(multiplication by constants)}
\end{aligned}\]</div>
<p><em>Monus</em> means subtraction truncated at zero <a class="footnote-reference brackets" href="#monus" id="id7">4</a>. In Probably, we just use
<a class="reference internal" href="#probably.pgcl.ast.Binop.MINUS" title="probably.pgcl.ast.Binop.MINUS"><code class="xref py py-data docutils literal notranslate"><span class="pre">probably.pgcl.ast.Binop.MINUS</span></code></a> (and do not distinguish between minus
and monus).</p>
<p><em>Linear Boolean expressions</em> <span class="math">\(\varphi \in \mathsf{BE}_\text{lin}\)</span> adhere to the grammar</p>
<div class="math">
\[\begin{aligned}
    \varphi \rightarrow &\quad e < e \quad && \text{\small{}(strict inequality of arithmetic expressions)} \\
                   \mid &\quad e \leq e && \text{\small{}(inequality of arithmetic expressions)} \\
                   \mid &\quad e = e && \text{\small{}(equality of arithmetic expressions)} \\
                   \mid &\quad \varphi \land \varphi && \text{\small{}(conjunction)} \\
                   \mid &\quad \varphi \lor \varphi && \text{\small{}(disjunction)} \\
                   \mid &\quad \neg \varphi && \text{\small{}(negation)} \\
                   \mid &\quad \mathsf{true} \\
                   \mid &\quad \mathsf{false}
\end{aligned}\]</div>
<p><em>Linear pGCL programs</em> consist of statements which only ever use linear
arithmetic and linear Boolean expressions. Probabilistic choices must be done
with a constant probability expression.</p>
<p>The weakest pre-expectations of linear programs (see <a class="reference internal" href="#module-probably.pgcl.wp" title="probably.pgcl.wp"><code class="xref py py-mod docutils literal notranslate"><span class="pre">probably.pgcl.wp</span></code></a>)
are also linear in the sense that they can be easily rewritten as <em>linear
expectations</em>. You can use for example <a class="reference internal" href="#probably.pgcl.simplify.normalize_expectation" title="probably.pgcl.simplify.normalize_expectation"><code class="xref py py-func docutils literal notranslate"><span class="pre">probably.pgcl.simplify.normalize_expectation()</span></code></a>.</p>
<p>The set <span class="math">\(\mathsf{Exp}_\text{lin}\)</span> of <em>linear expectations</em> is given by the grammar</p>
<div class="math">
\[\begin{aligned}
    f \rightarrow &\quad e\quad && \text{\small{}(arithmetic expression)} \\
             \mid &\quad \infty && \text{\small{}(infinity)} \\
             \mid &\quad r \cdot f && \text{\small{}(scaling)} \\
             \mid &\quad [\varphi] \cdot f && \text{\small{}(guarding)} \\
             \mid &\quad f + f && \text{\small{}(addition)}
\end{aligned}\]</div>
<p>where <span class="math">\(e \in \mathsf{AE}_\text{lin}\)</span> is a linear arithmetic expression,
<span class="math">\(r \in \mathbb{Q}_{\geq 0}\)</span> is a non-negative rational, and where
<span class="math">\(\varphi \in \mathsf{BE}_\text{lin}\)</span> is a linear Boolean expression.</p>
<dl class="footnote brackets">
<dt class="label" id="monus"><span class="brackets"><a class="fn-backref" href="#id7">4</a></span></dt>
<dd><p>See the <a class="reference external" href="https://en.wikipedia.org/wiki/Monus">Monus Wikipedia page</a> for the general mathematical term.</p>
</dd>
</dl>
<dl class="py function">
<dt id="probably.pgcl.syntax.check_is_linear_program">
<code class="sig-prename descclassname">probably.pgcl.syntax.</code><code class="sig-name descname">check_is_linear_program</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">program</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/syntax.html#check_is_linear_program"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.syntax.check_is_linear_program" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the given (well-typed) program is linear.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">.parser</span> <span class="kn">import</span> <span class="n">parse_pgcl</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;bool b; while (true) { }&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">check_is_linear_program</span><span class="p">(</span><span class="n">program</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;while (true) { x := 2 * x }&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">check_is_linear_program</span><span class="p">(</span><span class="n">program</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;while (true) { x := x * x }&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">check_is_linear_program</span><span class="p">(</span><span class="n">program</span><span class="p">)</span>
<span class="go">CheckFail(location=..., message=&#39;Is not a linear expression&#39;)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>program</strong> (<a class="reference internal" href="#probably.pgcl.ast.Program" title="probably.pgcl.ast.Program"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference internal" href="#probably.pgcl.check.CheckFail" title="probably.pgcl.check.CheckFail"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckFail</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="probably.pgcl.syntax.check_is_linear_expr">
<code class="sig-prename descclassname">probably.pgcl.syntax.</code><code class="sig-name descname">check_is_linear_expr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">expr</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/syntax.html#check_is_linear_expr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.syntax.check_is_linear_expr" title="Permalink to this definition">¶</a></dt>
<dd><p>Linear expressions do not multiply variables with each other.
However, they may contain multiplication with constants or Iverson brackets.
Division is also not allowed in linear expressions.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">.ast</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">.parser</span> <span class="kn">import</span> <span class="n">parse_expectation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nat</span> <span class="o">=</span> <span class="n">NatLitExpr</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">check_is_linear_expr</span><span class="p">(</span><span class="n">BinopExpr</span><span class="p">(</span><span class="n">Binop</span><span class="o">.</span><span class="n">TIMES</span><span class="p">,</span> <span class="n">nat</span><span class="p">,</span> <span class="n">nat</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">check_is_linear_expr</span><span class="p">(</span><span class="n">BinopExpr</span><span class="p">(</span><span class="n">Binop</span><span class="o">.</span><span class="n">TIMES</span><span class="p">,</span> <span class="n">nat</span><span class="p">,</span> <span class="n">VarExpr</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">check_is_linear_expr</span><span class="p">(</span><span class="n">BinopExpr</span><span class="p">(</span><span class="n">Binop</span><span class="o">.</span><span class="n">TIMES</span><span class="p">,</span> <span class="n">VarExpr</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">),</span> <span class="n">VarExpr</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)))</span>
<span class="go">CheckFail(location=..., message=&#39;Is not a linear expression&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">check_is_linear_expr</span><span class="p">(</span><span class="n">parse_expectation</span><span class="p">(</span><span class="s2">&quot;[x &lt; 6] * x&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">check_is_linear_expr</span><span class="p">(</span><span class="n">parse_expectation</span><span class="p">(</span><span class="s2">&quot;[x * x]&quot;</span><span class="p">))</span>
<span class="go">CheckFail(location=..., message=&#39;Is not a linear expression&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">check_is_linear_expr</span><span class="p">(</span><span class="n">parse_expectation</span><span class="p">(</span><span class="s2">&quot;x/x&quot;</span><span class="p">))</span>
<span class="go">CheckFail(location=..., message=&#39;General division is not linear (division of constants is)&#39;)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>expr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference internal" href="#probably.pgcl.check.CheckFail" title="probably.pgcl.check.CheckFail"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckFail</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="one-big-loop">
<span id="id8"></span><h3>One Big Loop<a class="headerlink" href="#one-big-loop" title="Permalink to this headline">¶</a></h3>
<p>Check whether the program consists of one big while loop with optional
assignment statements before the loop.</p>
<p>Every program can be converted into a program with just one big loop and a bunch
of initialization assignments before the loop using
<a class="reference internal" href="#probably.pgcl.cfg.program_one_big_loop" title="probably.pgcl.cfg.program_one_big_loop"><code class="xref py py-func docutils literal notranslate"><span class="pre">probably.pgcl.cfg.program_one_big_loop()</span></code></a>.</p>
<dl class="py function">
<dt id="probably.pgcl.syntax.check_is_one_big_loop">
<code class="sig-prename descclassname">probably.pgcl.syntax.</code><code class="sig-name descname">check_is_one_big_loop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">instrs</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">allow_init</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/syntax.html#check_is_one_big_loop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.syntax.check_is_one_big_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether this program consists of only one big loop with optional
assignments before that.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>instrs</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.SkipInstr" title="probably.pgcl.ast.SkipInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.WhileInstr" title="probably.pgcl.ast.WhileInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.IfInstr" title="probably.pgcl.ast.IfInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.AsgnInstr" title="probably.pgcl.ast.AsgnInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.ChoiceInstr" title="probably.pgcl.ast.ChoiceInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickInstr" title="probably.pgcl.ast.TickInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code></a>]]) – List of instructions to check</p></li>
<li><p><strong>allow_init</strong> – Whether to allow an optional sequence of assignments before the loop.</p></li>
</ul>
</dd>
</dl>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">.parser</span> <span class="kn">import</span> <span class="n">parse_pgcl</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">check_is_one_big_loop</span><span class="p">(</span><span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">)</span>
<span class="go">CheckFail(location=..., message=&#39;Program must contain exactly one loop&#39;)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;while (true) { while (true) { } }&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">check_is_one_big_loop</span><span class="p">(</span><span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">)</span>
<span class="go">CheckFail(location=..., message=&#39;Program must contain exactly one loop&#39;)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;x := 5; while (true) { x := 2 * x }&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">check_is_one_big_loop</span><span class="p">(</span><span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="go">True</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;x := 5; while (true) { x := 2 * x }&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">check_is_one_big_loop</span><span class="p">(</span><span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">,</span> <span class="n">allow_init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">CheckFail(location=..., message=&#39;Program must contain exactly one loop&#39;)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference internal" href="#probably.pgcl.check.CheckFail" title="probably.pgcl.check.CheckFail"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckFail</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<span class="target" id="module-probably.pgcl.parser"></span><div class="section" id="parser">
<h2>Parser<a class="headerlink" href="#parser" title="Permalink to this headline">¶</a></h2>
<p>A Lark-based parser for pGCL.</p>
<p>For more details on what syntax is accepted for pGCL programs, you can view the <a class="reference internal" href="pgcl_grammar.html#pgcl-grammar"><span class="std std-ref">formal grammar used for the parser</span></a>.</p>
<p class="rubric">Notes on the parsing algorithm</p>
<p>For most of the grammar, a simple run of the Lark parser suffices. The only
slightly tricky part is parsing of categorical choice expressions. To avoid
ambiguous grammar, we parse those as normal expressions of <cite>PLUS</cite> operators.
Individual weights attached to probabilities are saved in a temporary
<cite>LikelyExpr</cite> type which associates a single expression with a probability. Later
we collect all <cite>LikelyExpr</cite> and flatten them into a single
<code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code>. <cite>LikelyExpr</cite> never occur outside of this parser.</p>
<dl class="py function">
<dt id="probably.pgcl.parser.parse_pgcl">
<code class="sig-prename descclassname">probably.pgcl.parser.</code><code class="sig-name descname">parse_pgcl</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">code</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/parser.html#parse_pgcl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.parser.parse_pgcl" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse a pGCL program.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;x := y&quot;</span><span class="p">)</span>
<span class="go">Program(variables={}, constants={}, instructions=[AsgnInstr(lhs=&#39;x&#39;, rhs=VarExpr(&#39;y&#39;))])</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;x := unif(5, 17)&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">instructions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">AsgnInstr(lhs=&#39;x&#39;, rhs=UniformExpr(start=NatLitExpr(5), end=NatLitExpr(17)))</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;x := x : 1/3 + y : 2/3&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">instructions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">AsgnInstr(lhs=&#39;x&#39;, rhs=CategoricalExpr(exprs=[(VarExpr(&#39;x&#39;), FloatLitExpr(&quot;1/3&quot;)), (VarExpr(&#39;y&#39;), FloatLitExpr(&quot;2/3&quot;))]))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>code</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#probably.pgcl.ast.Program" title="probably.pgcl.ast.Program"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="probably.pgcl.parser.parse_expr">
<code class="sig-prename descclassname">probably.pgcl.parser.</code><code class="sig-name descname">parse_expr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">code</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/parser.html#parse_expr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.parser.parse_expr" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse a pGCL expression.</p>
<p>As a program expression, it may not contain Iverson bracket expressions.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parse_expr</span><span class="p">(</span><span class="s2">&quot;x &lt; y &amp; z&quot;</span><span class="p">)</span>
<span class="go">BinopExpr(operator=Binop.AND, lhs=BinopExpr(operator=Binop.LE, lhs=VarExpr(&#39;x&#39;), rhs=VarExpr(&#39;y&#39;)), rhs=VarExpr(&#39;z&#39;))</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">parse_expr</span><span class="p">(</span><span class="s2">&quot;[x]&quot;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">Exception</span>: <span class="n">parse_expr: Expression may not contain an Iverson bracket expression.</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>code</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="probably.pgcl.parser.parse_expectation">
<code class="sig-prename descclassname">probably.pgcl.parser.</code><code class="sig-name descname">parse_expectation</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">code</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/parser.html#parse_expectation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.parser.parse_expectation" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse a pGCL expectation. This allows all kind of expressions.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parse_expectation</span><span class="p">(</span><span class="s2">&quot;[x]&quot;</span><span class="p">)</span>
<span class="go">UnopExpr(operator=Unop.IVERSON, expr=VarExpr(&#39;x&#39;))</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">parse_expectation</span><span class="p">(</span><span class="s2">&quot;0.2&quot;</span><span class="p">)</span>
<span class="go">FloatLitExpr(&quot;0.2&quot;)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">parse_expectation</span><span class="p">(</span><span class="s2">&quot;1/3&quot;</span><span class="p">)</span>
<span class="go">FloatLitExpr(&quot;1/3&quot;)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">parse_expectation</span><span class="p">(</span><span class="s2">&quot;∞&quot;</span><span class="p">)</span>
<span class="go">FloatLitExpr(&quot;Infinity&quot;)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>code</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

</div>
<span class="target" id="module-probably.pgcl.walk"></span><div class="section" id="walking-asts">
<h2>Walking ASTs<a class="headerlink" href="#walking-asts" title="Permalink to this headline">¶</a></h2>
<p>Utilities to traverse (“walk”) an AST, i.e. visiting each node in the AST.
There are two directions (bottom-up and top-down) which you can select using <a class="reference internal" href="#probably.pgcl.walk.Walk" title="probably.pgcl.walk.Walk"><code class="xref py py-class docutils literal notranslate"><span class="pre">Walk</span></code></a>.</p>
<p>We also have <a class="reference internal" href="util.html#probably.util.ref.Ref" title="probably.util.ref.Ref"><code class="xref py py-data docutils literal notranslate"><span class="pre">probably.util.ref.Ref</span></code></a> and <a class="reference internal" href="util.html#probably.util.ref.Mut" title="probably.util.ref.Mut"><code class="xref py py-class docutils literal notranslate"><span class="pre">probably.util.ref.Mut</span></code></a> to represent mutable references to values.
These allow a walk of an AST while modifying it.
E.g. constant folding can be implemented as a bottom-up walk where each callback simplifies the current node.</p>
<p>A simple example with <a class="reference internal" href="#probably.pgcl.walk.walk_expr" title="probably.pgcl.walk.walk_expr"><code class="xref py py-func docutils literal notranslate"><span class="pre">walk_expr()</span></code></a> is below.
The returned iterable contains <code class="docutils literal notranslate"><span class="pre">Mut[Expr]</span></code> objects.
Use <a class="reference internal" href="util.html#probably.util.ref.Mut.val" title="probably.util.ref.Mut.val"><code class="xref py py-attr docutils literal notranslate"><span class="pre">probably.util.ref.Mut.val</span></code></a> to access the current node.</p>
<blockquote>
<div><div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">probably.util.ref</span> <span class="kn">import</span> <span class="n">Mut</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span> <span class="o">=</span> <span class="n">Mut</span><span class="o">.</span><span class="n">alloc</span><span class="p">(</span><span class="n">UnopExpr</span><span class="p">(</span><span class="n">Unop</span><span class="o">.</span><span class="n">NEG</span><span class="p">,</span> <span class="n">NatLitExpr</span><span class="p">(</span><span class="mi">10</span><span class="p">)))</span>

<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">ref</span><span class="o">.</span><span class="n">val</span> <span class="k">for</span> <span class="n">ref</span> <span class="ow">in</span> <span class="n">walk_expr</span><span class="p">(</span><span class="n">Walk</span><span class="o">.</span><span class="n">DOWN</span><span class="p">,</span> <span class="n">expr</span><span class="p">)]</span>
<span class="go">[UnopExpr(operator=Unop.NEG, expr=NatLitExpr(10)), NatLitExpr(10)]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">ref</span><span class="o">.</span><span class="n">val</span> <span class="k">for</span> <span class="n">ref</span> <span class="ow">in</span> <span class="n">walk_expr</span><span class="p">(</span><span class="n">Walk</span><span class="o">.</span><span class="n">UP</span><span class="p">,</span> <span class="n">expr</span><span class="p">)]</span>
<span class="go">[NatLitExpr(10), UnopExpr(operator=Unop.NEG, expr=NatLitExpr(10))]</span>
</pre></div>
</div>
</div></blockquote>
<p class="rubric">Why not manual recursion?</p>
<p>This framework allows easy and flexible traversal of ASTs while also changing direction along the way: Using <a class="reference internal" href="util.html#probably.util.ref.Mut" title="probably.util.ref.Mut"><code class="xref py py-class docutils literal notranslate"><span class="pre">probably.util.ref.Mut</span></code></a>, we can modify the AST and then continue traversal with the new AST.
This makes it hard to forget calling a recursive traversal call, which could easily happen if every single traversal was implemented manually.</p>
<dl class="py class">
<dt id="probably.pgcl.walk.Walk">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.walk.</code><code class="sig-name descname">Walk</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/walk.html#Walk"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.walk.Walk" title="Permalink to this definition">¶</a></dt>
<dd><p>In which direction to go in a traversal: DOWN is a top-down traversal and UP is a bottom-up traversal.</p>
<dl class="py attribute">
<dt id="probably.pgcl.walk.Walk.DOWN">
<code class="sig-name descname">DOWN</code><em class="property"> = 1</em><a class="headerlink" href="#probably.pgcl.walk.Walk.DOWN" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.walk.Walk.UP">
<code class="sig-name descname">UP</code><em class="property"> = 2</em><a class="headerlink" href="#probably.pgcl.walk.Walk.UP" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="probably.pgcl.walk.Walk.walk">
<code class="sig-name descname">walk</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">get_children</span></em>, <em class="sig-param"><span class="n">root</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/walk.html#Walk.walk"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.walk.Walk.walk" title="Permalink to this definition">¶</a></dt>
<dd><p>Walk a tree given by <code class="docutils literal notranslate"><span class="pre">get_children</span></code> in the given direction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>get_children</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code></a>[[~T], <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[~T]]) – </p></li>
<li><p><strong>root</strong> (<em>~T</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[~T]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="probably.pgcl.walk.mut_expr_children">
<code class="sig-prename descclassname">probably.pgcl.walk.</code><code class="sig-name descname">mut_expr_children</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">node_ref</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/walk.html#mut_expr_children"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.walk.mut_expr_children" title="Permalink to this definition">¶</a></dt>
<dd><p>Get refs to all direct children of an expr.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node_ref</strong> (<a class="reference internal" href="util.html#probably.util.ref.Mut" title="probably.util.ref.Mut"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mut</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]]) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference internal" href="util.html#probably.util.ref.Mut" title="probably.util.ref.Mut"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mut</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="probably.pgcl.walk.walk_expr">
<code class="sig-prename descclassname">probably.pgcl.walk.</code><code class="sig-name descname">walk_expr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">walk</span></em>, <em class="sig-param"><span class="n">expr_ref</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/walk.html#walk_expr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.walk.walk_expr" title="Permalink to this definition">¶</a></dt>
<dd><p>Walk an expression.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>walk</strong> (<a class="reference internal" href="#probably.pgcl.walk.Walk" title="probably.pgcl.walk.Walk"><code class="xref py py-class docutils literal notranslate"><span class="pre">Walk</span></code></a>) – </p></li>
<li><p><strong>expr_ref</strong> (<a class="reference internal" href="util.html#probably.util.ref.Mut" title="probably.util.ref.Mut"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mut</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference internal" href="util.html#probably.util.ref.Mut" title="probably.util.ref.Mut"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mut</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="probably.pgcl.walk.walk_instrs">
<code class="sig-prename descclassname">probably.pgcl.walk.</code><code class="sig-name descname">walk_instrs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">walk</span></em>, <em class="sig-param"><span class="n">instrs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/walk.html#walk_instrs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.walk.walk_instrs" title="Permalink to this definition">¶</a></dt>
<dd><p>Walk a list of instructions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>walk</strong> (<a class="reference internal" href="#probably.pgcl.walk.Walk" title="probably.pgcl.walk.Walk"><code class="xref py py-class docutils literal notranslate"><span class="pre">Walk</span></code></a>) – </p></li>
<li><p><strong>instrs</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.SkipInstr" title="probably.pgcl.ast.SkipInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.WhileInstr" title="probably.pgcl.ast.WhileInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.IfInstr" title="probably.pgcl.ast.IfInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.AsgnInstr" title="probably.pgcl.ast.AsgnInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.ChoiceInstr" title="probably.pgcl.ast.ChoiceInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickInstr" title="probably.pgcl.ast.TickInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code></a>]]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference internal" href="util.html#probably.util.ref.Mut" title="probably.util.ref.Mut"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mut</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.SkipInstr" title="probably.pgcl.ast.SkipInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.WhileInstr" title="probably.pgcl.ast.WhileInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.IfInstr" title="probably.pgcl.ast.IfInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.AsgnInstr" title="probably.pgcl.ast.AsgnInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.ChoiceInstr" title="probably.pgcl.ast.ChoiceInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickInstr" title="probably.pgcl.ast.TickInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code></a>]]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="probably.pgcl.walk.instr_exprs">
<code class="sig-prename descclassname">probably.pgcl.walk.</code><code class="sig-name descname">instr_exprs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">node</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/walk.html#instr_exprs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.walk.instr_exprs" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the expressions that are direct children of this instruction as values.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">.ast</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">instr_exprs</span><span class="p">(</span><span class="n">AsgnInstr</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">BoolLitExpr</span><span class="p">(</span><span class="kc">True</span><span class="p">))))</span>
<span class="go">[BoolLitExpr(True)]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.SkipInstr" title="probably.pgcl.ast.SkipInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.WhileInstr" title="probably.pgcl.ast.WhileInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.IfInstr" title="probably.pgcl.ast.IfInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.AsgnInstr" title="probably.pgcl.ast.AsgnInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.ChoiceInstr" title="probably.pgcl.ast.ChoiceInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickInstr" title="probably.pgcl.ast.TickInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code></a>]) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="probably.pgcl.walk.mut_instr_exprs">
<code class="sig-prename descclassname">probably.pgcl.walk.</code><code class="sig-name descname">mut_instr_exprs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">node</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/walk.html#mut_instr_exprs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.walk.mut_instr_exprs" title="Permalink to this definition">¶</a></dt>
<dd><p>Get refs to the expressions of an instruction.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">mut_instr_exprs</span><span class="p">(</span><span class="n">ChoiceInstr</span><span class="p">(</span><span class="n">VarExpr</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">),</span> <span class="p">[</span><span class="n">SkipInstr</span><span class="p">()],</span> <span class="p">[</span><span class="n">SkipInstr</span><span class="p">()])))</span>
<span class="go">[Mut(val=VarExpr(&#39;x&#39;))]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.SkipInstr" title="probably.pgcl.ast.SkipInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.WhileInstr" title="probably.pgcl.ast.WhileInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.IfInstr" title="probably.pgcl.ast.IfInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.AsgnInstr" title="probably.pgcl.ast.AsgnInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.ChoiceInstr" title="probably.pgcl.ast.ChoiceInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickInstr" title="probably.pgcl.ast.TickInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code></a>]) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference internal" href="util.html#probably.util.ref.Mut" title="probably.util.ref.Mut"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mut</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="probably.pgcl.walk.walk_instr_exprs">
<code class="sig-prename descclassname">probably.pgcl.walk.</code><code class="sig-name descname">walk_instr_exprs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">walk</span></em>, <em class="sig-param"><span class="n">instr</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/walk.html#walk_instr_exprs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.walk.walk_instr_exprs" title="Permalink to this definition">¶</a></dt>
<dd><p>Walk all expressions in the instruction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>walk</strong> (<a class="reference internal" href="#probably.pgcl.walk.Walk" title="probably.pgcl.walk.Walk"><code class="xref py py-class docutils literal notranslate"><span class="pre">Walk</span></code></a>) – </p></li>
<li><p><strong>instr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.SkipInstr" title="probably.pgcl.ast.SkipInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.WhileInstr" title="probably.pgcl.ast.WhileInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.IfInstr" title="probably.pgcl.ast.IfInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.AsgnInstr" title="probably.pgcl.ast.AsgnInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.ChoiceInstr" title="probably.pgcl.ast.ChoiceInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickInstr" title="probably.pgcl.ast.TickInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code></a>]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference internal" href="util.html#probably.util.ref.Mut" title="probably.util.ref.Mut"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mut</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]]]</p>
</dd>
</dl>
</dd></dl>

</div>
<span class="target" id="module-probably.pgcl.check"></span><div class="section" id="type-checking">
<h2>Type Checking<a class="headerlink" href="#type-checking" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="probably.pgcl.check.CheckFail">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.check.</code><code class="sig-name descname">CheckFail</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">location</span></em>, <em class="sig-param"><span class="n">message</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/check.html#CheckFail"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.check.CheckFail" title="Permalink to this definition">¶</a></dt>
<dd><p>A check failed with an error message and an optional location.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>location</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.Node" title="probably.pgcl.ast.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a>]) – </p></li>
<li><p><strong>message</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="probably.pgcl.check.CheckFail.location">
<code class="sig-name descname">location</code><em class="property">: Optional<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.Node" title="probably.pgcl.ast.Node">probably.pgcl.ast.Node</a><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.check.CheckFail.location" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.check.CheckFail.message">
<code class="sig-name descname">message</code><em class="property">: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></em><a class="headerlink" href="#probably.pgcl.check.CheckFail.message" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="probably.pgcl.check.CheckFail.expected_type_got">
<em class="property">static </em><code class="sig-name descname">expected_type_got</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">node</span></em>, <em class="sig-param"><span class="n">expected</span></em>, <em class="sig-param"><span class="n">got</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/check.html#CheckFail.expected_type_got"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.check.CheckFail.expected_type_got" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> (<a class="reference internal" href="#probably.pgcl.ast.Node" title="probably.pgcl.ast.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a>) – </p></li>
<li><p><strong>expected</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.BoolType" title="probably.pgcl.ast.BoolType"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolType</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatType" title="probably.pgcl.ast.NatType"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatType</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatType" title="probably.pgcl.ast.FloatType"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatType</span></code></a>]) – </p></li>
<li><p><strong>got</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.BoolType" title="probably.pgcl.ast.BoolType"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolType</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatType" title="probably.pgcl.ast.NatType"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatType</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatType" title="probably.pgcl.ast.FloatType"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatType</span></code></a>]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#probably.pgcl.check.CheckFail" title="probably.pgcl.check.CheckFail"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckFail</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="probably.pgcl.check.CheckFail.expected_numeric_got">
<em class="property">static </em><code class="sig-name descname">expected_numeric_got</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">node</span></em>, <em class="sig-param"><span class="n">got</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/check.html#CheckFail.expected_numeric_got"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.check.CheckFail.expected_numeric_got" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> (<a class="reference internal" href="#probably.pgcl.ast.Node" title="probably.pgcl.ast.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a>) – </p></li>
<li><p><strong>got</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.BoolType" title="probably.pgcl.ast.BoolType"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolType</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatType" title="probably.pgcl.ast.NatType"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatType</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatType" title="probably.pgcl.ast.FloatType"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatType</span></code></a>]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#probably.pgcl.check.CheckFail" title="probably.pgcl.check.CheckFail"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckFail</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="probably.pgcl.check.CheckFail.fmap">
<em class="property">static </em><code class="sig-name descname">fmap</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">source</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/check.html#CheckFail.fmap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.check.CheckFail.fmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract an error from an iterable.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">CheckFail</span><span class="o">.</span><span class="n">fmap</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">])</span>
<span class="go">[&#39;a&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CheckFail</span><span class="o">.</span><span class="n">fmap</span><span class="p">([</span><span class="n">CheckFail</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;whoops!&#39;</span><span class="p">)])</span>
<span class="go">CheckFail(location=None, message=&#39;whoops!&#39;)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>source</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[~_T, <a class="reference internal" href="#probably.pgcl.check.CheckFail" title="probably.pgcl.check.CheckFail"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckFail</span></code></a>]]) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.check.CheckFail" title="probably.pgcl.check.CheckFail"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckFail</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[~_T]]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="probably.pgcl.check.get_type">
<code class="sig-prename descclassname">probably.pgcl.check.</code><code class="sig-name descname">get_type</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">program</span></em>, <em class="sig-param"><span class="n">expr</span></em>, <em class="sig-param"><span class="n">check</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/check.html#get_type"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.check.get_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the type of the expression or expectation.</p>
<p>Set <cite>check</cite> to <cite>True</cite> to force checking correctness of all subexpressions, even if that is not necessary to determine the given expression’s type.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">.ast</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nat</span> <span class="o">=</span> <span class="n">NatLitExpr</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">Program</span><span class="p">(</span><span class="nb">list</span><span class="p">(),</span> <span class="nb">dict</span><span class="p">(),</span> <span class="nb">dict</span><span class="p">(),</span> <span class="nb">list</span><span class="p">())</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">get_type</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="n">BinopExpr</span><span class="p">(</span><span class="n">Binop</span><span class="o">.</span><span class="n">TIMES</span><span class="p">,</span> <span class="n">nat</span><span class="p">,</span> <span class="n">nat</span><span class="p">))</span>
<span class="go">NatType(bounds=None)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">get_type</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="n">VarExpr</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">))</span>
<span class="go">CheckFail(location=VarExpr(&#39;x&#39;), message=&#39;variable is not declared&#39;)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">get_type</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="n">UnopExpr</span><span class="p">(</span><span class="n">Unop</span><span class="o">.</span><span class="n">IVERSON</span><span class="p">,</span> <span class="n">BoolLitExpr</span><span class="p">(</span><span class="kc">True</span><span class="p">)))</span>
<span class="go">FloatType()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>program</strong> (<a class="reference internal" href="#probably.pgcl.ast.Program" title="probably.pgcl.ast.Program"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – </p></li>
<li><p><strong>expr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.BoolType" title="probably.pgcl.ast.BoolType"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolType</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatType" title="probably.pgcl.ast.NatType"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatType</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatType" title="probably.pgcl.ast.FloatType"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatType</span></code></a>, <a class="reference internal" href="#probably.pgcl.check.CheckFail" title="probably.pgcl.check.CheckFail"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckFail</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="probably.pgcl.check.is_compatible">
<code class="sig-prename descclassname">probably.pgcl.check.</code><code class="sig-name descname">is_compatible</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">lhs</span></em>, <em class="sig-param"><span class="n">rhs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/check.html#is_compatible"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.check.is_compatible" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the right-hand side type is compatible with the left-hand side type.</p>
<p>This function essentially defines the implicit type coercions of the pGCL language.
Compatibility is not only important for which values can be used as the right-hand side of an assignment, but compatibility
rules are also checked when operators are used.</p>
<p>The only rules for compatibility currently implemented are:</p>
<ul class="simple">
<li><p>Natural numbers are compatible with variables of every other type of number (bounded or unbounded).</p></li>
<li><p>Otherwise the types must be exactly equal for values to be compatible.</p></li>
</ul>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">.ast</span> <span class="kn">import</span> <span class="n">Bounds</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">is_compatible</span><span class="p">(</span><span class="n">BoolType</span><span class="p">(),</span> <span class="n">BoolType</span><span class="p">())</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">is_compatible</span><span class="p">(</span><span class="n">NatType</span><span class="p">(</span><span class="n">bounds</span><span class="o">=</span><span class="kc">None</span><span class="p">),</span> <span class="n">NatType</span><span class="p">(</span><span class="n">bounds</span><span class="o">=</span><span class="kc">None</span><span class="p">))</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">is_compatible</span><span class="p">(</span><span class="n">NatType</span><span class="p">(</span><span class="n">bounds</span><span class="o">=</span><span class="n">Bounds</span><span class="p">(</span><span class="n">NatLitExpr</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">NatLitExpr</span><span class="p">(</span><span class="mi">5</span><span class="p">))),</span> <span class="n">NatType</span><span class="p">(</span><span class="n">bounds</span><span class="o">=</span><span class="n">Bounds</span><span class="p">(</span><span class="n">NatLitExpr</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">NatLitExpr</span><span class="p">(</span><span class="mi">5</span><span class="p">))))</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">is_compatible</span><span class="p">(</span><span class="n">NatType</span><span class="p">(</span><span class="n">bounds</span><span class="o">=</span><span class="n">Bounds</span><span class="p">(</span><span class="n">NatLitExpr</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">NatLitExpr</span><span class="p">(</span><span class="mi">5</span><span class="p">))),</span> <span class="n">NatType</span><span class="p">(</span><span class="n">bounds</span><span class="o">=</span><span class="kc">None</span><span class="p">))</span>
<span class="go">True</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">is_compatible</span><span class="p">(</span><span class="n">BoolType</span><span class="p">(),</span> <span class="n">NatType</span><span class="p">(</span><span class="n">bounds</span><span class="o">=</span><span class="kc">None</span><span class="p">))</span>
<span class="go">False</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lhs</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.BoolType" title="probably.pgcl.ast.BoolType"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolType</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatType" title="probably.pgcl.ast.NatType"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatType</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatType" title="probably.pgcl.ast.FloatType"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatType</span></code></a>]) – </p></li>
<li><p><strong>rhs</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.BoolType" title="probably.pgcl.ast.BoolType"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolType</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatType" title="probably.pgcl.ast.NatType"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatType</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatType" title="probably.pgcl.ast.FloatType"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatType</span></code></a>]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="probably.pgcl.check.check_instr">
<code class="sig-prename descclassname">probably.pgcl.check.</code><code class="sig-name descname">check_instr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">program</span></em>, <em class="sig-param"><span class="n">instr</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/check.html#check_instr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.check.check_instr" title="Permalink to this definition">¶</a></dt>
<dd><p>Check a single instruction for type-safety.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">.parser</span> <span class="kn">import</span> <span class="n">parse_pgcl</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;bool x; x := true&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">check_instr</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;nat x; x := true&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">check_instr</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="go">CheckFail(location=..., message=&#39;Expected value of type NatType(bounds=None), got BoolType().&#39;)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;const x := true; x := true&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">check_instr</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="go">CheckFail(location=..., message=&#39;x is not a variable.&#39;)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;nat x [1,5]; x := 3&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">check_instr</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;nat x [1,5]; nat y; x := x + 3&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">check_instr</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>program</strong> (<a class="reference internal" href="#probably.pgcl.ast.Program" title="probably.pgcl.ast.Program"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – </p></li>
<li><p><strong>instr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.SkipInstr" title="probably.pgcl.ast.SkipInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.WhileInstr" title="probably.pgcl.ast.WhileInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.IfInstr" title="probably.pgcl.ast.IfInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.AsgnInstr" title="probably.pgcl.ast.AsgnInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.ChoiceInstr" title="probably.pgcl.ast.ChoiceInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickInstr" title="probably.pgcl.ast.TickInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code></a>]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference internal" href="#probably.pgcl.check.CheckFail" title="probably.pgcl.check.CheckFail"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckFail</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="probably.pgcl.check.check_program">
<code class="sig-prename descclassname">probably.pgcl.check.</code><code class="sig-name descname">check_program</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">program</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/check.html#check_program"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.check.check_program" title="Permalink to this definition">¶</a></dt>
<dd><p>Check a program for type-safety.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>program</strong> (<a class="reference internal" href="#probably.pgcl.ast.Program" title="probably.pgcl.ast.Program"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference internal" href="#probably.pgcl.check.CheckFail" title="probably.pgcl.check.CheckFail"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckFail</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="probably.pgcl.check.check_expression">
<code class="sig-prename descclassname">probably.pgcl.check.</code><code class="sig-name descname">check_expression</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">program</span></em>, <em class="sig-param"><span class="n">expr</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/check.html#check_expression"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.check.check_expression" title="Permalink to this definition">¶</a></dt>
<dd><p>Check an expression for type-safety.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">Program</span><span class="p">(</span><span class="nb">list</span><span class="p">(),</span> <span class="nb">dict</span><span class="p">(),</span> <span class="nb">dict</span><span class="p">(),</span> <span class="nb">list</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">check_expression</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="n">FloatLitExpr</span><span class="p">(</span><span class="s2">&quot;1.0&quot;</span><span class="p">))</span>
<span class="go">CheckFail(location=..., message=&#39;A program expression may not return a probability.&#39;)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>expr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference internal" href="#probably.pgcl.check.CheckFail" title="probably.pgcl.check.CheckFail"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckFail</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="probably.pgcl.check.check_expectation">
<code class="sig-prename descclassname">probably.pgcl.check.</code><code class="sig-name descname">check_expectation</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">program</span></em>, <em class="sig-param"><span class="n">expr</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/check.html#check_expectation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.check.check_expectation" title="Permalink to this definition">¶</a></dt>
<dd><p>Check an expectation for type-safety.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>expr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference internal" href="#probably.pgcl.check.CheckFail" title="probably.pgcl.check.CheckFail"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckFail</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

</div>
<span class="target" id="module-probably.pgcl.substitute"></span><div class="section" id="variable-substitution">
<h2>Variable Substitution<a class="headerlink" href="#variable-substitution" title="Permalink to this headline">¶</a></h2>
<p>This module does variable substitution for expressions, expectations, and programs.
The purpose of this module is elimination of <code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code> by applying the corresponding substitutions.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The program must be well-typed.
In particular, variables must be defined before they are used and substitutions must be type-safe.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The input AST <strong>must be a tree</strong> and objects may not occur multiple times. This is a limitation of the current implementation.
General DAGs are not supported yet.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Substitutions reuse AST objects</strong>, and do not copy unnecessarily.
Thus, AST objects may turn up multiple times in the AST.
For later mutation of the AST, you may want to pass <cite>deepcopy = True</cite> to prevent spooky action action at a distance.</p>
</div>
<p class="rubric" id="substitute-symbolic-variables">Symbolic variables</p>
<p>Each substitution function takes a parameter <cite>symbolic</cite> parameter that is a set of variables to be taken symbolic.
Symbolic variables are placeholders for arbitrary expressions, and thus it is not known which variables they contain.
Therefore the substitution cannot be done at this time.
Instead, a substitution applied to a symbolic variable will wrap the variable in a <code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code> that contains all substitutions applied to this variable.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">probably.util.ref</span> <span class="kn">import</span> <span class="n">Mut</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">.ast</span> <span class="kn">import</span> <span class="n">SubstExpr</span><span class="p">,</span> <span class="n">NatLitExpr</span><span class="p">,</span> <span class="n">VarExpr</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">.parser</span> <span class="kn">import</span> <span class="n">parse_expr</span>

<span class="go">Simple substitution without symbolic variables:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expr_ref</span> <span class="o">=</span> <span class="n">Mut</span><span class="o">.</span><span class="n">alloc</span><span class="p">(</span><span class="n">SubstExpr</span><span class="p">({</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">NatLitExpr</span><span class="p">(</span><span class="mi">2</span><span class="p">)},</span> <span class="n">parse_expr</span><span class="p">(</span><span class="s2">&quot;x + y&quot;</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">substitute_expr</span><span class="p">(</span><span class="n">expr_ref</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">expr_ref</span><span class="o">.</span><span class="n">val</span><span class="p">)</span>
<span class="go">&#39;2 + y&#39;</span>

<span class="go">The same substitution with `y` being symbolic:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expr_ref</span> <span class="o">=</span> <span class="n">Mut</span><span class="o">.</span><span class="n">alloc</span><span class="p">(</span><span class="n">SubstExpr</span><span class="p">({</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">NatLitExpr</span><span class="p">(</span><span class="mi">2</span><span class="p">)},</span> <span class="n">parse_expr</span><span class="p">(</span><span class="s2">&quot;x + y&quot;</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">substitute_expr</span><span class="p">(</span><span class="n">expr_ref</span><span class="p">,</span> <span class="n">symbolic</span><span class="o">=</span><span class="nb">set</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">expr_ref</span><span class="o">.</span><span class="n">val</span><span class="p">)</span>
<span class="go">&#39;2 + ((y)[x/2])&#39;</span>
</pre></div>
</div>
<p class="rubric">Implementation notes</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="substitute_internals.html">Documentation of internal classes and functions</a> can be found on another page.</p>
</div>
<p>The implementation is much more sophisticated than the simple approach of doubly-recursive bottom-up substition application.
For comparison, the simple approach is available in <cite>tests/test_substitution.py</cite> and used to test this implementation.
In this module, we implement a different approach using generated local variables for each substitution.</p>
<p>First the <cite>binding</cite> phase, top-down (implemented in <a class="reference internal" href="substitute_internals.html#probably.pgcl.substitute._Binder.bind" title="probably.pgcl.substitute._Binder.bind"><code class="xref py py-func docutils literal notranslate"><span class="pre">_Binder.bind()</span></code></a>):</p>
<ol class="arabic simple">
<li><p>For each substitution expression and each substitution <cite>x/y</cite>, generate a new local variable <cite>t</cite>.</p></li>
<li><p>Run all current substitutions on <cite>y</cite>, generating <cite>y’</cite>.</p></li>
<li><p>Now remember two substitutions: <cite>x/t</cite> and <cite>t/y’</cite>.</p></li>
<li><p>Recurse into the substitutions’ children.</p></li>
</ol>
<p>Then the <cite>resolve</cite> phase (direction is irrelevant, implemented in <a class="reference internal" href="substitute_internals.html#probably.pgcl.substitute._Binder.resolve" title="probably.pgcl.substitute._Binder.resolve"><code class="xref py py-func docutils literal notranslate"><span class="pre">_Binder.resolve()</span></code></a>):</p>
<ol class="arabic simple">
<li><p>On the generated substitutions for local variables, replace all simple ones of the form <cite>t1/t2</cite>, resolving <cite>t2</cite> recursively. Now the object references to be inserted in the AST are final (not necessarily nested objects).</p></li>
<li><p>Now we update the objects to be inserted in the AST, i.e. all replacements of the form <cite>t1/r</cite> for general expressions <cite>r</cite> are updated by replacing all locals <cite>t_i</cite> occuring in <cite>r</cite>. All substitutions are now final.</p></li>
<li><p>Replace all locals in the expression itself.</p></li>
</ol>
<p>Except for step 1 of the <cite>resolve</cite> phase, all phases clearly take linear time.
Step 1 of <cite>resolve</cite> is only run for simple chains of substitutions with no nested locals (e.g. generated from <code class="docutils literal notranslate"><span class="pre">x[x/y][y/z]</span></code>), and the step also amortizes lookups.
So basically we have linear runtime.</p>
<p>This implementation was very loosely inspired by an article <a class="footnote-reference brackets" href="#locallynameless" id="id9">5</a> on “locally nameless” substitution based on the awesomely titled paper “I am not a Number — I am a Free Variable” <a class="footnote-reference brackets" href="#haskell2004" id="id10">6</a>.</p>
<p class="rubric">Footnotes</p>
<dl class="footnote brackets">
<dt class="label" id="locallynameless"><span class="brackets"><a class="fn-backref" href="#id9">5</a></span></dt>
<dd><p><a class="reference external" href="https://boarders.github.io/posts/locally-nameless/">https://boarders.github.io/posts/locally-nameless/</a></p>
</dd>
<dt class="label" id="haskell2004"><span class="brackets"><a class="fn-backref" href="#id10">6</a></span></dt>
<dd><p>“I am not a number: I am a free variable” (2004) by McBride and McKinna.</p>
</dd>
</dl>
<dl class="py function">
<dt id="probably.pgcl.substitute.substitute_expr">
<code class="sig-prename descclassname">probably.pgcl.substitute.</code><code class="sig-name descname">substitute_expr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">expr_ref</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">symbolic</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">deepcopy</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/substitute.html#substitute_expr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.substitute.substitute_expr" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply substitutions in this expression/expectation.
After execution, the <cite>expr_ref</cite> contains no <code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code> anywhere except directly around <cite>symbolic</cite> variables.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>expr_ref</strong> (<a class="reference internal" href="util.html#probably.util.ref.Mut" title="probably.util.ref.Mut"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mut</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]]) – The reference to the expression to be modified.</p></li>
<li><p><strong>symbolic</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.FrozenSet" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">FrozenSet</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]]) – The set of symbolic variables. See the module description.</p></li>
<li><p><strong>deepcopy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – Whether to call <cite>deepcopy</cite> on each replacement, i.e. not reuse any AST objects in substitutions.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="probably.pgcl.substitute.substitute_constants_expr">
<code class="sig-prename descclassname">probably.pgcl.substitute.</code><code class="sig-name descname">substitute_constants_expr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">program</span></em>, <em class="sig-param"><span class="n">expr_ref</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">symbolic</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/substitute.html#substitute_constants_expr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.substitute.substitute_constants_expr" title="Permalink to this definition">¶</a></dt>
<dd><p>Substitute constants in this expression/expectation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>program</strong> (<a class="reference internal" href="#probably.pgcl.ast.Program" title="probably.pgcl.ast.Program"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – The program with variable declarations.</p></li>
<li><p><strong>expr_ref</strong> (<a class="reference internal" href="util.html#probably.util.ref.Mut" title="probably.util.ref.Mut"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mut</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]]) – The reference to the expression to be modified.</p></li>
<li><p><strong>symbolic</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.FrozenSet" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">FrozenSet</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]]) – The set of symbolic variables. See the module description.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="probably.pgcl.substitute.substitute_constants">
<code class="sig-prename descclassname">probably.pgcl.substitute.</code><code class="sig-name descname">substitute_constants</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">program</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">symbolic</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/substitute.html#substitute_constants"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.substitute.substitute_constants" title="Permalink to this definition">¶</a></dt>
<dd><p>Substitute constants in this program.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">probably.pgcl.parser</span> <span class="kn">import</span> <span class="n">parse_pgcl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;const x := 23; nat y; nat z; y := x; z := y&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">substitute_constants</span><span class="p">(</span><span class="n">program</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span><span class="o">.</span><span class="n">instructions</span>
<span class="go">[AsgnInstr(lhs=&#39;y&#39;, rhs=NatLitExpr(23)), AsgnInstr(lhs=&#39;z&#39;, rhs=VarExpr(&#39;y&#39;))]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>program</strong> (<a class="reference internal" href="#probably.pgcl.ast.Program" title="probably.pgcl.ast.Program"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – The program to be modified.</p></li>
<li><p><strong>symbolic</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.FrozenSet" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">FrozenSet</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]]) – The set of symbolic variables. See the module description.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<span class="target" id="module-probably.pgcl.simplify"></span><div class="section" id="expression-simplification">
<h2>Expression Simplification<a class="headerlink" href="#expression-simplification" title="Permalink to this headline">¶</a></h2>
<p>Expressions and expectations become ugly after wp calculation?
Your program has dumb expressions a toddler could simplify?
This is the right place for you!</p>
<dl class="py function">
<dt id="probably.pgcl.simplify.simplifying_and">
<code class="sig-prename descclassname">probably.pgcl.simplify.</code><code class="sig-name descname">simplifying_and</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">lhs</span></em>, <em class="sig-param"><span class="n">rhs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/simplify.html#simplifying_and"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.simplify.simplifying_and" title="Permalink to this definition">¶</a></dt>
<dd><p>Combine with <cite>Binop.AND</cite>, but simplify when one operand is <cite>BoolLitExpr(True)</cite>.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">simplifying_and</span><span class="p">(</span><span class="n">BoolLitExpr</span><span class="p">(</span><span class="kc">True</span><span class="p">),</span> <span class="n">VarExpr</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">))</span>
<span class="go">VarExpr(&#39;x&#39;)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lhs</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]) – </p></li>
<li><p><strong>rhs</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="probably.pgcl.simplify.simplifying_plus">
<code class="sig-prename descclassname">probably.pgcl.simplify.</code><code class="sig-name descname">simplifying_plus</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">lhs</span></em>, <em class="sig-param"><span class="n">rhs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/simplify.html#simplifying_plus"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.simplify.simplifying_plus" title="Permalink to this definition">¶</a></dt>
<dd><p>Combine with <code class="docutils literal notranslate"><span class="pre">Binop.PLUS</span></code>, but simplify when one operand is
<code class="docutils literal notranslate"><span class="pre">NatLitExpr(0)</span></code> or both operands are <code class="docutils literal notranslate"><span class="pre">NatLitExpr</span></code>.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">simplifying_plus</span><span class="p">(</span><span class="n">NatLitExpr</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">VarExpr</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">))</span>
<span class="go">VarExpr(&#39;x&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">simplifying_plus</span><span class="p">(</span><span class="n">NatLitExpr</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="n">NatLitExpr</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="go">NatLitExpr(7)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lhs</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]) – </p></li>
<li><p><strong>rhs</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="probably.pgcl.simplify.simplifying_times">
<code class="sig-prename descclassname">probably.pgcl.simplify.</code><code class="sig-name descname">simplifying_times</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">lhs</span></em>, <em class="sig-param"><span class="n">rhs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/simplify.html#simplifying_times"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.simplify.simplifying_times" title="Permalink to this definition">¶</a></dt>
<dd><p>Combine with <code class="docutils literal notranslate"><span class="pre">Binop.TIMES</span></code>, but simplify when one operand is <code class="docutils literal notranslate"><span class="pre">FloatLitExpr(&quot;1.0&quot;)</span></code>.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">simplifying_times</span><span class="p">(</span><span class="n">FloatLitExpr</span><span class="p">(</span><span class="s2">&quot;1.0&quot;</span><span class="p">),</span> <span class="n">VarExpr</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">))</span>
<span class="go">VarExpr(&#39;x&#39;)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lhs</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]) – </p></li>
<li><p><strong>rhs</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="probably.pgcl.simplify.simplifying_subst">
<code class="sig-prename descclassname">probably.pgcl.simplify.</code><code class="sig-name descname">simplifying_subst</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">subst</span></em>, <em class="sig-param"><span class="n">expr</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/simplify.html#simplifying_subst"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.simplify.simplifying_subst" title="Permalink to this definition">¶</a></dt>
<dd><p>Only create a <code class="docutils literal notranslate"><span class="pre">SubstExpr</span></code> around <cite>expr</cite> if <cite>expr</cite> is not a simple literal.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">simplifying_subst</span><span class="p">(</span><span class="nb">dict</span><span class="p">(),</span> <span class="n">FloatLitExpr</span><span class="p">(</span><span class="s2">&quot;1.0&quot;</span><span class="p">))</span>
<span class="go">FloatLitExpr(&quot;1.0&quot;)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subst</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]]) – </p></li>
<li><p><strong>expr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="probably.pgcl.simplify.simplifying_neg">
<code class="sig-prename descclassname">probably.pgcl.simplify.</code><code class="sig-name descname">simplifying_neg</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">expr</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/simplify.html#simplifying_neg"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.simplify.simplifying_neg" title="Permalink to this definition">¶</a></dt>
<dd><p>Negate the given Boolean expression. If we already have a negation, unwrap it.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">simplifying_neg</span><span class="p">(</span><span class="n">UnopExpr</span><span class="p">(</span><span class="n">Unop</span><span class="o">.</span><span class="n">NEG</span><span class="p">,</span> <span class="n">VarExpr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">)))</span>
<span class="go">VarExpr(&#39;x&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">simplifying_neg</span><span class="p">(</span><span class="n">VarExpr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">))</span>
<span class="go">UnopExpr(operator=Unop.NEG, expr=VarExpr(&#39;x&#39;))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>expr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.simplify.SnfExpectationTransformerProduct">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.simplify.</code><code class="sig-name descname">SnfExpectationTransformerProduct</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">guard</span></em>, <em class="sig-param"><span class="n">prob</span></em>, <em class="sig-param"><span class="n">subst</span></em>, <em class="sig-param"><span class="n">ticks</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/simplify.html#SnfExpectationTransformerProduct"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.simplify.SnfExpectationTransformerProduct" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#probably.pgcl.simplify.SnfExpectationTransformer" title="probably.pgcl.simplify.SnfExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">SnfExpectationTransformer</span></code></a> represents a list of
<a class="reference internal" href="#probably.pgcl.simplify.SnfExpectationTransformerProduct" title="probably.pgcl.simplify.SnfExpectationTransformerProduct"><code class="xref py py-class docutils literal notranslate"><span class="pre">SnfExpectationTransformerProduct</span></code></a>.</p>
<p>The multiplication operator (<code class="docutils literal notranslate"><span class="pre">*</span></code>) is implemented, and returns the product
of two objects. However, only at most one of the operands must have a
non-empty set of substitutions.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">SnfExpectationTransformerProduct</span><span class="o">.</span><span class="n">from_iverson</span><span class="p">(</span><span class="n">BoolLitExpr</span><span class="p">(</span><span class="kc">True</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">SnfExpectationTransformerProduct</span><span class="p">(</span><span class="n">guard</span><span class="o">=</span><span class="n">BoolLitExpr</span><span class="p">(</span><span class="kc">True</span><span class="p">),</span> <span class="n">prob</span><span class="o">=</span><span class="n">FloatLitExpr</span><span class="p">(</span><span class="s2">&quot;5.0&quot;</span><span class="p">),</span> <span class="n">subst</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ticks</span><span class="o">=</span><span class="n">TickExpr</span><span class="p">(</span><span class="n">NatLitExpr</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">SnfExpectationTransformerProduct</span><span class="p">(</span><span class="n">guard</span><span class="o">=</span><span class="n">BoolLitExpr</span><span class="p">(</span><span class="kc">False</span><span class="p">),</span> <span class="n">prob</span><span class="o">=</span><span class="n">FloatLitExpr</span><span class="p">(</span><span class="s2">&quot;2.0&quot;</span><span class="p">),</span> <span class="n">subst</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ticks</span><span class="o">=</span><span class="n">TickExpr</span><span class="p">(</span><span class="n">NatLitExpr</span><span class="p">(</span><span class="mi">5</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">a</span> <span class="o">*</span> <span class="n">b</span><span class="p">)</span>
<span class="go">[true] * 5.0 * tick(1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">a</span> <span class="o">*</span> <span class="n">b</span> <span class="o">*</span> <span class="n">c</span><span class="p">)</span>
<span class="go">[false] * (5.0 * 2.0) * tick(6)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">SnfExpectationTransformerProduct</span><span class="p">(</span><span class="n">guard</span><span class="o">=</span><span class="n">BoolLitExpr</span><span class="p">(</span><span class="kc">True</span><span class="p">),</span> <span class="n">prob</span><span class="o">=</span><span class="n">FloatLitExpr</span><span class="p">(</span><span class="s2">&quot;2.0&quot;</span><span class="p">),</span> <span class="n">subst</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">VarExpr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">)},</span> <span class="n">ticks</span><span class="o">=</span><span class="n">TickExpr</span><span class="p">(</span><span class="n">NatLitExpr</span><span class="p">(</span><span class="mi">0</span><span class="p">))))</span>
<span class="go">[true] * 2.0 * (𝑋)[x/y]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>guard</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]) – </p></li>
<li><p><strong>prob</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]) – </p></li>
<li><p><strong>subst</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]]]) – </p></li>
<li><p><strong>ticks</strong> (<a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="probably.pgcl.simplify.SnfExpectationTransformerProduct.guard">
<code class="sig-name descname">guard</code><em class="property">: Union<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr">probably.pgcl.ast.VarExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr">probably.pgcl.ast.BoolLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr">probably.pgcl.ast.NatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr">probably.pgcl.ast.FloatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr">probably.pgcl.ast.UnopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr">probably.pgcl.ast.BinopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr">probably.pgcl.ast.UniformExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr">probably.pgcl.ast.CategoricalExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr">probably.pgcl.ast.SubstExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr">probably.pgcl.ast.TickExpr</a><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.simplify.SnfExpectationTransformerProduct.guard" title="Permalink to this definition">¶</a></dt>
<dd><p>The boolean guard expression.</p>
</dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.simplify.SnfExpectationTransformerProduct.prob">
<code class="sig-name descname">prob</code><em class="property">: Union<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr">probably.pgcl.ast.VarExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr">probably.pgcl.ast.BoolLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr">probably.pgcl.ast.NatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr">probably.pgcl.ast.FloatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr">probably.pgcl.ast.UnopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr">probably.pgcl.ast.BinopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr">probably.pgcl.ast.UniformExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr">probably.pgcl.ast.CategoricalExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr">probably.pgcl.ast.SubstExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr">probably.pgcl.ast.TickExpr</a><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.simplify.SnfExpectationTransformerProduct.prob" title="Permalink to this definition">¶</a></dt>
<dd><p>The probability without any Iverson brackets or
<a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">probably.pgcl.ast.TickExpr</span></code></a>. It has types
<a class="reference internal" href="#probably.pgcl.ast.FloatType" title="probably.pgcl.ast.FloatType"><code class="xref py py-class docutils literal notranslate"><span class="pre">probably.pgcl.ast.FloatType</span></code></a> or <a class="reference internal" href="#probably.pgcl.ast.NatType" title="probably.pgcl.ast.NatType"><code class="xref py py-class docutils literal notranslate"><span class="pre">probably.pgcl.ast.NatType</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.simplify.SnfExpectationTransformerProduct.subst">
<code class="sig-name descname">subst</code><em class="property">: Optional<span class="p">[</span>Dict<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">, </span>Union<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr">probably.pgcl.ast.VarExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr">probably.pgcl.ast.BoolLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr">probably.pgcl.ast.NatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr">probably.pgcl.ast.FloatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr">probably.pgcl.ast.UnopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr">probably.pgcl.ast.BinopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr">probably.pgcl.ast.UniformExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr">probably.pgcl.ast.CategoricalExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr">probably.pgcl.ast.SubstExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr">probably.pgcl.ast.TickExpr</a><span class="p">]</span><span class="p">]</span><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.simplify.SnfExpectationTransformerProduct.subst" title="Permalink to this definition">¶</a></dt>
<dd><p>Representing the (optional) post-expectation and substitutions applied to it.</p>
</dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.simplify.SnfExpectationTransformerProduct.ticks">
<code class="sig-name descname">ticks</code><em class="property">: <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr">probably.pgcl.ast.TickExpr</a></em><a class="headerlink" href="#probably.pgcl.simplify.SnfExpectationTransformerProduct.ticks" title="Permalink to this definition">¶</a></dt>
<dd><p>Sum of ticks in this part.</p>
</dd></dl>

<dl class="py method">
<dt id="probably.pgcl.simplify.SnfExpectationTransformerProduct.from_iverson">
<em class="property">static </em><code class="sig-name descname">from_iverson</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">guard</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/simplify.html#SnfExpectationTransformerProduct.from_iverson"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.simplify.SnfExpectationTransformerProduct.from_iverson" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new value <code class="docutils literal notranslate"><span class="pre">guard</span> <span class="pre">*</span> <span class="pre">1.0</span> <span class="pre">*</span> <span class="pre">tick(1)</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>guard</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#probably.pgcl.simplify.SnfExpectationTransformerProduct" title="probably.pgcl.simplify.SnfExpectationTransformerProduct"><code class="xref py py-class docutils literal notranslate"><span class="pre">SnfExpectationTransformerProduct</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="probably.pgcl.simplify.SnfExpectationTransformerProduct.from_prob">
<em class="property">static </em><code class="sig-name descname">from_prob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">expr</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/simplify.html#SnfExpectationTransformerProduct.from_prob"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.simplify.SnfExpectationTransformerProduct.from_prob" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new value from just the probability.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>expr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#probably.pgcl.simplify.SnfExpectationTransformerProduct" title="probably.pgcl.simplify.SnfExpectationTransformerProduct"><code class="xref py py-class docutils literal notranslate"><span class="pre">SnfExpectationTransformerProduct</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="probably.pgcl.simplify.SnfExpectationTransformerProduct.from_subst">
<em class="property">static </em><code class="sig-name descname">from_subst</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">subst</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/simplify.html#SnfExpectationTransformerProduct.from_subst"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.simplify.SnfExpectationTransformerProduct.from_subst" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new value from the substitution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>subst</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]]) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#probably.pgcl.simplify.SnfExpectationTransformerProduct" title="probably.pgcl.simplify.SnfExpectationTransformerProduct"><code class="xref py py-class docutils literal notranslate"><span class="pre">SnfExpectationTransformerProduct</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="probably.pgcl.simplify.SnfExpectationTransformerProduct.from_ticks">
<em class="property">static </em><code class="sig-name descname">from_ticks</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ticks</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/simplify.html#SnfExpectationTransformerProduct.from_ticks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.simplify.SnfExpectationTransformerProduct.from_ticks" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new value from ticks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ticks</strong> (<a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#probably.pgcl.simplify.SnfExpectationTransformerProduct" title="probably.pgcl.simplify.SnfExpectationTransformerProduct"><code class="xref py py-class docutils literal notranslate"><span class="pre">SnfExpectationTransformerProduct</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="probably.pgcl.simplify.SnfExpectationTransformerProduct.substitute">
<code class="sig-name descname">substitute</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">subst</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/simplify.html#SnfExpectationTransformerProduct.substitute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.simplify.SnfExpectationTransformerProduct.substitute" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply the substitution to this value.</p>
<p>This object’s <a class="reference internal" href="#probably.pgcl.simplify.SnfExpectationTransformerProduct.subst" title="probably.pgcl.simplify.SnfExpectationTransformerProduct.subst"><code class="xref py py-data docutils literal notranslate"><span class="pre">subst</span></code></a> must be empty!</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>subst</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]]) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#probably.pgcl.simplify.SnfExpectationTransformerProduct" title="probably.pgcl.simplify.SnfExpectationTransformerProduct"><code class="xref py py-class docutils literal notranslate"><span class="pre">SnfExpectationTransformerProduct</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.simplify.SnfExpectationTransformer">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.simplify.</code><code class="sig-name descname">SnfExpectationTransformer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">values</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/simplify.html#SnfExpectationTransformer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.simplify.SnfExpectationTransformer" title="Permalink to this definition">¶</a></dt>
<dd><p>An expectation transformer
(<a class="reference internal" href="#probably.pgcl.wp.ExpectationTransformer" title="probably.pgcl.wp.ExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">probably.pgcl.wp.ExpectationTransformer</span></code></a>) is in <em>summation normal
form (SNF)</em> if it is a sum of products
(<a class="reference internal" href="#probably.pgcl.simplify.SnfExpectationTransformerProduct" title="probably.pgcl.simplify.SnfExpectationTransformerProduct"><code class="xref py py-class docutils literal notranslate"><span class="pre">SnfExpectationTransformerProduct</span></code></a>). This class can be accessed just
like a list over <a class="reference internal" href="#probably.pgcl.simplify.SnfExpectationTransformerProduct" title="probably.pgcl.simplify.SnfExpectationTransformerProduct"><code class="xref py py-class docutils literal notranslate"><span class="pre">SnfExpectationTransformerProduct</span></code></a>.</p>
<p>You can create a summation normal form expectation transformer from an
<code class="xref py py-class docutils literal notranslate"><span class="pre">Expr</span></code> using <a class="reference internal" href="#probably.pgcl.simplify.normalize_expectation_transformer" title="probably.pgcl.simplify.normalize_expectation_transformer"><code class="xref py py-func docutils literal notranslate"><span class="pre">normalize_expectation_transformer()</span></code></a>.</p>
<p>The multiplication operator is implemented (<code class="docutils literal notranslate"><span class="pre">*</span></code>), but only one operand may
include substitutions. This is always the case for transformers generated
from weakest pre-expectation semantics (see <a class="reference internal" href="#module-probably.pgcl.wp" title="probably.pgcl.wp"><code class="xref py py-mod docutils literal notranslate"><span class="pre">probably.pgcl.wp</span></code></a>).</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">SnfExpectationTransformerProduct</span><span class="o">.</span><span class="n">from_iverson</span><span class="p">(</span><span class="n">BoolLitExpr</span><span class="p">(</span><span class="kc">True</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">SnfExpectationTransformerProduct</span><span class="o">.</span><span class="n">from_prob</span><span class="p">(</span><span class="n">FloatLitExpr</span><span class="p">(</span><span class="s2">&quot;0.5&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">SnfExpectationTransformerProduct</span><span class="o">.</span><span class="n">from_subst</span><span class="p">({</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">VarExpr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">)})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">SnfExpectationTransformer</span><span class="p">([</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">]))</span>
<span class="go">λ𝑋. [true] * 1.0 + [true] * 0.5 + [true] * 1.0 * (𝑋)[x/y]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>values</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference internal" href="#probably.pgcl.simplify.SnfExpectationTransformerProduct" title="probably.pgcl.simplify.SnfExpectationTransformerProduct"><code class="xref py py-class docutils literal notranslate"><span class="pre">SnfExpectationTransformerProduct</span></code></a>]) – </p>
</dd>
</dl>
<dl class="py method">
<dt id="probably.pgcl.simplify.SnfExpectationTransformer.from_iverson">
<em class="property">static </em><code class="sig-name descname">from_iverson</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">guard</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/simplify.html#SnfExpectationTransformer.from_iverson"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.simplify.SnfExpectationTransformer.from_iverson" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new value <code class="docutils literal notranslate"><span class="pre">guard</span> <span class="pre">*</span> <span class="pre">1.0</span> <span class="pre">*</span> <span class="pre">tick(1)</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>guard</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#probably.pgcl.simplify.SnfExpectationTransformer" title="probably.pgcl.simplify.SnfExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">SnfExpectationTransformer</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="probably.pgcl.simplify.SnfExpectationTransformer.from_prob">
<em class="property">static </em><code class="sig-name descname">from_prob</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">expectation</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/simplify.html#SnfExpectationTransformer.from_prob"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.simplify.SnfExpectationTransformer.from_prob" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new value with just the probability.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>expectation</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#probably.pgcl.simplify.SnfExpectationTransformer" title="probably.pgcl.simplify.SnfExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">SnfExpectationTransformer</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="probably.pgcl.simplify.SnfExpectationTransformer.from_subst">
<em class="property">static </em><code class="sig-name descname">from_subst</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">subst</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/simplify.html#SnfExpectationTransformer.from_subst"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.simplify.SnfExpectationTransformer.from_subst" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new value with just the substitution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>subst</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]]) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#probably.pgcl.simplify.SnfExpectationTransformer" title="probably.pgcl.simplify.SnfExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">SnfExpectationTransformer</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="probably.pgcl.simplify.SnfExpectationTransformer.from_ticks">
<em class="property">static </em><code class="sig-name descname">from_ticks</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ticks</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/simplify.html#SnfExpectationTransformer.from_ticks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.simplify.SnfExpectationTransformer.from_ticks" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new value with just the ticks value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ticks</strong> (<a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#probably.pgcl.simplify.SnfExpectationTransformer" title="probably.pgcl.simplify.SnfExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">SnfExpectationTransformer</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="probably.pgcl.simplify.SnfExpectationTransformer.substitute">
<code class="sig-name descname">substitute</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">subst</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/simplify.html#SnfExpectationTransformer.substitute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.simplify.SnfExpectationTransformer.substitute" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply the subtitution to this expectation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>subst</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]]) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#probably.pgcl.simplify.SnfExpectationTransformer" title="probably.pgcl.simplify.SnfExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">SnfExpectationTransformer</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="probably.pgcl.simplify.normalize_expectation_transformer">
<code class="sig-prename descclassname">probably.pgcl.simplify.</code><code class="sig-name descname">normalize_expectation_transformer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">program</span></em>, <em class="sig-param"><span class="n">expectation_transformer</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/simplify.html#normalize_expectation_transformer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.simplify.normalize_expectation_transformer" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a well-typed expectation transformer, return a
<a class="reference internal" href="#probably.pgcl.simplify.SnfExpectationTransformer" title="probably.pgcl.simplify.SnfExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">SnfExpectationTransformer</span></code></a>, i.e. an expectation transformer in
<em>summation normal form</em> (SNF).</p>
<p>Important: A guard statement may only appear in sums and products, but not
anywhere in the operands of a minus.</p>
<p>Simplifying methods are used whenever possible: <a class="reference internal" href="#probably.pgcl.simplify.simplifying_and" title="probably.pgcl.simplify.simplifying_and"><code class="xref py py-func docutils literal notranslate"><span class="pre">simplifying_and()</span></code></a>,
<a class="reference internal" href="#probably.pgcl.simplify.simplifying_plus" title="probably.pgcl.simplify.simplifying_plus"><code class="xref py py-func docutils literal notranslate"><span class="pre">simplifying_plus()</span></code></a>, <a class="reference internal" href="#probably.pgcl.simplify.simplifying_times" title="probably.pgcl.simplify.simplifying_times"><code class="xref py py-func docutils literal notranslate"><span class="pre">simplifying_times()</span></code></a>, and
<a class="reference internal" href="#probably.pgcl.simplify.simplifying_subst" title="probably.pgcl.simplify.simplifying_subst"><code class="xref py py-func docutils literal notranslate"><span class="pre">simplifying_subst()</span></code></a>.</p>
<p>See <a class="reference internal" href="#probably.pgcl.simplify.normalize_expectation" title="probably.pgcl.simplify.normalize_expectation"><code class="xref py py-func docutils literal notranslate"><span class="pre">normalize_expectation()</span></code></a> for a lot of examples.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>program</strong> (<a class="reference internal" href="#probably.pgcl.ast.Program" title="probably.pgcl.ast.Program"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – </p></li>
<li><p><strong>expectation_transformer</strong> (<a class="reference internal" href="#probably.pgcl.wp.ExpectationTransformer" title="probably.pgcl.wp.ExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationTransformer</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.simplify.SnfExpectationTransformer" title="probably.pgcl.simplify.SnfExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">SnfExpectationTransformer</span></code></a>, <a class="reference internal" href="#probably.pgcl.check.CheckFail" title="probably.pgcl.check.CheckFail"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckFail</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="probably.pgcl.simplify.normalize_expectation">
<code class="sig-prename descclassname">probably.pgcl.simplify.</code><code class="sig-name descname">normalize_expectation</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">program</span></em>, <em class="sig-param"><span class="n">expectation</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/simplify.html#normalize_expectation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.simplify.normalize_expectation" title="Permalink to this definition">¶</a></dt>
<dd><p>Specialized version of <a class="reference internal" href="#probably.pgcl.simplify.normalize_expectation_transformer" title="probably.pgcl.simplify.normalize_expectation_transformer"><code class="xref py py-func docutils literal notranslate"><span class="pre">normalize_expectation_transformer()</span></code></a>.</p>
<p>Translate this expectation into summation normal form. The result is a
<a class="reference internal" href="#probably.pgcl.simplify.SnfExpectationTransformer" title="probably.pgcl.simplify.SnfExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">SnfExpectationTransformer</span></code></a> where
<a class="reference internal" href="#probably.pgcl.simplify.SnfExpectationTransformerProduct.subst" title="probably.pgcl.simplify.SnfExpectationTransformerProduct.subst"><code class="xref py py-data docutils literal notranslate"><span class="pre">SnfExpectationTransformerProduct.subst</span></code></a> are always empty.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">.ast</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">.parser</span> <span class="kn">import</span> <span class="n">parse_pgcl</span><span class="p">,</span> <span class="n">parse_expectation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;bool x; nat c&quot;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">expectation</span> <span class="o">=</span> <span class="n">parse_expectation</span><span class="p">(</span><span class="s2">&quot;[true] * ([false] + 1.0)&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">normalize_expectation</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="n">expectation</span><span class="p">))</span>
<span class="go">λ𝑋. [false] * 1.0 + [true] * 1.0</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">prob</span> <span class="o">=</span> <span class="n">FloatLitExpr</span><span class="p">(</span><span class="s2">&quot;10&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">normalize_expectation</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="n">BinopExpr</span><span class="p">(</span><span class="n">Binop</span><span class="o">.</span><span class="n">TIMES</span><span class="p">,</span> <span class="n">prob</span><span class="p">,</span> <span class="n">prob</span><span class="p">)))</span>
<span class="go">λ𝑋. [true] * (10 * 10)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">normalize_expectation</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="n">BinopExpr</span><span class="p">(</span><span class="n">Binop</span><span class="o">.</span><span class="n">TIMES</span><span class="p">,</span> <span class="n">UnopExpr</span><span class="p">(</span><span class="n">Unop</span><span class="o">.</span><span class="n">IVERSON</span><span class="p">,</span> <span class="n">VarExpr</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)),</span> <span class="n">prob</span><span class="p">))</span>
<span class="go">[SnfExpectationTransformerProduct(guard=VarExpr(&#39;x&#39;), prob=FloatLitExpr(&quot;10&quot;), subst=None, ticks=TickExpr(expr=NatLitExpr(0)))]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">expectation</span> <span class="o">=</span> <span class="n">parse_expectation</span><span class="p">(</span><span class="s2">&quot;[c &lt; 3] * c&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">normalize_expectation</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="n">expectation</span><span class="p">))</span>
<span class="go">λ𝑋. [c &lt; 3] * c</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">expectation</span> <span class="o">=</span> <span class="n">parse_expectation</span><span class="p">(</span><span class="s2">&quot;1 - 5&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">normalize_expectation</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="n">expectation</span><span class="p">))</span>
<span class="go">λ𝑋. [true] * (1 - 5)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">expectation</span> <span class="o">=</span> <span class="n">parse_expectation</span><span class="p">(</span><span class="s2">&quot;c - 0.5&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">normalize_expectation</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="n">expectation</span><span class="p">))</span>
<span class="go">λ𝑋. [true] * (c - 0.5)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>program</strong> (<a class="reference internal" href="#probably.pgcl.ast.Program" title="probably.pgcl.ast.Program"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – </p></li>
<li><p><strong>expectation</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.simplify.SnfExpectationTransformer" title="probably.pgcl.simplify.SnfExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">SnfExpectationTransformer</span></code></a>, <a class="reference internal" href="#probably.pgcl.check.CheckFail" title="probably.pgcl.check.CheckFail"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckFail</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

</div>
<span class="target" id="module-probably.pgcl.cfg"></span><div class="section" id="control-flow-graph">
<h2>Control-Flow Graph<a class="headerlink" href="#control-flow-graph" title="Permalink to this headline">¶</a></h2>
<p>This module can build up <em>control-flow graphs</em> (CFGs) of pGCL programs and
<em>decompile</em> them back to programs again. The main purpose of this module is the
transformation of a program with arbitrarily nested loops into a program with
one big loop (<a class="reference internal" href="#probably.pgcl.cfg.program_one_big_loop" title="probably.pgcl.cfg.program_one_big_loop"><code class="xref py py-func docutils literal notranslate"><span class="pre">program_one_big_loop()</span></code></a>).</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">probably.pgcl.compiler</span> <span class="kn">import</span> <span class="n">compile_pgcl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">compile_pgcl</span><span class="p">(</span><span class="s2">&quot;nat x; while (x &lt;= 3) { while (x = 0) { x := x + 1; }; if (x = 0) { x := x + 1; x := x + 2; x := x + 3; } </span><span class="si">{}</span><span class="s2"> }&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">graph</span> <span class="o">=</span> <span class="n">ControlFlowGraph</span><span class="o">.</span><span class="n">from_instructions</span><span class="p">(</span><span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">graph</span><span class="o">.</span><span class="n">render_dot</span><span class="p">()</span><span class="o">.</span><span class="n">source</span>
<span class="go">&#39;digraph...&#39;</span>
</pre></div>
</div>
<p>You can see the control-flow graph for this program visualized using GraphViz
below. It was created with the <a class="reference internal" href="#probably.pgcl.cfg.ControlFlowGraph.render_dot" title="probably.pgcl.cfg.ControlFlowGraph.render_dot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ControlFlowGraph.render_dot()</span></code></a> method. See
its documentation for more information on how to visualize a control-flow graph.</p>
<img alt="_images/cfg.svg" class="align-center" src="_images/cfg.svg" /><dl class="py class">
<dt id="probably.pgcl.cfg.TerminatorKind">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.cfg.</code><code class="sig-name descname">TerminatorKind</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/cfg.html#TerminatorKind"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.cfg.TerminatorKind" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the <a class="reference internal" href="#probably.pgcl.cfg.Terminator" title="probably.pgcl.cfg.Terminator"><code class="xref py py-class docutils literal notranslate"><span class="pre">Terminator</span></code></a> branches on a Boolean condition or throws a
die with a probability given by an expression.</p>
<dl class="py attribute">
<dt id="probably.pgcl.cfg.TerminatorKind.BOOLEAN">
<code class="sig-name descname">BOOLEAN</code><em class="property"> = 1</em><a class="headerlink" href="#probably.pgcl.cfg.TerminatorKind.BOOLEAN" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.cfg.TerminatorKind.PROBABILISTIC">
<code class="sig-name descname">PROBABILISTIC</code><em class="property"> = 2</em><a class="headerlink" href="#probably.pgcl.cfg.TerminatorKind.PROBABILISTIC" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.cfg.Terminator">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.cfg.</code><code class="sig-name descname">Terminator</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">kind</span></em>, <em class="sig-param"><span class="n">condition</span></em>, <em class="sig-param"><span class="n">if_true</span></em>, <em class="sig-param"><span class="n">if_false</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/cfg.html#Terminator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.cfg.Terminator" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#probably.pgcl.cfg.BasicBlock" title="probably.pgcl.cfg.BasicBlock"><code class="xref py py-class docutils literal notranslate"><span class="pre">BasicBlock</span></code></a> is terminated by a <em>terminator</em>, which says where to
go next after executing all assignment statements.</p>
<p>If a successor block id is <cite>None</cite>, it indicates program termination.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kind</strong> (<a class="reference internal" href="#probably.pgcl.cfg.TerminatorKind" title="probably.pgcl.cfg.TerminatorKind"><code class="xref py py-class docutils literal notranslate"><span class="pre">TerminatorKind</span></code></a>) – </p></li>
<li><p><strong>condition</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]) – </p></li>
<li><p><strong>if_true</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.NewType" title="(in Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">NewType()</span></code></a>(<code class="xref py py-data docutils literal notranslate"><span class="pre">BasicBlockId</span></code>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>)]) – </p></li>
<li><p><strong>if_false</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.NewType" title="(in Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">NewType()</span></code></a>(<code class="xref py py-data docutils literal notranslate"><span class="pre">BasicBlockId</span></code>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>)]) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="probably.pgcl.cfg.Terminator.LEAF">
<code class="sig-name descname">LEAF</code><em class="property">: <a class="reference internal" href="#probably.pgcl.cfg.Terminator" title="probably.pgcl.cfg.Terminator">probably.pgcl.cfg.Terminator</a></em><em class="property"> = Terminator(kind=&lt;TerminatorKind.BOOLEAN: 1&gt;, condition=BoolLitExpr(True), if_true=None, if_false=None)</em><a class="headerlink" href="#probably.pgcl.cfg.Terminator.LEAF" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="probably.pgcl.cfg.Terminator.goto">
<em class="property">static </em><code class="sig-name descname">goto</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ident</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/cfg.html#Terminator.goto"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.cfg.Terminator.goto" title="Permalink to this definition">¶</a></dt>
<dd><p>Always go to the given block.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ident</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.NewType" title="(in Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">NewType()</span></code></a>(<code class="xref py py-data docutils literal notranslate"><span class="pre">BasicBlockId</span></code>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>)]) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#probably.pgcl.cfg.Terminator" title="probably.pgcl.cfg.Terminator"><code class="xref py py-class docutils literal notranslate"><span class="pre">Terminator</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="probably.pgcl.cfg.Terminator.branch">
<em class="property">static </em><code class="sig-name descname">branch</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cond</span></em>, <em class="sig-param"><span class="n">if_true</span></em>, <em class="sig-param"><span class="n">if_false</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/cfg.html#Terminator.branch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.cfg.Terminator.branch" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a Boolean branching terminator.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cond</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]) – </p></li>
<li><p><strong>if_true</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.NewType" title="(in Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">NewType()</span></code></a>(<code class="xref py py-data docutils literal notranslate"><span class="pre">BasicBlockId</span></code>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>)]) – </p></li>
<li><p><strong>if_false</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.NewType" title="(in Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">NewType()</span></code></a>(<code class="xref py py-data docutils literal notranslate"><span class="pre">BasicBlockId</span></code>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>)]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#probably.pgcl.cfg.Terminator" title="probably.pgcl.cfg.Terminator"><code class="xref py py-class docutils literal notranslate"><span class="pre">Terminator</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="probably.pgcl.cfg.Terminator.choice">
<em class="property">static </em><code class="sig-name descname">choice</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">expr</span></em>, <em class="sig-param"><span class="n">lhs</span></em>, <em class="sig-param"><span class="n">rhs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/cfg.html#Terminator.choice"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.cfg.Terminator.choice" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a probabilistic choice terminator.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>expr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]) – </p></li>
<li><p><strong>lhs</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.NewType" title="(in Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">NewType()</span></code></a>(<code class="xref py py-data docutils literal notranslate"><span class="pre">BasicBlockId</span></code>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>)]) – </p></li>
<li><p><strong>rhs</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.NewType" title="(in Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">NewType()</span></code></a>(<code class="xref py py-data docutils literal notranslate"><span class="pre">BasicBlockId</span></code>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>)]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#probably.pgcl.cfg.Terminator" title="probably.pgcl.cfg.Terminator"><code class="xref py py-class docutils literal notranslate"><span class="pre">Terminator</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.cfg.Terminator.kind">
<code class="sig-name descname">kind</code><em class="property">: <a class="reference internal" href="#probably.pgcl.cfg.TerminatorKind" title="probably.pgcl.cfg.TerminatorKind">probably.pgcl.cfg.TerminatorKind</a></em><a class="headerlink" href="#probably.pgcl.cfg.Terminator.kind" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.cfg.Terminator.condition">
<code class="sig-name descname">condition</code><em class="property">: Union<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr">probably.pgcl.ast.VarExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr">probably.pgcl.ast.BoolLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr">probably.pgcl.ast.NatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr">probably.pgcl.ast.FloatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr">probably.pgcl.ast.UnopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr">probably.pgcl.ast.BinopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr">probably.pgcl.ast.UniformExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr">probably.pgcl.ast.CategoricalExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr">probably.pgcl.ast.SubstExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr">probably.pgcl.ast.TickExpr</a><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.cfg.Terminator.condition" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.cfg.Terminator.if_true">
<code class="sig-name descname">if_true</code><em class="property">: Optional[NewType.&lt;locals&gt;.new_type]</em><a class="headerlink" href="#probably.pgcl.cfg.Terminator.if_true" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.cfg.Terminator.if_false">
<code class="sig-name descname">if_false</code><em class="property">: Optional[NewType.&lt;locals&gt;.new_type]</em><a class="headerlink" href="#probably.pgcl.cfg.Terminator.if_false" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="probably.pgcl.cfg.Terminator.successors">
<em class="property">property </em><code class="sig-name descname">successors</code><a class="headerlink" href="#probably.pgcl.cfg.Terminator.successors" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of successors of terminator.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.NewType" title="(in Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">NewType()</span></code></a>(<code class="xref py py-data docutils literal notranslate"><span class="pre">BasicBlockId</span></code>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>)]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="probably.pgcl.cfg.Terminator.is_goto">
<code class="sig-name descname">is_goto</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/cfg.html#Terminator.is_goto"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.cfg.Terminator.is_goto" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the condition is constant <cite>True</cite> or both successors are the
same.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="probably.pgcl.cfg.Terminator.substitute">
<code class="sig-name descname">substitute</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">subst</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/cfg.html#Terminator.substitute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.cfg.Terminator.substitute" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply the substitution to this terminator’s successors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>subst</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.NewType" title="(in Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">NewType()</span></code></a>(<code class="xref py py-data docutils literal notranslate"><span class="pre">BasicBlockId</span></code>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>)], <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.NewType" title="(in Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">NewType()</span></code></a>(<code class="xref py py-data docutils literal notranslate"><span class="pre">BasicBlockId</span></code>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>)]]) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="probably.pgcl.cfg.Terminator.flip">
<code class="sig-name descname">flip</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/cfg.html#Terminator.flip"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.cfg.Terminator.flip" title="Permalink to this definition">¶</a></dt>
<dd><p>Flip the condition (by negation using
<a class="reference internal" href="#probably.pgcl.simplify.simplifying_neg" title="probably.pgcl.simplify.simplifying_neg"><code class="xref py py-func docutils literal notranslate"><span class="pre">probably.pgcl.simplify.simplifying_neg()</span></code></a>) and switch both branches
of this terminator. The operation does not change the semantics of the
terminator.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.cfg.BlockType">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.cfg.</code><code class="sig-name descname">BlockType</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/cfg.html#BlockType"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.cfg.BlockType" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#probably.pgcl.cfg.BasicBlock" title="probably.pgcl.cfg.BasicBlock"><code class="xref py py-class docutils literal notranslate"><span class="pre">BasicBlock</span></code></a> has an attached marker type that is used for
back-conversion from a control-flow graph to a structured program, for
pretty-printing the graph, and for debugging.</p>
<p>All successor branches of <cite>forward</cite> blocks eventually converge on the same
block. These are created from any statement except loops. <cite>Loop head</cite> nodes
are the basic blocks created for the loop condition. These are the first
entry into a loop from the program start. <cite>Trampoline</cite> blocks are created by
the <a class="reference internal" href="#probably.pgcl.cfg.one_big_loop" title="probably.pgcl.cfg.one_big_loop"><code class="xref py py-func docutils literal notranslate"><span class="pre">one_big_loop()</span></code></a> transformation only.</p>
<dl class="py attribute">
<dt id="probably.pgcl.cfg.BlockType.FORWARD">
<code class="sig-name descname">FORWARD</code><em class="property"> = 1</em><a class="headerlink" href="#probably.pgcl.cfg.BlockType.FORWARD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.cfg.BlockType.LOOP_HEAD">
<code class="sig-name descname">LOOP_HEAD</code><em class="property"> = 2</em><a class="headerlink" href="#probably.pgcl.cfg.BlockType.LOOP_HEAD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.cfg.BlockType.TRAMPOLINE">
<code class="sig-name descname">TRAMPOLINE</code><em class="property"> = 3</em><a class="headerlink" href="#probably.pgcl.cfg.BlockType.TRAMPOLINE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.cfg.BasicBlock">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.cfg.</code><code class="sig-name descname">BasicBlock</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">typ</span></em>, <em class="sig-param"><span class="n">ident</span></em>, <em class="sig-param"><span class="n">assignments</span></em>, <em class="sig-param"><span class="n">terminator</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/cfg.html#BasicBlock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.cfg.BasicBlock" title="Permalink to this definition">¶</a></dt>
<dd><p>A <em>basic block</em> in the control-flow graph consists of a series of
(unconditional) assignments that are executed in sequence, followed by a
<a class="reference internal" href="#probably.pgcl.cfg.Terminator" title="probably.pgcl.cfg.Terminator"><code class="xref py py-class docutils literal notranslate"><span class="pre">Terminator</span></code></a> that says where to go next (based on some condition).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>typ</strong> (<a class="reference internal" href="#probably.pgcl.cfg.BlockType" title="probably.pgcl.cfg.BlockType"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlockType</span></code></a>) – </p></li>
<li><p><strong>ident</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.NewType" title="(in Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">NewType()</span></code></a>(<code class="xref py py-data docutils literal notranslate"><span class="pre">BasicBlockId</span></code>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>)) – </p></li>
<li><p><strong>assignments</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatLitExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code></a>]]]) – </p></li>
<li><p><strong>terminator</strong> (<a class="reference internal" href="#probably.pgcl.cfg.Terminator" title="probably.pgcl.cfg.Terminator"><code class="xref py py-class docutils literal notranslate"><span class="pre">Terminator</span></code></a>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="probably.pgcl.cfg.BasicBlock.typ">
<code class="sig-name descname">typ</code><em class="property">: <a class="reference internal" href="#probably.pgcl.cfg.BlockType" title="probably.pgcl.cfg.BlockType">probably.pgcl.cfg.BlockType</a></em><a class="headerlink" href="#probably.pgcl.cfg.BasicBlock.typ" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.cfg.BasicBlock.ident">
<code class="sig-name descname">ident</code><em class="property">: NewType.&lt;locals&gt;.new_type</em><a class="headerlink" href="#probably.pgcl.cfg.BasicBlock.ident" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.cfg.BasicBlock.assignments">
<code class="sig-name descname">assignments</code><em class="property">: List<span class="p">[</span>Tuple<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">, </span>Union<span class="p">[</span><a class="reference internal" href="#probably.pgcl.ast.VarExpr" title="probably.pgcl.ast.VarExpr">probably.pgcl.ast.VarExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BoolLitExpr" title="probably.pgcl.ast.BoolLitExpr">probably.pgcl.ast.BoolLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.NatLitExpr" title="probably.pgcl.ast.NatLitExpr">probably.pgcl.ast.NatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.FloatLitExpr" title="probably.pgcl.ast.FloatLitExpr">probably.pgcl.ast.FloatLitExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UnopExpr" title="probably.pgcl.ast.UnopExpr">probably.pgcl.ast.UnopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.BinopExpr" title="probably.pgcl.ast.BinopExpr">probably.pgcl.ast.BinopExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.UniformExpr" title="probably.pgcl.ast.UniformExpr">probably.pgcl.ast.UniformExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.CategoricalExpr" title="probably.pgcl.ast.CategoricalExpr">probably.pgcl.ast.CategoricalExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.SubstExpr" title="probably.pgcl.ast.SubstExpr">probably.pgcl.ast.SubstExpr</a><span class="p">, </span><a class="reference internal" href="#probably.pgcl.ast.TickExpr" title="probably.pgcl.ast.TickExpr">probably.pgcl.ast.TickExpr</a><span class="p">]</span><span class="p">]</span><span class="p">]</span></em><a class="headerlink" href="#probably.pgcl.cfg.BasicBlock.assignments" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.cfg.BasicBlock.terminator">
<code class="sig-name descname">terminator</code><em class="property">: <a class="reference internal" href="#probably.pgcl.cfg.Terminator" title="probably.pgcl.cfg.Terminator">probably.pgcl.cfg.Terminator</a></em><a class="headerlink" href="#probably.pgcl.cfg.BasicBlock.terminator" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="probably.pgcl.cfg.BasicBlock.is_trap">
<code class="sig-name descname">is_trap</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/cfg.html#BasicBlock.is_trap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.cfg.BasicBlock.is_trap" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.cfg.ControlFlowGraph">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.cfg.</code><code class="sig-name descname">ControlFlowGraph</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">entry_id</span></em>, <em class="sig-param"><span class="n">basic_blocks</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/cfg.html#ControlFlowGraph"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.cfg.ControlFlowGraph" title="Permalink to this definition">¶</a></dt>
<dd><p>The control-flow graph consists of an indexed list of <a class="reference internal" href="#probably.pgcl.cfg.BasicBlock" title="probably.pgcl.cfg.BasicBlock"><code class="xref py py-class docutils literal notranslate"><span class="pre">BasicBlock</span></code></a>.</p>
<p>The <a class="reference internal" href="#probably.pgcl.cfg.ControlFlowGraph.render_dot" title="probably.pgcl.cfg.ControlFlowGraph.render_dot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">render_dot()</span></code></a> and <a class="reference internal" href="#probably.pgcl.cfg.ControlFlowGraph.to_networkx" title="probably.pgcl.cfg.ControlFlowGraph.to_networkx"><code class="xref py py-meth docutils literal notranslate"><span class="pre">to_networkx()</span></code></a> methods can be very useful
for debugging and visualization of control-flow graphs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>entry_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.NewType" title="(in Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">NewType()</span></code></a>(<code class="xref py py-data docutils literal notranslate"><span class="pre">BasicBlockId</span></code>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>)) – </p></li>
<li><p><strong>basic_blocks</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference internal" href="#probably.pgcl.cfg.BasicBlock" title="probably.pgcl.cfg.BasicBlock"><code class="xref py py-class docutils literal notranslate"><span class="pre">BasicBlock</span></code></a>]) – </p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="probably.pgcl.cfg.ControlFlowGraph.from_instructions">
<em class="property">static </em><code class="sig-name descname">from_instructions</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">instructions</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/cfg.html#ControlFlowGraph.from_instructions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.cfg.ControlFlowGraph.from_instructions" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the given list of instructions to the corresponding control-flow
graph. The successor of the final generated basic blocks is set to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>If the list of instructions is empty, a graph with a single basic block
will be returned.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">graph</span> <span class="o">=</span> <span class="n">ControlFlowGraph</span><span class="o">.</span><span class="n">from_instructions</span><span class="p">([])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
<span class="go">[BasicBlock(typ=..., ident=0, assignments=[], terminator=Terminator(kind=..., condition=BoolLitExpr(True), if_true=None, if_false=None))]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>instructions</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.SkipInstr" title="probably.pgcl.ast.SkipInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.WhileInstr" title="probably.pgcl.ast.WhileInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.IfInstr" title="probably.pgcl.ast.IfInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.AsgnInstr" title="probably.pgcl.ast.AsgnInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.ChoiceInstr" title="probably.pgcl.ast.ChoiceInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickInstr" title="probably.pgcl.ast.TickInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code></a>]]) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#probably.pgcl.cfg.ControlFlowGraph" title="probably.pgcl.cfg.ControlFlowGraph"><code class="xref py py-class docutils literal notranslate"><span class="pre">ControlFlowGraph</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.cfg.ControlFlowGraph.entry_id">
<code class="sig-name descname">entry_id</code><em class="property">: NewType.&lt;locals&gt;.new_type</em><a class="headerlink" href="#probably.pgcl.cfg.ControlFlowGraph.entry_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="probably.pgcl.cfg.ControlFlowGraph.fresh_block">
<code class="sig-name descname">fresh_block</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/cfg.html#ControlFlowGraph.fresh_block"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.cfg.ControlFlowGraph.fresh_block" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new, empty basic block to the graph of type <cite>forward</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#probably.pgcl.cfg.BasicBlock" title="probably.pgcl.cfg.BasicBlock"><code class="xref py py-class docutils literal notranslate"><span class="pre">BasicBlock</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="probably.pgcl.cfg.ControlFlowGraph.substitute">
<code class="sig-name descname">substitute</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">subst</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">blocks</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/cfg.html#ControlFlowGraph.substitute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.cfg.ControlFlowGraph.substitute" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply the substitutions to all blocks in <cite>blocks</cite> (or all blocks if
<cite>blocks</cite> is <cite>None</cite>).</p>
<p>Throws an exception if the entry point is replaced with <cite>None</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subst</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.NewType" title="(in Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">NewType()</span></code></a>(<code class="xref py py-data docutils literal notranslate"><span class="pre">BasicBlockId</span></code>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>)], <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.NewType" title="(in Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">NewType()</span></code></a>(<code class="xref py py-data docutils literal notranslate"><span class="pre">BasicBlockId</span></code>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>)]]) – </p></li>
<li><p><strong>blocks</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Set" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.NewType" title="(in Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">NewType()</span></code></a>(<code class="xref py py-data docutils literal notranslate"><span class="pre">BasicBlockId</span></code>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>)]]) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="probably.pgcl.cfg.ControlFlowGraph.to_networkx">
<code class="sig-name descname">to_networkx</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/cfg.html#ControlFlowGraph.to_networkx"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.cfg.ControlFlowGraph.to_networkx" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a NetworkX <a class="reference external" href="https://networkx.org/documentation/stable/reference/classes/digraph.html#networkx.DiGraph" title="(in NetworkX v2.5)"><code class="xref py py-class docutils literal notranslate"><span class="pre">networkx.DiGraph</span></code></a> from this control-flow
graph for further analysis.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DiGraph</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="probably.pgcl.cfg.ControlFlowGraph.render_dot">
<code class="sig-name descname">render_dot</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/cfg.html#ControlFlowGraph.render_dot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.cfg.ControlFlowGraph.render_dot" title="Permalink to this definition">¶</a></dt>
<dd><p>Render this control-flow graph as a GraphViz
<a class="reference external" href="https://graphviz.readthedocs.io/en/stable/api.html#graphviz.Digraph" title="(in graphviz v0.16)"><code class="xref py py-class docutils literal notranslate"><span class="pre">graphviz.Digraph</span></code></a>.</p>
<p>The result can be written into a file using
<a class="reference external" href="https://graphviz.readthedocs.io/en/stable/api.html#graphviz.Digraph.render" title="(in graphviz v0.16)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">graphviz.Digraph.render()</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">graph</span><span class="o">.</span><span class="n">render_dot</span><span class="p">()</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s1">&#39;graph.svg&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference external" href="https://graphviz.readthedocs.io/en/stable/api.html#graphviz.Digraph.view" title="(in graphviz v0.16)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">graphviz.Digraph.view()</span></code></a> method can be used to quickly view
a graph:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">graph</span><span class="o">.</span><span class="n">render_dot</span><span class="p">()</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s1">&#39;graph.svg&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Digraph</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="probably.pgcl.cfg.JumpTable">
<em class="property">class </em><code class="sig-prename descclassname">probably.pgcl.cfg.</code><code class="sig-name descname">JumpTable</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">graph</span></em>, <em class="sig-param"><span class="n">pc_var</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/cfg.html#JumpTable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.cfg.JumpTable" title="Permalink to this definition">¶</a></dt>
<dd><p>To implement <a class="reference internal" href="#probably.pgcl.cfg.one_big_loop" title="probably.pgcl.cfg.one_big_loop"><code class="xref py py-func docutils literal notranslate"><span class="pre">one_big_loop()</span></code></a>, we cannot allow non-local gotos. Instead,
we build a jump table that branches on a variable.</p>
<p>Let’s look at a simple example. We start with two blocks: The <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">:=</span> <span class="pre">42</span></code>
block (call it <cite>B1</cite>), and the <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">:=</span> <span class="pre">11</span></code> block (call it <cite>B2</cite>).</p>
<a class="reference internal image-reference" href="_images/cfg-jumptable1.svg"><img alt="_images/cfg-jumptable1.svg" class="align-center" src="_images/cfg-jumptable1.svg" width="330px" /></a>
<p>We’ll connect <cite>B1</cite> and <cite>B2</cite> with the jump table so that <cite>B2</cite> executes after
<cite>B1</cite>. We add one trampoline for <cite>B1</cite> and let <cite>start</cite> enter at that
trampoline. And then let <cite>B1</cite> continue to a new trampoline to <cite>B2</cite>. Note
that the generated jump table is linear in the number of branches. See
<a class="reference internal" href="#probably.pgcl.cfg.JumpTable.finalize" title="probably.pgcl.cfg.JumpTable.finalize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">finalize()</span></code></a> as to why.</p>
<a class="reference internal image-reference" href="_images/cfg-jumptable2.svg"><img alt="_images/cfg-jumptable2.svg" class="align-center" src="_images/cfg-jumptable2.svg" width="600px" /></a>
<p>The <code class="docutils literal notranslate"><span class="pre">goto</span> <span class="pre">3</span></code> block is unreachable and we write a self-loop basic block
that never exits to indicate that.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> (<a class="reference internal" href="#probably.pgcl.cfg.ControlFlowGraph" title="probably.pgcl.cfg.ControlFlowGraph"><code class="xref py py-class docutils literal notranslate"><span class="pre">ControlFlowGraph</span></code></a>) – </p></li>
<li><p><strong>pc_var</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="probably.pgcl.cfg.JumpTable.entry_id">
<code class="sig-name descname">entry_id</code><em class="property">: NewType.&lt;locals&gt;.new_type</em><a class="headerlink" href="#probably.pgcl.cfg.JumpTable.entry_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="probably.pgcl.cfg.JumpTable.error_id">
<code class="sig-name descname">error_id</code><em class="property">: NewType.&lt;locals&gt;.new_type</em><a class="headerlink" href="#probably.pgcl.cfg.JumpTable.error_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="probably.pgcl.cfg.JumpTable.trampoline">
<code class="sig-name descname">trampoline</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">target</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/cfg.html#JumpTable.trampoline"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.cfg.JumpTable.trampoline" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the block id for a new trampoline that sets the program counter
appropiately and then jumps to the jump table entry basic block.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>target</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.NewType" title="(in Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">NewType()</span></code></a>(<code class="xref py py-data docutils literal notranslate"><span class="pre">BasicBlockId</span></code>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>)]) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.NewType" title="(in Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">NewType()</span></code></a>(<code class="xref py py-data docutils literal notranslate"><span class="pre">BasicBlockId</span></code>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="probably.pgcl.cfg.JumpTable.finalize">
<code class="sig-name descname">finalize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/cfg.html#JumpTable.finalize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.cfg.JumpTable.finalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert all jumps into the graph.</p>
<p>The generated jump table intentially only uses strict equality checks
against <cite>pc</cite>. While it is easily possible to generate a binary tree of
comparisons using <span class="math">\(\leq\)</span> (therefore logarithmic size in the number
of jumps), we decide against it. Inequalities make it harder to see
which conditions exclude each other and this makes debugging e.g.
weakest preexpectation generation (see <a class="reference internal" href="#module-probably.pgcl.wp" title="probably.pgcl.wp"><code class="xref py py-mod docutils literal notranslate"><span class="pre">probably.pgcl.wp</span></code></a>) a bit
harder.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="probably.pgcl.cfg.one_big_loop">
<code class="sig-prename descclassname">probably.pgcl.cfg.</code><code class="sig-name descname">one_big_loop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">graph</span></em>, <em class="sig-param"><span class="n">pc_var</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/cfg.html#one_big_loop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.cfg.one_big_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a control-flow graph from a pGCL program with arbitrarily nested
loops, modify the graph in such a way that there is only one big loop that
branches to states of the loop. Use <code class="docutils literal notranslate"><span class="pre">pc_var</span></code> as the variable name for the
program counter variable <cite>pc</cite> in the generated jump table (it must not be
used elsewhere, but should be declared in the program already). For a CFG
from a well-structured pGCL program, the result is basically one big loop.</p>
<p>It is assumed all loop heads (see <a class="reference internal" href="#probably.pgcl.cfg.BlockType" title="probably.pgcl.cfg.BlockType"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlockType</span></code></a>) are properly
annotated.</p>
<p>How does it work? This function basically just replaces each jump to a loop
header, and the program entry and exit with a trampoline
(<a class="reference internal" href="#probably.pgcl.cfg.JumpTable.trampoline" title="probably.pgcl.cfg.JumpTable.trampoline"><code class="xref py py-func docutils literal notranslate"><span class="pre">JumpTable.trampoline()</span></code></a>).</p>
<p>Let’s work through a (contrived) example. The program below uses two nested
(but redundant) loops.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">bool</span> <span class="n">x</span><span class="p">;</span>
<span class="k">while</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">{</span>
        <span class="p">{</span> <span class="p">}</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">]</span> <span class="p">{</span> <span class="n">x</span><span class="o">:=</span> <span class="n">false</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The resulting CFG is (from <a class="reference internal" href="#probably.pgcl.cfg.ControlFlowGraph.from_instructions" title="probably.pgcl.cfg.ControlFlowGraph.from_instructions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ControlFlowGraph.from_instructions()</span></code></a>):</p>
<a class="reference internal image-reference" href="_images/cfg-one-big-loop1.svg"><img alt="_images/cfg-one-big-loop1.svg" class="align-center" src="_images/cfg-one-big-loop1.svg" width="500px" /></a>
<p>After <a class="reference internal" href="#probably.pgcl.cfg.one_big_loop" title="probably.pgcl.cfg.one_big_loop"><code class="xref py py-meth docutils literal notranslate"><span class="pre">one_big_loop()</span></code></a>, we get a much more complicated diagram (see
below). Now all loops go through the jump table basic blocks that branch on
<cite>pc</cite>.</p>
<a class="reference internal image-reference" href="_images/cfg-one-big-loop2.svg"><img alt="_images/cfg-one-big-loop2.svg" class="align-center" src="_images/cfg-one-big-loop2.svg" width="100%" /></a>
<p>A subtlety can be found in the image above:  The first branch of the
generated jump table points to the program end and its terminator has been
flipped (<a class="reference internal" href="#probably.pgcl.cfg.Terminator.flip" title="probably.pgcl.cfg.Terminator.flip"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Terminator.flip()</span></code></a>) so that the <cite>true</cite> branch goes into the
loop and  and the <cite>false</cite> branch exits it. We do this to exactly reproduce
the shape of a generated <cite>while</cite> loop. Also note that the <code class="docutils literal notranslate"><span class="pre">goto</span> <span class="pre">5</span></code> is
unreachable. See <a class="reference internal" href="#probably.pgcl.cfg.JumpTable" title="probably.pgcl.cfg.JumpTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">JumpTable</span></code></a> documentation for more information.</p>
<p>Unfortunately we cannot directly translate this control-flow graph back into
a well-structured pGCL program. By “direct translation” I mean translation
to a pGCL program while using each statement exactly once. Consider for
example the <code class="docutils literal notranslate"><span class="pre">pc</span> <span class="pre">:=</span> <span class="pre">1</span></code> basic block. It is obviously needed before the big
loop to enter the proper state, but it is also needed after the inner while
loop exits to return back to the outer loop (<code class="docutils literal notranslate"><span class="pre">br</span> <span class="pre">(x)</span> <span class="pre">2</span> <span class="pre">7</span></code>).
<a class="reference internal" href="#probably.pgcl.cfg.reduce_cfg_to_instrs" title="probably.pgcl.cfg.reduce_cfg_to_instrs"><code class="xref py py-func docutils literal notranslate"><span class="pre">reduce_cfg_to_instrs()</span></code></a> has extra functionality to handle this case and
will appropriately duplicate some trampoline blocks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph</strong> (<a class="reference internal" href="#probably.pgcl.cfg.ControlFlowGraph" title="probably.pgcl.cfg.ControlFlowGraph"><code class="xref py py-class docutils literal notranslate"><span class="pre">ControlFlowGraph</span></code></a>) – </p></li>
<li><p><strong>pc_var</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="probably.pgcl.cfg.reduce_cfg_to_instrs">
<code class="sig-prename descclassname">probably.pgcl.cfg.</code><code class="sig-name descname">reduce_cfg_to_instrs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">graph</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/cfg.html#reduce_cfg_to_instrs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.cfg.reduce_cfg_to_instrs" title="Permalink to this definition">¶</a></dt>
<dd><p>Reduce a control-flow graph to a program (i.e. list of instructions). The
given graph must have the same shape as one generated by
<a class="reference internal" href="#probably.pgcl.cfg.ControlFlowGraph.from_instructions" title="probably.pgcl.cfg.ControlFlowGraph.from_instructions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ControlFlowGraph.from_instructions()</span></code></a>. This is the case for graphs
transformed by <a class="reference internal" href="#probably.pgcl.cfg.one_big_loop" title="probably.pgcl.cfg.one_big_loop"><code class="xref py py-func docutils literal notranslate"><span class="pre">one_big_loop()</span></code></a>.</p>
<p class="rubric">How Does It Work?</p>
<p>Recreating a structured program from a control-flow graph is a frighteningly
complex and not yet well studied problem. There is an ancient theorem called
<a class="reference external" href="https://en.wikipedia.org/wiki/Structured_program_theorem">Structured Program Theorem</a> that essentially states “flowcharts”
(basically the class of control-flow graphs we care about) can be reduced to
structured programs in a very simple way with pretty unreadable output.
It is listed under “folk version of the theorem”, generating a single while
loop <a class="footnote-reference brackets" href="#id18" id="id11">1</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pc</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">while</span> <span class="n">pc</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">pc</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">block1</span><span class="p">()</span>
        <span class="n">pc</span> <span class="o">:=</span> <span class="n">successor</span> <span class="n">of</span> <span class="n">block</span> <span class="mi">1</span>
    <span class="k">elif</span> <span class="n">pc</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">block2</span><span class="p">()</span>
        <span class="n">pc</span> <span class="o">:=</span> <span class="n">successor</span> <span class="n">of</span> <span class="n">block</span> <span class="mi">2</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>This was <em>not</em> done here. Instead, we use a slightly smarter algorithm that
reconstructs hierarchical control structure using <a class="reference external" href="https://en.wikipedia.org/wiki/Dominator_(graph_theory)">Dominator trees</a>. Let’s
define some terms.</p>
<dl class="simple">
<dt>node <span class="math">\(d\)</span> dominates a node <span class="math">\(n\)</span></dt><dd><p>A node <span class="math">\(d\)</span> dominates a node <span class="math">\(n\)</span> if every path from the entry
node of the control-flow graph to <span class="math">\(n\)</span> must go through <cite>d</cite>. A node
<span class="math">\(d\)</span> <em>strictly</em> dominates a node <span class="math">\(n\)</span> if it dominates
<span class="math">\(n\)</span> and <span class="math">\(n \neq d\)</span>.</p>
</dd>
<dt>dominance frontier</dt><dd><p>The dominance frontier of a node <span class="math">\(d\)</span> is the set of all nodes
<span class="math">\(n\)</span> such that <span class="math">\(d\)</span> dominates an immediate predecessor of
<span class="math">\(n\)</span>, but does not strictly dominate <span class="math">\(n\)</span>.</p>
</dd>
<dt>region</dt><dd><p>A region is defined by an <em>entry edge</em> and <em>exit edge</em>, where the entry
edge dominates the exit edge, the exit edge post-dominates the entry
edge, and any cycle that includes one also includes the other.</p>
</dd>
</dl>
<p>For example, the basic block for the condition of an if statement dominates
all blocks in its <em>true</em> and <em>false</em> branches. Blocks for successor
statements to that conditional statement are also dominated. The same thing
holds for a while loop. So for CFGs generated from structured programs (and
specifically for those generated by
<a class="reference internal" href="#probably.pgcl.cfg.ControlFlowGraph.from_instructions" title="probably.pgcl.cfg.ControlFlowGraph.from_instructions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ControlFlowGraph.from_instructions()</span></code></a>), it suffices to concatenate
statements into a sequence as long as each statement dominates the next one.
The set of basic blocks in such a sequence is called a <em>region</em>
(<a class="reference internal" href="cfg_internals.html#probably.pgcl.cfg._Region" title="probably.pgcl.cfg._Region"><code class="xref py py-class docutils literal notranslate"><span class="pre">_Region</span></code></a>, see also <a class="reference internal" href="#fcd16" id="id12"><span>[fcd16]</span></a>).</p>
<p>Fortunately, this implementation can be restricted to these
program-generated CFGs and those modified by <a class="reference internal" href="#probably.pgcl.cfg.one_big_loop" title="probably.pgcl.cfg.one_big_loop"><code class="xref py py-func docutils literal notranslate"><span class="pre">one_big_loop()</span></code></a>. That
means we can create regions without problems for <em>almost all</em> basic blocks.
The only difficulty are generated trampoline blocks. We handle those
separately in an ugly method (<a class="reference internal" href="cfg_internals.html#probably.pgcl.cfg._join_regions" title="probably.pgcl.cfg._join_regions"><code class="xref py py-func docutils literal notranslate"><span class="pre">_join_regions()</span></code></a>).</p>
<p class="rubric">Restrictions and Generalizations</p>
<p>It is not completely clear what the above restrictions on input CFGs mean
formally. Ignoring trampoline blocks, the restrictions are more strict than
just having CFGs <em>reducible</em> <a class="footnote-reference brackets" href="#id19" id="id13">2</a>. On the other hand, a generalized
algorithm is a hard task, particularly for CFGs with arbitrary <cite>goto</cite>. The
<em>relooper</em> of <em>Emscripten</em> was an attempt in a production JS-to-LLVM
compiler <a class="reference internal" href="#zak11" id="id14"><span>[zak11]</span></a>. Iozzelli has revisited the problem for the <em>Cheerp</em>
compiler using a dominator tree-based approach <a class="reference internal" href="#ioz19" id="id15"><span>[ioz19]</span></a>. In their article,
some ideas implemented here are discovered independently (e.g. our
<a class="reference internal" href="#probably.pgcl.cfg.JumpTable" title="probably.pgcl.cfg.JumpTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">JumpTable</span></code></a> under the name “dispatcher”). Their general algorithms
may be of interest for an improvement of this method <a class="footnote-reference brackets" href="#id20" id="id16">3</a> at the cost of a
much more complex implementation, although the current one hopefully
suffices.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="cfg_internals.html">Documentation of internal classes and functions</a> can be found on another page.</p>
</div>
<dl class="footnote brackets">
<dt class="label" id="id18"><span class="brackets"><a class="fn-backref" href="#id11">1</a></span></dt>
<dd><p>The attentive reader might notice that such an output would subsume <a class="reference internal" href="#probably.pgcl.cfg.one_big_loop" title="probably.pgcl.cfg.one_big_loop"><code class="xref py py-func docutils literal notranslate"><span class="pre">one_big_loop()</span></code></a> completely. Just applying the “folk theorem” would have been an easier way of implementation, but at the cost of almost completely unreadable output.</p>
</dd>
<dt class="label" id="id19"><span class="brackets"><a class="fn-backref" href="#id13">2</a></span></dt>
<dd><p>A <a class="reference external" href="https://en.wikipedia.org/wiki/Control-flow_graph#Reducibility">reducible</a> control-flow graph can be split into a directed acyclic graph of forward edges and a set of back edges where the target dominates the source.</p>
</dd>
<dt class="label" id="id20"><span class="brackets"><a class="fn-backref" href="#id16">3</a></span></dt>
<dd><p>In contrast to our pGCL programs, their reconstructed code is allowed to use <em>break</em> and <em>continue</em> statements.</p>
</dd>
</dl>
<dl class="citation">
<dt class="label" id="fcd16"><span class="brackets"><a class="fn-backref" href="#id12">fcd16</a></span></dt>
<dd><p>“<a class="reference external" href="https://zneak.github.io/fcd/2016/02/17/structuring.html">The Region Problem</a>”  on the <cite>fcd</cite> decompiler blog, 2016.</p>
</dd>
<dt class="label" id="zak11"><span class="brackets"><a class="fn-backref" href="#id14">zak11</a></span></dt>
<dd><p>“<a class="reference external" href="https://raw.githubusercontent.com/kripken/emscripten/8a6e2d67c156d9eaedf88b752be4d1cf4242e088/docs/paper.pdf">Emscripten: an LLVM-to-JavaScript compiler</a>”, Alon Zakai, OOPSLA ‘11.</p>
</dd>
<dt class="label" id="ioz19"><span class="brackets"><a class="fn-backref" href="#id15">ioz19</a></span></dt>
<dd><p>“<a class="reference external" href="https://medium.com/leaningtech/solving-the-structured-control-flow-problem-once-and-for-all-5123117b1ee2">Solving the structured control flow problem once and for all</a>”, Yuri Iozzelli, 2019.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>graph</strong> (<a class="reference internal" href="#probably.pgcl.cfg.ControlFlowGraph" title="probably.pgcl.cfg.ControlFlowGraph"><code class="xref py py-class docutils literal notranslate"><span class="pre">ControlFlowGraph</span></code></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#probably.pgcl.ast.SkipInstr" title="probably.pgcl.ast.SkipInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.WhileInstr" title="probably.pgcl.ast.WhileInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.IfInstr" title="probably.pgcl.ast.IfInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.AsgnInstr" title="probably.pgcl.ast.AsgnInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.ChoiceInstr" title="probably.pgcl.ast.ChoiceInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code></a>, <a class="reference internal" href="#probably.pgcl.ast.TickInstr" title="probably.pgcl.ast.TickInstr"><code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code></a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="probably.pgcl.cfg.program_one_big_loop">
<code class="sig-prename descclassname">probably.pgcl.cfg.</code><code class="sig-name descname">program_one_big_loop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">program</span></em>, <em class="sig-param"><span class="n">pc_var</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/probably/pgcl/cfg.html#program_one_big_loop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#probably.pgcl.cfg.program_one_big_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply <a class="reference internal" href="#probably.pgcl.cfg.one_big_loop" title="probably.pgcl.cfg.one_big_loop"><code class="xref py py-func docutils literal notranslate"><span class="pre">one_big_loop()</span></code></a> to the CFG generated from the given instructions
(using <a class="reference internal" href="#probably.pgcl.cfg.ControlFlowGraph.from_instructions" title="probably.pgcl.cfg.ControlFlowGraph.from_instructions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ControlFlowGraph.from_instructions()</span></code></a>), and convert back to a
list of instructions using <a class="reference internal" href="#probably.pgcl.cfg.reduce_cfg_to_instrs" title="probably.pgcl.cfg.reduce_cfg_to_instrs"><code class="xref py py-func docutils literal notranslate"><span class="pre">reduce_cfg_to_instrs()</span></code></a>.
A new program will be returned.</p>
<p>Use <cite>pc_var</cite> as the name of the generated variable (see <a class="reference internal" href="#probably.pgcl.cfg.JumpTable" title="probably.pgcl.cfg.JumpTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">JumpTable</span></code></a>).
It must not be used already and will be added to the program’s declarations
by this function.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#AssertionError" title="(in Python v3.9)"><strong>AssertionError</strong></a> – if <cite>pc_var</cite> is already declared</p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>program</strong> (<a class="reference internal" href="#probably.pgcl.ast.Program" title="probably.pgcl.ast.Program"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – </p></li>
<li><p><strong>pc_var</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#probably.pgcl.ast.Program" title="probably.pgcl.ast.Program"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a></p>
</dd>
</dl>
</dd></dl>

</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="_sources/pgcl.rst.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2021, Philipp Schröer.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.2.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>